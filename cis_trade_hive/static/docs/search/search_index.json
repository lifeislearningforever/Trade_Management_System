{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|(?!\\b)(?=[A-Z][a-z])|\\.(?!\\d)|&[lg]t;","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"index.html","title":"Welcome to CisTrade Documentation","text":""},{"location":"index.html#overview","title":"Overview","text":"<p>CisTrade is a comprehensive Trade Management System designed for managing portfolios, user-defined fields (UDFs), market data, and trade operations with robust audit trails and a Four-Eyes approval workflow.</p>"},{"location":"index.html#key-features","title":"Key Features","text":"<p> Portfolio Management - Create, edit, and manage portfolios with maker-checker workflow</p> <p> Four-Eyes Principle - Enforced maker-checker approval for all critical operations</p> <p> Apache Kudu/Impala Integration - High-performance data storage and querying</p> <p> Comprehensive Audit Trail - All actions logged to Kudu audit tables</p> <p> UDF Management - Define and manage custom fields for business entities</p> <p> Market Data - FX rates and market data management</p> <p> Real-time Search &amp; Filtering - Fast search across all modules</p>"},{"location":"index.html#documentation-sections","title":"Documentation Sections","text":""},{"location":"index.html#for-business-users","title":"For Business Users","text":"<p>If you're a day-to-day user of CisTrade, start here:</p> <ul> <li> <p> Portfolio Management</p> <p>Learn how to create, edit, and manage portfolios</p> <p> Portfolio Guide</p> </li> <li> <p> Four-Eyes Workflow</p> <p>Understand the maker-checker approval process</p> <p> Workflow Guide</p> </li> <li> <p> UDF Management</p> <p>Manage user-defined fields for custom data</p> <p> UDF Guide</p> </li> <li> <p> Market Data</p> <p>Work with FX rates and market data</p> <p> Market Data Guide</p> </li> </ul>"},{"location":"index.html#for-developers","title":"For Developers","text":"<p>Technical documentation for developers and architects:</p> <ul> <li> <p>:material-architecture:{ .lg .middle } Architecture</p> <p>System architecture and design patterns</p> <p> Architecture</p> </li> <li> <p> Database Schema</p> <p>Kudu/Impala table structures and relationships</p> <p> Schema Docs</p> </li> <li> <p> API Reference</p> <p>Service and repository layer documentation</p> <p> API Docs</p> </li> <li> <p> Development Guide</p> <p>Setup and development workflow</p> <p> Dev Guide</p> </li> </ul>"},{"location":"index.html#for-business-analysts","title":"For Business Analysts","text":"<p>Process flows and business logic documentation:</p> <ul> <li> <p> Business Processes</p> <p>End-to-end business process documentation</p> <p> Processes</p> </li> <li> <p> Data Flow</p> <p>How data moves through the system</p> <p> Data Flow</p> </li> <li> <p> Business Rules</p> <p>Business logic and validation rules</p> <p> Rules</p> </li> <li> <p> Integrations</p> <p>External system integrations</p> <p> Integrations</p> </li> </ul>"},{"location":"index.html#quick-links","title":"Quick Links","text":"<ul> <li> FAQ - Frequently Asked Questions</li> <li> Change Log - Release notes and changes</li> <li> Support - Get help from the team</li> </ul>"},{"location":"index.html#technology-stack","title":"Technology Stack","text":"BackendDatabaseFrontend <ul> <li>Framework: Django 5.2.9</li> <li>Language: Python 3.12</li> <li>Architecture: Repository + Service Layer Pattern</li> </ul> <ul> <li>Primary: Apache Kudu (via Impala)</li> <li>No Django ORM: Direct SQL for all data operations</li> <li>Audit: All actions logged to Kudu audit tables</li> </ul> <ul> <li>Framework: Bootstrap 5</li> <li>Icons: Bootstrap Icons</li> <li>Templates: Django Templates (Jinja2 syntax)</li> </ul>"},{"location":"index.html#system-status","title":"System Status","text":"<p>Production Ready</p> <p>CisTrade is currently in production with the following modules:</p> <ul> <li>\u2705 Portfolio Management</li> <li>\u2705 UDF Management</li> <li>\u2705 Market Data (FX Rates)</li> <li>\u2705 Audit Logging</li> <li>\u2705 Four-Eyes Workflow</li> </ul> <p>Development Mode</p> <p>The system is currently in DEV MODE with:</p> <ul> <li>All permissions bypassed for testing</li> <li>Four-eyes checks disabled for development</li> <li>See <code>DEV_MODE_SETUP.md</code> for details</li> </ul>"},{"location":"index.html#getting-started","title":"Getting Started","text":""},{"location":"index.html#for-business-users_1","title":"For Business Users","text":"<ol> <li>Read the Portfolio Management Guide</li> <li>Understand the Four-Eyes Workflow</li> <li>Check the FAQ for common questions</li> </ol>"},{"location":"index.html#for-developers_1","title":"For Developers","text":"<ol> <li>Review the Architecture</li> <li>Set up your environment with the Development Guide</li> <li>Understand the Database Schema</li> </ol>"},{"location":"index.html#for-business-analysts_1","title":"For Business Analysts","text":"<ol> <li>Study Business Processes</li> <li>Review Data Flow diagrams</li> <li>Check Business Rules</li> </ol>"},{"location":"index.html#need-help","title":"Need Help?","text":"<p>Questions or Issues?</p> <ul> <li>Email: cistrade-support@yourcompany.com</li> <li>In-App Help: Click the Help (?) button in the application</li> <li>Documentation: Browse this site for detailed guides</li> </ul> <p>Last Updated: 2025-12-27 | Version: 1.0.0</p>"},{"location":"changelog.html","title":"Change Log","text":"<p>All notable changes to CisTrade will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog.html#100-2025-12-27","title":"[1.0.0] - 2025-12-27","text":""},{"location":"changelog.html#added","title":"Added","text":"<ul> <li>Initial documentation structure</li> <li>Portfolio Management module with Four-Eyes workflow</li> <li>UDF Management module</li> <li>Market Data (FX Rates) module</li> <li>Comprehensive audit logging to Kudu</li> <li>Repository pattern for data access</li> <li>Service layer for business logic</li> <li>Portfolio close/reactivate functionality</li> <li>Search and filter capabilities</li> <li>CSV export functionality</li> </ul>"},{"location":"changelog.html#technical","title":"Technical","text":"<ul> <li>Django 5.2.9 framework</li> <li>Apache Kudu/Impala integration</li> <li>Direct SQL via repository pattern (no Django ORM)</li> <li>Bootstrap 5 UI</li> <li>Development mode with bypassed permissions</li> </ul>"},{"location":"changelog.html#documentation","title":"Documentation","text":"<ul> <li>Business user guides</li> <li>Technical architecture documentation</li> <li>Database schema documentation</li> <li>Four-Eyes workflow guide</li> <li>MkDocs with Material theme</li> </ul>"},{"location":"changelog.html#unreleased","title":"[Unreleased]","text":""},{"location":"changelog.html#planned","title":"Planned","text":"<ul> <li>Redis caching for performance</li> <li>In-app help system with Kudu storage</li> <li>REST API endpoints</li> <li>Advanced search with filters</li> <li>Bulk operations</li> <li>Report generation</li> <li>Dashboard analytics</li> <li>Mobile-responsive improvements</li> </ul>"},{"location":"changelog.html#version-history","title":"Version History","text":"Version Release Date Major Changes 1.0.0 2025-12-27 Initial release with core modules <p>Note: This changelog will be updated with each release.</p>"},{"location":"business/index.html","title":"Business User Documentation","text":"<p>Welcome to the business user documentation for CisTrade. This section contains guides and tutorials for day-to-day users of the system.</p>"},{"location":"business/index.html#available-guides","title":"Available Guides","text":"<ul> <li>Portfolio Management - Complete guide to managing portfolios</li> <li>Four-Eyes Workflow - Understanding the maker-checker process</li> <li>UDF Management - Managing user-defined fields (coming soon)</li> <li>Market Data - Working with FX rates and market data (coming soon)</li> <li>Reports - Generating and exporting reports (coming soon)</li> <li>FAQ - Frequently asked questions (coming soon)</li> </ul>"},{"location":"business/index.html#quick-start","title":"Quick Start","text":"<ol> <li>Start with Portfolio Management to learn the basics</li> <li>Read Four-Eyes Workflow to understand approvals</li> <li>Check FAQ for common questions</li> </ol> <p>Need Help? Contact cistrade-support@yourcompany.com</p>"},{"location":"business/faq.html","title":"Frequently Asked Questions","text":"<p>Quick answers to common questions about CisTrade.</p>"},{"location":"business/faq.html#general-questions","title":"General Questions","text":""},{"location":"business/faq.html#what-is-cistrade","title":"What is CisTrade?","text":"<p>CisTrade is a comprehensive trade and portfolio management system designed for financial institutions to manage portfolios, track trades, and ensure compliance with four-eyes principle.</p>"},{"location":"business/faq.html#who-can-access-cistrade","title":"Who can access CisTrade?","text":"<p>Users authenticated through the UOB ACL system with assigned permissions. Contact your system administrator for access.</p>"},{"location":"business/faq.html#what-browsers-are-supported","title":"What browsers are supported?","text":"<ul> <li>Chrome (recommended)</li> <li>Firefox</li> <li>Safari</li> <li>Edge</li> </ul>"},{"location":"business/faq.html#portfolio-management","title":"Portfolio Management","text":""},{"location":"business/faq.html#how-do-i-create-a-new-portfolio","title":"How do I create a new portfolio?","text":"<ol> <li>Navigate to Portfolio \u2192 Create New</li> <li>Fill required fields (Code, Name, Currency, Manager)</li> <li>Click \"Save as Draft\"</li> <li>Submit for approval when ready</li> </ol> <p>See Portfolio Management Guide for details.</p>"},{"location":"business/faq.html#why-cant-i-edit-an-active-portfolio","title":"Why can't I edit an Active portfolio?","text":"<p>Active portfolios are locked to prevent unauthorized changes. To modify: 1. Close the portfolio 2. Make changes 3. Reactivate through approval process</p>"},{"location":"business/faq.html#whats-the-difference-between-draft-and-pending","title":"What's the difference between Draft and Pending?","text":"<ul> <li>Draft: Work in progress, only visible to creator</li> <li>Pending Approval: Submitted for checker review, cannot be edited</li> </ul>"},{"location":"business/faq.html#can-i-delete-a-portfolio","title":"Can I delete a portfolio?","text":"<p>No. Portfolios use soft delete (Close) to maintain audit trail. Closed portfolios can be reactivated if needed.</p>"},{"location":"business/faq.html#four-eyes-workflow","title":"Four-Eyes Workflow","text":""},{"location":"business/faq.html#what-is-four-eyes-principle","title":"What is Four-Eyes principle?","text":"<p>A compliance control requiring two different people for any critical operation: - Maker: Creates/updates - Checker: Approves/rejects</p> <p>See Four-Eyes Workflow for complete guide.</p>"},{"location":"business/faq.html#can-i-approve-my-own-work","title":"Can I approve my own work?","text":"<p>No. The system prevents self-approval to maintain segregation of duties.</p>"},{"location":"business/faq.html#what-if-checker-rejects-my-submission","title":"What if checker rejects my submission?","text":"<ol> <li>Review rejection comments</li> <li>Make necessary corrections</li> <li>Resubmit for approval</li> </ol>"},{"location":"business/faq.html#who-can-be-a-checker","title":"Who can be a Checker?","text":"<p>Users in the \"Checkers\" group with appropriate permissions. Contact admin if you need checker access.</p>"},{"location":"business/faq.html#reference-data","title":"Reference Data","text":""},{"location":"business/faq.html#where-does-currency-data-come-from","title":"Where does currency data come from?","text":"<p>Currency reference data comes from GMP system via daily ETL process. It's read-only in CisTrade.</p>"},{"location":"business/faq.html#how-often-is-reference-data-updated","title":"How often is reference data updated?","text":"<ul> <li>Currencies: Daily</li> <li>Countries: Quarterly or as needed</li> <li>Calendars: Annually + adhoc updates</li> <li>Counterparties: Daily</li> </ul>"},{"location":"business/faq.html#can-i-add-new-currencies","title":"Can I add new currencies?","text":"<p>No. Currency additions must be requested through GMP system team.</p>"},{"location":"business/faq.html#udfs-user-defined-fields","title":"UDFs (User Defined Fields)","text":""},{"location":"business/faq.html#what-are-udfs-used-for","title":"What are UDFs used for?","text":"<p>UDFs allow custom fields for business-specific attributes without database changes. Examples: - Risk ratings - Investment strategies - Compliance flags - Review dates</p> <p>See UDF Management Guide.</p>"},{"location":"business/faq.html#how-do-i-add-a-new-udf","title":"How do I add a new UDF?","text":"<p>Contact your system administrator. UDF creation requires special permissions.</p>"},{"location":"business/faq.html#can-udf-values-change-over-time","title":"Can UDF values change over time?","text":"<p>Yes! UDFs maintain full value history with effective dates.</p>"},{"location":"business/faq.html#market-data","title":"Market Data","text":""},{"location":"business/faq.html#how-current-are-fx-rates","title":"How current are FX rates?","text":"<p>FX rates update every 15-30 minutes from Bloomberg/Reuters feeds during market hours.</p>"},{"location":"business/faq.html#can-i-enter-manual-fx-rates","title":"Can I enter manual FX rates?","text":"<p>Yes, for special cases (exotic pairs, corrections, testing). Requires \"market data admin\" permission.</p>"},{"location":"business/faq.html#what-if-fx-rate-looks-wrong","title":"What if FX rate looks wrong?","text":"<ol> <li>Compare with external source (xe.com, Bloomberg)</li> <li>Check if pair is inverted</li> <li>Report to market data team</li> </ol> <p>See Market Data Guide.</p>"},{"location":"business/faq.html#permissions-access","title":"Permissions &amp; Access","text":""},{"location":"business/faq.html#how-do-i-request-access-to-a-module","title":"How do I request access to a module?","text":"<p>Contact your manager or system administrator with: - Module name (Portfolio, UDF, Market Data, etc.) - Access level needed (READ, WRITE, READ_WRITE) - Business justification</p>"},{"location":"business/faq.html#why-am-i-getting-access-denied","title":"Why am I getting \"Access Denied\"?","text":"<p>Your user account doesn't have required permission for that action. Contact admin to request access.</p>"},{"location":"business/faq.html#how-long-does-permission-approval-take","title":"How long does permission approval take?","text":"<p>Typically 1-2 business days, depending on approval workflow.</p>"},{"location":"business/faq.html#audit-compliance","title":"Audit &amp; Compliance","text":""},{"location":"business/faq.html#are-all-my-actions-tracked","title":"Are all my actions tracked?","text":"<p>Yes. CisTrade logs all significant actions: - Logins - Data views - Updates/changes - Exports - Approvals/rejections</p>"},{"location":"business/faq.html#who-can-view-audit-logs","title":"Who can view audit logs?","text":"<p>Users with \"audit log viewer\" permission. Typically compliance officers and management.</p>"},{"location":"business/faq.html#how-long-are-audit-logs-retained","title":"How long are audit logs retained?","text":"<p>7 years to comply with regulatory requirements.</p>"},{"location":"business/faq.html#reports-exports","title":"Reports &amp; Exports","text":""},{"location":"business/faq.html#what-report-formats-are-available","title":"What report formats are available?","text":"<ul> <li>PDF: Professional reports with charts</li> <li>Excel: Detailed data with formulas</li> <li>CSV: Raw data for imports</li> </ul> <p>See Reports Guide.</p>"},{"location":"business/faq.html#can-i-schedule-automated-reports","title":"Can I schedule automated reports?","text":"<p>Yes! Go to Reports \u2192 Schedule to set up recurring reports with email delivery.</p>"},{"location":"business/faq.html#why-is-my-export-failing","title":"Why is my export failing?","text":"<p>Common causes: - Too much data (reduce date range) - Network timeout (try CSV format) - Insufficient permissions</p>"},{"location":"business/faq.html#technical-issues","title":"Technical Issues","text":""},{"location":"business/faq.html#system-is-slow","title":"System is slow","text":"<p>Try: 1. Clear browser cache 2. Close unused tabs 3. Check internet connection 4. Contact IT if persistent</p>"},{"location":"business/faq.html#i-cant-log-in","title":"I can't log in","text":"<p>Check: 1. Correct user ID 2. Account is active 3. Not locked due to failed attempts 4. Contact helpdesk if needed</p>"},{"location":"business/faq.html#page-shows-error-message","title":"Page shows error message","text":"<p>Steps: 1. Note exact error message 2. Refresh page (F5) 3. Clear cache and retry 4. Contact support with error details</p>"},{"location":"business/faq.html#data-looks-incorrect","title":"Data looks incorrect","text":"<p>Verify: 1. Date range filters 2. Status filters 3. Compare with source system 4. Report to support if discrepancy confirmed</p>"},{"location":"business/faq.html#training-support","title":"Training &amp; Support","text":""},{"location":"business/faq.html#where-can-i-get-training","title":"Where can I get training?","text":"<ul> <li>Documentation: Click ? icon or Documentation link</li> <li>Quick Reference: Print this guide</li> <li>Training Sessions: Contact training team</li> <li>Video Tutorials: Coming soon</li> </ul>"},{"location":"business/faq.html#how-do-i-report-a-bug","title":"How do I report a bug?","text":"<p>Email: cistrade-support@yourcompany.com</p> <p>Include: - What you were trying to do - What happened (error message, screenshot) - When it occurred - Your user ID</p>"},{"location":"business/faq.html#who-do-i-contact-for-help","title":"Who do I contact for help?","text":"<p>General Support: cistrade-support@yourcompany.com Technical Issues: IT helpdesk Permission Requests: Your manager Training: training@yourcompany.com Market Data: marketdata@yourcompany.com</p>"},{"location":"business/faq.html#best-practices","title":"Best Practices","text":""},{"location":"business/faq.html#tips-for-new-users","title":"Tips for new users","text":"<ol> <li>Start with Dashboard: Familiarize yourself with layout</li> <li>Read Quick Reference: Print and keep handy</li> <li>Practice in TEST: Use test portfolios before real data</li> <li>Ask Questions: No question is too basic</li> <li>Check Permissions: Know what you can/can't do</li> </ol>"},{"location":"business/faq.html#keyboard-shortcuts","title":"Keyboard Shortcuts","text":"<ul> <li><code>Ctrl + S</code>: Save (when in edit mode)</li> <li><code>Ctrl + F</code>: Search current page</li> <li><code>Esc</code>: Close modal/dialog</li> <li><code>Tab</code>: Navigate between fields</li> </ul>"},{"location":"business/faq.html#working-efficiently","title":"Working Efficiently","text":"<ol> <li>Use Search: Faster than browsing lists</li> <li>Set Filters: Reduce clutter</li> <li>Export Data: Analyze in Excel if needed</li> <li>Save Filters: Reuse common searches</li> <li>Bookmark Pages: Quick access to frequent tasks</li> </ol>"},{"location":"business/faq.html#still-have-questions","title":"Still Have Questions?","text":"<ul> <li>In-App Help: Click ? icon (top right)</li> <li>Full Documentation: Documentation menu</li> <li>Support Email: cistrade-support@yourcompany.com</li> <li>Phone: +65-6xxx-xxxx (business hours)</li> </ul>"},{"location":"business/four-eyes-workflow.html","title":"Four-Eyes Workflow Guide","text":""},{"location":"business/four-eyes-workflow.html#what-is-the-four-eyes-principle","title":"What is the Four-Eyes Principle?","text":"<p>The Four-Eyes Principle (also known as Maker-Checker workflow) is a security and compliance mechanism that requires two different people to authorize critical operations. This prevents fraud, errors, and ensures data integrity.</p> <p>Key Rule</p> <p>No single person can both create AND approve a change.</p> <ul> <li>Maker = Creates/edits data</li> <li>Checker = Reviews and approves/rejects</li> </ul> <p>The Maker and Checker must be different people.</p>"},{"location":"business/four-eyes-workflow.html#why-four-eyes","title":"Why Four-Eyes?","text":""},{"location":"business/four-eyes-workflow.html#benefits","title":"Benefits","text":"<p> Fraud Prevention - No single person can make unauthorized changes</p> <p> Error Detection - Second pair of eyes catches mistakes</p> <p> Compliance - Meets regulatory requirements for financial systems</p> <p> Audit Trail - Complete record of who did what and when</p>"},{"location":"business/four-eyes-workflow.html#roles-and-responsibilities","title":"Roles and Responsibilities","text":""},{"location":"business/four-eyes-workflow.html#maker-role","title":"Maker Role","text":"<p>Who: Users in the Makers group</p> <p>Responsibilities: - Create new portfolios, UDFs, and other entities - Edit existing items (in Draft or Rejected status only) - Submit items for approval - View their own submissions</p> <p>Cannot: - Approve their own work - Approve any portfolio they created or edited - Directly activate portfolios</p> <p>Typical Tasks: -  Create new portfolio -  Edit draft portfolio -  Submit for approval -  View submission status</p>"},{"location":"business/four-eyes-workflow.html#checker-role","title":"Checker Role","text":"<p>Who: Users in the Checkers group</p> <p>Responsibilities: - Review pending submissions - Approve valid submissions - Reject submissions with issues (must provide comments) - Ensure data quality and compliance</p> <p>Cannot: - Approve portfolios they created - Edit portfolios directly - Submit portfolios for approval</p> <p>Typical Tasks: -  Review pending approvals -  Approve valid submissions -  Reject with comments -  Provide feedback</p>"},{"location":"business/four-eyes-workflow.html#the-workflow-process","title":"The Workflow Process","text":""},{"location":"business/four-eyes-workflow.html#complete-workflow-diagram","title":"Complete Workflow Diagram","text":"<pre><code>graph TD\n    Start([Maker Creates Portfolio]) --&gt; Draft[Draft Status]\n    Draft --&gt; |Maker Edits| Draft\n    Draft --&gt; |Maker Submits| Pending[Pending Approval]\n\n    Pending --&gt; |Checker Reviews| Decision{Checker Decision}\n\n    Decision --&gt; |Approve| Active[Active Status]\n    Decision --&gt; |Reject| Rejected[Rejected Status]\n\n    Rejected --&gt; |Maker Edits| Draft\n\n    Active --&gt; |User Closes| Inactive[Inactive Status]\n    Inactive --&gt; |User Reactivates| Active\n\n    Active --&gt; End([Portfolio in Use])\n\n    style Draft fill:#fff3cd\n    style Pending fill:#cfe2ff\n    style Active fill:#d1e7dd\n    style Rejected fill:#f8d7da\n    style Inactive fill:#e2e3e5</code></pre>"},{"location":"business/four-eyes-workflow.html#step-by-step-process","title":"Step-by-Step Process","text":""},{"location":"business/four-eyes-workflow.html#step-1-maker-creates-draft","title":"Step 1: Maker Creates (Draft)","text":"<ol> <li>Maker logs into CisTrade</li> <li>Navigates to Portfolios \u2192 Create New</li> <li>Fills in all required fields</li> <li>Clicks \"Create Portfolio\"</li> <li>Result: Portfolio saved with status = Draft</li> </ol> <p>Draft Saved</p> <p>Portfolio is saved but not yet active. It remains in Draft until submitted for approval.</p>"},{"location":"business/four-eyes-workflow.html#step-2-maker-edits-optional","title":"Step 2: Maker Edits (Optional)","text":"<ol> <li>Maker can edit Draft portfolio as many times as needed</li> <li>Make changes and click \"Update Portfolio\"</li> <li>Status remains Draft</li> </ol> <p>Review Before Submitting</p> <p>Take your time to review all details before submission. Once submitted, you cannot edit until it's approved or rejected.</p>"},{"location":"business/four-eyes-workflow.html#step-3-maker-submits-for-approval","title":"Step 3: Maker Submits for Approval","text":"<ol> <li>Maker opens the Draft portfolio</li> <li>Reviews all details one final time</li> <li>Clicks Submit for Approval</li> <li>Confirms the submission</li> <li>Result: Portfolio status changes to Pending Approval</li> </ol> <p>Cannot Edit After Submission</p> <p>Once submitted, the Maker cannot edit the portfolio until it's either: - Approved (becomes Active - cannot edit) - Rejected (can edit and resubmit)</p>"},{"location":"business/four-eyes-workflow.html#step-4-checker-reviews","title":"Step 4: Checker Reviews","text":"<ol> <li>Checker navigates to Pending Approvals</li> <li>Sees list of all portfolios awaiting approval</li> <li>Opens portfolio to review details</li> <li>Checks for:<ul> <li>\u2705 Correct data entry</li> <li>\u2705 Completeness</li> <li>\u2705 Business logic compliance</li> <li>\u2705 No duplicates</li> </ul> </li> </ol>"},{"location":"business/four-eyes-workflow.html#step-5-checker-decision","title":"Step 5: Checker Decision","text":"<p>The Checker has two options:</p> \u2705 Approve\u274c Reject <p>When to Approve: - All data is correct - No policy violations - Portfolio serves a valid business purpose</p> <p>How to Approve: 1. Click Approve button 2. Optionally add approval comments 3. Click confirm 4. Result: Portfolio status \u2192 Active</p> <p>Portfolio Activated</p> <p>The portfolio is now active and can be used for transactions.</p> <p>When to Reject: - Data errors found - Missing information - Policy violations - Duplicate portfolio - Invalid business case</p> <p>How to Reject: 1. Click Reject button 2. Required: Enter rejection comments explaining what needs to be fixed 3. Click confirm 4. Result: Portfolio status \u2192 Rejected</p> <p>Comments Required</p> <p>You must provide detailed comments explaining why the portfolio was rejected. This helps the Maker fix the issues.</p>"},{"location":"business/four-eyes-workflow.html#step-6a-if-approved","title":"Step 6a: If Approved","text":"<ol> <li>Portfolio status = Active</li> <li>Maker receives notification</li> <li>Portfolio can now be used</li> <li>Portfolio cannot be edited (unless closed and recreated)</li> </ol>"},{"location":"business/four-eyes-workflow.html#step-6b-if-rejected","title":"Step 6b: If Rejected","text":"<ol> <li>Portfolio status = Rejected</li> <li>Maker receives notification with Checker's comments</li> <li>Maker can:<ul> <li>Edit the portfolio to fix issues</li> <li>Resubmit for approval</li> </ul> </li> <li>Workflow starts again from Step 3</li> </ol>"},{"location":"business/four-eyes-workflow.html#workflow-states","title":"Workflow States","text":""},{"location":"business/four-eyes-workflow.html#state-transition-table","title":"State Transition Table","text":"Current Status Who Can Act Available Actions Next Status Draft Maker Edit, Submit Draft (after edit), Pending Approval (after submit) Pending Approval Checker Approve, Reject Active (approve), Rejected (reject) Active Any authorized user Close Inactive Rejected Maker Edit, Resubmit Draft (after edit), Pending Approval (after resubmit) Inactive Any authorized user Reactivate Active"},{"location":"business/four-eyes-workflow.html#common-scenarios","title":"Common Scenarios","text":""},{"location":"business/four-eyes-workflow.html#scenario-1-first-time-submission-approved","title":"Scenario 1: First Time Submission - Approved","text":"<pre><code>sequenceDiagram\n    actor Alice as Alice (Maker)\n    actor Bob as Bob (Checker)\n    participant System\n\n    Alice-&gt;&gt;System: Create Portfolio\n    System--&gt;&gt;Alice: Draft Status\n    Alice-&gt;&gt;System: Submit for Approval\n    System--&gt;&gt;Bob: Notification\n    Bob-&gt;&gt;System: Review Portfolio\n    Bob-&gt;&gt;System: Approve\n    System--&gt;&gt;Alice: Notification (Approved)\n    System-&gt;&gt;System: Status = Active</code></pre> <p>Timeline: 1. Monday 9:00 AM - Alice creates portfolio 2. Monday 9:15 AM - Alice submits for approval 3. Monday 10:00 AM - Bob reviews and approves 4. Portfolio is now Active</p>"},{"location":"business/four-eyes-workflow.html#scenario-2-submission-rejected-fixed-re-approved","title":"Scenario 2: Submission Rejected, Fixed, Re-approved","text":"<pre><code>sequenceDiagram\n    actor Alice as Alice (Maker)\n    actor Bob as Bob (Checker)\n    participant System\n\n    Alice-&gt;&gt;System: Create &amp; Submit Portfolio\n    Bob-&gt;&gt;System: Review Portfolio\n    Bob-&gt;&gt;System: Reject (Missing Currency)\n    System--&gt;&gt;Alice: Rejected with Comments\n    Alice-&gt;&gt;System: Edit Portfolio (Add Currency)\n    Alice-&gt;&gt;System: Resubmit for Approval\n    Bob-&gt;&gt;System: Review Again\n    Bob-&gt;&gt;System: Approve\n    System-&gt;&gt;System: Status = Active</code></pre> <p>Timeline: 1. Monday 9:00 AM - Alice creates and submits portfolio 2. Monday 10:00 AM - Bob rejects (missing currency field) 3. Monday 11:00 AM - Alice fixes and resubmits 4. Monday 2:00 PM - Bob reviews and approves 5. Portfolio is now Active</p>"},{"location":"business/four-eyes-workflow.html#scenario-3-cannot-self-approve-violation","title":"Scenario 3: Cannot Self-Approve (Violation)","text":"<pre><code>sequenceDiagram\n    actor Alice as Alice (Maker &amp; Checker)\n    participant System\n\n    Alice-&gt;&gt;System: Create Portfolio (as Maker)\n    Alice-&gt;&gt;System: Submit for Approval\n    Alice-&gt;&gt;System: Try to Approve (as Checker)\n    System--&gt;&gt;Alice: \u274c ERROR: Cannot approve own work</code></pre> <p>Four-Eyes Violation</p> <p>The system prevents users from approving their own submissions, even if they have Checker permissions.</p>"},{"location":"business/four-eyes-workflow.html#approval-queue-management","title":"Approval Queue Management","text":""},{"location":"business/four-eyes-workflow.html#for-checkers-managing-pending-approvals","title":"For Checkers: Managing Pending Approvals","text":""},{"location":"business/four-eyes-workflow.html#view-pending-items","title":"View Pending Items","text":"<ol> <li>Click Pending Approvals button (shows count badge)</li> <li>See list of all items awaiting approval</li> <li>Items sorted by submission date (oldest first)</li> </ol>"},{"location":"business/four-eyes-workflow.html#review-priority","title":"Review Priority","text":"<p>Prioritization Tips</p> <ul> <li>Review oldest items first</li> <li>Check urgent items (flagged by Makers)</li> <li>Review high-value portfolios with extra care</li> </ul>"},{"location":"business/four-eyes-workflow.html#batch-processing","title":"Batch Processing","text":"<p>While each item must be individually approved, you can: - Sort by submitter to review all items from one Maker - Filter by type (portfolio, UDF, etc.) - Use search to find specific items</p>"},{"location":"business/four-eyes-workflow.html#notifications-and-alerts","title":"Notifications and Alerts","text":""},{"location":"business/four-eyes-workflow.html#maker-notifications","title":"Maker Notifications","text":"<p>You receive notifications when: - \u2705 Your submission is approved - \u274c Your submission is rejected (with comments) - \ud83d\udd52 Your submission is taking longer than expected</p>"},{"location":"business/four-eyes-workflow.html#checker-notifications","title":"Checker Notifications","text":"<p>You receive notifications when: - \ud83d\udce5 New items are submitted for your approval - \u26a0\ufe0f Items are awaiting approval for &gt; 24 hours</p>"},{"location":"business/four-eyes-workflow.html#best-practices","title":"Best Practices","text":""},{"location":"business/four-eyes-workflow.html#for-makers","title":"For Makers","text":"<p>Maker Best Practices</p> <p>\u2705 Review before submitting - Double-check all fields</p> <p>\u2705 Provide clear descriptions - Help Checkers understand your intent</p> <p>\u2705 Fix rejections quickly - Address Checker comments promptly</p> <p>\u2705 Use Draft status - Save work in progress, submit when complete</p> <p>\u2705 Communicate with Checkers - If urgent, notify them separately</p>"},{"location":"business/four-eyes-workflow.html#for-checkers","title":"For Checkers","text":"<p>Checker Best Practices</p> <p>\u2705 Review promptly - Don't let items sit in queue</p> <p>\u2705 Provide detailed rejection comments - Help Makers fix issues</p> <p>\u2705 Check for duplicates - Search before approving</p> <p>\u2705 Validate business logic - Ensure data makes sense</p> <p>\u2705 Don't rubber-stamp - Take time to review carefully</p>"},{"location":"business/four-eyes-workflow.html#audit-trail","title":"Audit Trail","text":"<p>Every action in the Four-Eyes workflow is logged:</p>"},{"location":"business/four-eyes-workflow.html#what-is-logged","title":"What is Logged","text":"Action Information Captured Create Who created, when, initial values Edit Who edited, when, what changed Submit Who submitted, when Approve Who approved, when, comments Reject Who rejected, when, rejection reason"},{"location":"business/four-eyes-workflow.html#viewing-audit-history","title":"Viewing Audit History","text":"<ol> <li>Open any portfolio detail page</li> <li>Scroll to Workflow Information section</li> <li>See complete history:<ul> <li>Created by (user, timestamp)</li> <li>Updated by (user, timestamp)</li> <li>Submitted by (user, timestamp)</li> <li>Approved/Rejected by (user, timestamp, comments)</li> </ul> </li> </ol>"},{"location":"business/four-eyes-workflow.html#compliance-and-regulations","title":"Compliance and Regulations","text":""},{"location":"business/four-eyes-workflow.html#why-four-eyes-is-required","title":"Why Four-Eyes is Required","text":"<p>CisTrade implements Four-Eyes workflow to comply with:</p> <ul> <li>SOX (Sarbanes-Oxley) - Financial controls and audit trails</li> <li>Internal Audit Requirements - Separation of duties</li> <li>Risk Management - Fraud prevention and error detection</li> <li>Basel III - Operational risk controls (for financial institutions)</li> </ul>"},{"location":"business/four-eyes-workflow.html#evidence-for-auditors","title":"Evidence for Auditors","text":"<p>The system provides: - Complete audit logs in Kudu database - Timestamped actions with user identification - Inability to self-approve (system-enforced) - Immutable history (cannot be deleted or modified)</p>"},{"location":"business/four-eyes-workflow.html#troubleshooting","title":"Troubleshooting","text":""},{"location":"business/four-eyes-workflow.html#problem-cannot-find-approve-button","title":"Problem: Cannot Find Approve Button","text":"<p>Cause: You may be viewing your own submission</p> <p>Solution: Only different users can approve. If you created the portfolio, you cannot approve it. Ask a colleague who is a Checker to review.</p>"},{"location":"business/four-eyes-workflow.html#problem-submit-button-grayed-out","title":"Problem: Submit Button Grayed Out","text":"<p>Cause: Portfolio may not be in Draft status</p> <p>Solution: Check portfolio status. Only Draft portfolios can be submitted. If Rejected, edit first, then submit.</p>"},{"location":"business/four-eyes-workflow.html#problem-rejection-comments-not-clear","title":"Problem: Rejection Comments Not Clear","text":"<p>Cause: Checker provided minimal feedback</p> <p>Solution: Contact the Checker directly for clarification before editing and resubmitting.</p>"},{"location":"business/four-eyes-workflow.html#problem-urgent-approval-needed","title":"Problem: Urgent Approval Needed","text":"<p>Solution: 1. Submit the portfolio normally 2. Contact a Checker directly (email, phone, chat) 3. Ask them to review urgently 4. Provide business justification for urgency</p> <p>No Express Lane</p> <p>There is no way to bypass the Four-Eyes workflow, even for urgent items. Plan ahead and submit early.</p>"},{"location":"business/four-eyes-workflow.html#faqs","title":"FAQs","text":"Can I approve if I'm both a Maker and a Checker? <p>No. Even if you have both roles, you cannot approve portfolios you created. The system enforces the Four-Eyes rule.</p> What if the Checker is on vacation? <p>Any Checker can approve any pending item. If your usual Checker is unavailable, another Checker can approve.</p> Can I withdraw a submission? <p>Currently, no. Once submitted, the item must be either approved or rejected by a Checker. Contact a Checker if you need to withdraw.</p> How long should approvals take? <p>Best practice: Checkers should review within 24 hours. Items pending &gt; 48 hours should be escalated.</p> Can I see who approved my portfolio? <p>Yes. Open the portfolio detail page and check the Workflow Information section.</p> What happens if I reject without comments? <p>The system requires rejection comments. You cannot reject without providing a reason.</p> Can I edit an approved portfolio? <p>No. Once approved and active, portfolios cannot be edited. You would need to close it and create a new one with the changes.</p>"},{"location":"business/four-eyes-workflow.html#development-mode-note","title":"Development Mode Note","text":"<p>DEV MODE - Four-Eyes Partially Disabled</p> <p>The system is currently in Development Mode where:</p> <ul> <li>All users can create portfolios</li> <li>All users can approve (even their own - for testing)</li> <li>Permission checks are bypassed</li> </ul> <p>In Production, the full Four-Eyes workflow will be enforced: - Only Makers can create - Only Checkers can approve - Users cannot approve their own work (strictly enforced)</p>"},{"location":"business/four-eyes-workflow.html#related-topics","title":"Related Topics","text":"<ul> <li>Portfolio Management - How to create and manage portfolios</li> <li>UDF Management - Four-Eyes for UDF definitions</li> <li>Business Processes - Complete process flows</li> </ul>"},{"location":"business/four-eyes-workflow.html#need-help","title":"Need Help?","text":"<p>Questions?</p> <ul> <li>In-App Help: Click the Help (?) button</li> <li>Email: cistrade-support@yourcompany.com</li> <li>Escalation: Contact your manager for urgent approvals</li> </ul> <p>Last Updated: 2025-12-27</p>"},{"location":"business/market-data.html","title":"Market Data Guide","text":"<p>Access and manage foreign exchange rates and other market data for accurate portfolio valuation and risk management.</p>"},{"location":"business/market-data.html#overview","title":"Overview","text":"<p>Market Data module provides:</p> <ul> <li>FX Rates: Foreign exchange rates for currency conversion</li> <li>Rate History: Historical rate tracking</li> <li>Real-time Dashboard: Visual rate monitoring</li> <li>Data Sources: Integration with market data providers</li> </ul>"},{"location":"business/market-data.html#fx-rate-dashboard","title":"FX Rate Dashboard","text":"<p>Navigation: Market Data \u2192 FX Dashboard</p>"},{"location":"business/market-data.html#key-features","title":"Key Features","text":"<p>Visual Rate Display:</p> <ul> <li>Latest FX rates for all currency pairs</li> <li>Percentage change indicators</li> <li>Trend sparklines</li> <li>Last update timestamp</li> </ul> <p>Quick Filters:</p> <ul> <li>Filter by base currency</li> <li>Filter by quote currency</li> <li>Search currency pairs</li> <li>Sort by rate or change</li> </ul> <p>Rate Highlights:</p> <ul> <li>\ud83d\udfe2 Green: Rate increased</li> <li>\ud83d\udd34 Red: Rate decreased</li> <li>\u26aa Gray: No change</li> </ul>"},{"location":"business/market-data.html#dashboard-layout","title":"Dashboard Layout","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  FX Rate Dashboard                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Currency Pair  \u2502  Rate  \u2502  Change  \u2502 Trend \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  USD/SGD        \u2502 1.3450 \u2502  +0.15%  \u2502  \u2197    \u2502\n\u2502  EUR/SGD        \u2502 1.4520 \u2502  -0.08%  \u2502  \u2198    \u2502\n\u2502  GBP/SGD        \u2502 1.6780 \u2502  +0.22%  \u2502  \u2197    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"business/market-data.html#fx-rate-list","title":"FX Rate List","text":"<p>Navigation: Market Data \u2192 FX Rates</p>"},{"location":"business/market-data.html#view-rates","title":"View Rates","text":"<p>Default View: Shows all active FX rates</p> <p>Columns:</p> <ul> <li>Base Currency (e.g., USD)</li> <li>Quote Currency (e.g., SGD)</li> <li>Rate (e.g., 1.3450)</li> <li>Effective Date</li> <li>Bid/Ask Spread</li> <li>Source</li> <li>Last Updated</li> </ul>"},{"location":"business/market-data.html#search-filter","title":"Search &amp; Filter","text":"<p>Search Options:</p> <ul> <li>Currency pair (e.g., \"USD/SGD\")</li> <li>Base currency (e.g., \"USD\")</li> <li>Quote currency (e.g., \"SGD\")</li> </ul> <p>Filters:</p> <ul> <li>Date range (effective dates)</li> <li>Source (Bloomberg, Reuters, Manual)</li> <li>Rate type (Spot, Forward, Swap)</li> </ul>"},{"location":"business/market-data.html#export-rates","title":"Export Rates","text":"<p>CSV Export: Download FX rates</p> <p>Format: <pre><code>Base Currency,Quote Currency,Rate,Effective Date,Source,Last Updated\nUSD,SGD,1.3450,2025-12-27,Bloomberg,2025-12-27 09:00:00\nEUR,SGD,1.4520,2025-12-27,Bloomberg,2025-12-27 09:00:00\nGBP,SGD,1.6780,2025-12-27,Bloomberg,2025-12-27 09:00:00\n</code></pre></p>"},{"location":"business/market-data.html#rate-sources","title":"Rate Sources","text":""},{"location":"business/market-data.html#bloomberg-integration","title":"Bloomberg Integration","text":"<p>Data Feed: Real-time rates from Bloomberg</p> <ul> <li>Update Frequency: Every 15 minutes</li> <li>Coverage: 150+ currency pairs</li> <li>Reliability: 99.9% uptime</li> <li>Delay: &lt; 2 seconds</li> </ul>"},{"location":"business/market-data.html#reuters-integration","title":"Reuters Integration","text":"<p>Data Feed: Market rates from Refinitiv</p> <ul> <li>Update Frequency: Every 30 minutes</li> <li>Coverage: 120+ currency pairs</li> <li>Reliability: 99.5% uptime</li> <li>Delay: &lt; 5 seconds</li> </ul>"},{"location":"business/market-data.html#manual-entry","title":"Manual Entry","text":"<p>Custom Rates: For special situations</p> <ul> <li>Exotic currency pairs</li> <li>Historical corrections</li> <li>Adjustment rates</li> <li>Test scenarios</li> </ul>"},{"location":"business/market-data.html#working-with-fx-rates","title":"Working with FX Rates","text":""},{"location":"business/market-data.html#view-rate-history","title":"View Rate History","text":"<p>Click any currency pair to see historical rates:</p> <p>Timeline View: <pre><code>2025-12-27 09:00: USD/SGD = 1.3450 (Bloomberg)\n2025-12-27 06:00: USD/SGD = 1.3445 (Bloomberg)\n2025-12-26 16:00: USD/SGD = 1.3430 (Bloomberg)\n2025-12-26 09:00: USD/SGD = 1.3425 (Bloomberg)\n</code></pre></p> <p>Chart View:</p> <ul> <li>Line chart showing rate movement</li> <li>Configurable date range (1D, 1W, 1M, 3M, 1Y)</li> <li>Zoom and pan controls</li> <li>Export chart as image</li> </ul>"},{"location":"business/market-data.html#compare-rates","title":"Compare Rates","text":"<p>Side-by-Side Comparison:</p> <p>Select multiple currency pairs to compare:</p> <pre><code>       \u2502 USD/SGD \u2502 EUR/SGD \u2502 GBP/SGD\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nToday  \u2502 1.3450  \u2502 1.4520  \u2502 1.6780\n1W Ago \u2502 1.3430  \u2502 1.4510  \u2502 1.6750\nChange \u2502 +0.15%  \u2502 +0.07%  \u2502 +0.18%\n</code></pre>"},{"location":"business/market-data.html#rate-alerts","title":"Rate Alerts","text":"<p>Set up notifications for rate movements:</p> <p>Alert Types:</p> <ul> <li>Rate crosses threshold (e.g., USD/SGD &gt; 1.35)</li> <li>Percentage change (e.g., &gt; 1% daily move)</li> <li>Volatility spike (e.g., unusual movement)</li> </ul> <p>Delivery:</p> <ul> <li>Email notification</li> <li>In-app notification</li> <li>SMS (optional)</li> </ul>"},{"location":"business/market-data.html#portfolio-valuation","title":"Portfolio Valuation","text":""},{"location":"business/market-data.html#multi-currency-portfolios","title":"Multi-Currency Portfolios","text":"<p>FX rates automatically applied for valuation:</p> <p>Example Portfolio: <pre><code>Portfolio: GLOBAL_EQUITY\nBase Currency: SGD\n\nHoldings:\n  - USD Assets:  $1,000,000 \u00d7 1.3450 = SGD 1,345,000\n  - EUR Assets:    \u20ac500,000 \u00d7 1.4520 = SGD   726,000\n  - GBP Assets:    \u00a3300,000 \u00d7 1.6780 = SGD   503,400\n                                      \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nTotal NAV (SGD):                              SGD 2,574,400\n</code></pre></p>"},{"location":"business/market-data.html#revaluation","title":"Revaluation","text":"<p>Automatic: Portfolio NAV updated when rates change</p> <p>Manual: Force revaluation on demand</p> <p>Batch: Revalue all portfolios at month-end</p>"},{"location":"business/market-data.html#data-quality","title":"Data Quality","text":""},{"location":"business/market-data.html#rate-validation","title":"Rate Validation","text":"<p>Automated Checks:</p> <ul> <li>\u2713 Rate within expected range</li> <li>\u2713 No sudden jumps (&gt; 5% without news)</li> <li>\u2713 Source is reliable</li> <li>\u2713 Timestamp is recent (&lt; 1 hour old)</li> </ul> <p>Quality Indicators:</p> <ul> <li>\ud83d\udfe2 High Quality: All checks pass</li> <li>\ud83d\udfe1 Medium Quality: Some checks fail</li> <li>\ud83d\udd34 Low Quality: Multiple checks fail</li> </ul>"},{"location":"business/market-data.html#data-refresh","title":"Data Refresh","text":"<p>Scheduled Updates:</p> <ul> <li>Peak Hours (9am-6pm): Every 15 minutes</li> <li>Off-Peak: Every 60 minutes</li> <li>Weekends: Manual only</li> </ul> <p>Manual Refresh:</p> <p>Click \"Refresh Rates\" button to force update</p>"},{"location":"business/market-data.html#historical-analysis","title":"Historical Analysis","text":""},{"location":"business/market-data.html#rate-trends","title":"Rate Trends","text":"<p>Moving Averages:</p> <ul> <li>7-day MA</li> <li>30-day MA</li> <li>90-day MA</li> </ul> <p>Volatility Metrics:</p> <ul> <li>Daily standard deviation</li> <li>Intraday range (high-low)</li> <li>Annualized volatility</li> </ul>"},{"location":"business/market-data.html#performance-reports","title":"Performance Reports","text":"<p>Monthly Summary:</p> <pre><code>Currency Pair: USD/SGD\nPeriod: December 2025\n\nOpening Rate:   1.3420\nClosing Rate:   1.3450\nHigh:           1.3480\nLow:            1.3410\nAverage:        1.3445\nStd Deviation:  0.0018\nVolatility:     1.2%\n</code></pre>"},{"location":"business/market-data.html#integration-with-reference-data","title":"Integration with Reference Data","text":""},{"location":"business/market-data.html#currency-master","title":"Currency Master","text":"<p>FX rates linked to currency reference:</p> <p>Currency Attributes:</p> <ul> <li>ISO Code (USD, EUR, GBP)</li> <li>Currency Name</li> <li>Decimal Places (2 for most currencies)</li> <li>Calendar (for holiday adjustments)</li> <li>Spot Settlement (T+2 typically)</li> </ul>"},{"location":"business/market-data.html#calendar-integration","title":"Calendar Integration","text":"<p>Non-Trading Days: Rates use previous business day</p> <p>Holiday Logic: <pre><code>If today is holiday:\n  Use last valid business day rate\nElse:\n  Use today's rate\n</code></pre></p>"},{"location":"business/market-data.html#troubleshooting","title":"Troubleshooting","text":""},{"location":"business/market-data.html#rates-not-updating","title":"Rates Not Updating","text":"<p>Check:</p> <ol> <li>Is data feed connected?</li> <li>Check last successful update time</li> <li>Review error logs</li> <li>Contact market data support</li> </ol>"},{"location":"business/market-data.html#rate-seems-incorrect","title":"Rate Seems Incorrect","text":"<p>Verify:</p> <ol> <li>Compare with external source (e.g., xe.com)</li> <li>Check if currency pair inverted</li> <li>Review recent news/events</li> <li>Contact market data team</li> </ol>"},{"location":"business/market-data.html#missing-currency-pair","title":"Missing Currency Pair","text":"<p>Solution:</p> <ol> <li>Add to watchlist in data provider</li> <li>Request new feed subscription</li> <li>Enter manual rate temporarily</li> </ol>"},{"location":"business/market-data.html#audit-trail","title":"Audit Trail","text":"<p>All market data access is logged:</p> <p>Logged Actions:</p> <ul> <li>VIEW: Accessed FX dashboard/list</li> <li>SEARCH: Searched for rates</li> <li>EXPORT: Downloaded rate data</li> <li>UPDATE: Manual rate entry</li> <li>REFRESH: Forced data update</li> </ul>"},{"location":"business/market-data.html#best-practices","title":"Best Practices","text":""},{"location":"business/market-data.html#rate-usage","title":"Rate Usage","text":"<ol> <li>Always use latest rates for current valuations</li> <li>Historical rates for backdated calculations</li> <li>Forward rates for future projections</li> <li>Verify rates before critical operations</li> </ol>"},{"location":"business/market-data.html#data-management","title":"Data Management","text":"<ol> <li>Monitor data quality daily</li> <li>Archive old rates (keep 7 years)</li> <li>Document exceptions (manual entries)</li> <li>Regular reconciliation with source</li> </ol>"},{"location":"business/market-data.html#risk-management","title":"Risk Management","text":"<ol> <li>Set rate alerts for key currencies</li> <li>Monitor volatility during market events</li> <li>Have backup data source for critical rates</li> <li>Review rate assumptions monthly</li> </ol>"},{"location":"business/market-data.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Portfolio Management - Multi-currency portfolios</li> <li>Database Schema - FX rate table structure</li> <li>API Reference - Market data services</li> </ul>"},{"location":"business/market-data.html#need-help","title":"Need Help?","text":"<ul> <li>In-App: Click ? icon (top right)</li> <li>Market Data Support: marketdata@yourcompany.com</li> <li>Bloomberg Helpdesk: +65-6212-1000</li> </ul>"},{"location":"business/portfolio-management.html","title":"Portfolio Management Guide","text":""},{"location":"business/portfolio-management.html#overview","title":"Overview","text":"<p>The Portfolio module allows you to create, manage, and track portfolios throughout their lifecycle. All portfolio operations follow the Four-Eyes principle (Maker-Checker workflow) to ensure data integrity and compliance.</p>"},{"location":"business/portfolio-management.html#key-concepts","title":"Key Concepts","text":""},{"location":"business/portfolio-management.html#portfolio-statuses","title":"Portfolio Statuses","text":"Status Description Next Actions Draft Newly created, not yet submitted Edit, Submit for Approval Pending Approval Awaiting checker approval Approve, Reject (by Checker only) Active Approved and active Close Portfolio Inactive Closed portfolio Reactivate Portfolio Rejected Rejected by checker Edit, Resubmit"},{"location":"business/portfolio-management.html#portfolio-lifecycle","title":"Portfolio Lifecycle","text":"<pre><code>stateDiagram-v2\n    [*] --&gt; Draft: Create\n    Draft --&gt; PendingApproval: Submit\n    PendingApproval --&gt; Active: Approve\n    PendingApproval --&gt; Rejected: Reject\n    Rejected --&gt; Draft: Edit\n    Draft --&gt; PendingApproval: Resubmit\n    Active --&gt; Inactive: Close\n    Inactive --&gt; Active: Reactivate\n    Active --&gt; [*]</code></pre>"},{"location":"business/portfolio-management.html#creating-a-portfolio","title":"Creating a Portfolio","text":""},{"location":"business/portfolio-management.html#step-1-navigate-to-portfolio-module","title":"Step 1: Navigate to Portfolio Module","text":"<ol> <li>Click Portfolios in the main navigation menu</li> <li>Click the Create New Portfolio button</li> </ol>"},{"location":"business/portfolio-management.html#step-2-fill-in-basic-information","title":"Step 2: Fill in Basic Information","text":"<p>Required Fields</p> <p>Fields marked with * are mandatory</p> <p>Basic Information Section:</p> Field Required Description Example Portfolio Code \u2705 Yes Unique identifier (max 20 characters) <code>PF001</code>, <code>EQUITY-USD</code> Portfolio Name \u2705 Yes Descriptive name (max 200 characters) <code>US Equity Portfolio</code> Description \u274c No Detailed description <code>Portfolio for US equity holdings</code> <p>Financial Information Section:</p> Field Required Description Example Currency \u2705 Yes Base currency for the portfolio <code>USD</code>, <code>EUR</code>, <code>SGD</code> Portfolio Manager \u2705 Yes Name of the portfolio manager <code>John Smith</code> Client \u274c No Client name <code>ABC Corporation</code> Cash Balance \u274c No Initial cash balance <code>1000000.00</code> <p>Classification &amp; Grouping:</p> Field Description Cost Centre Code For internal cost allocation Corp Code Corporate code Account Group Accounting classification Portfolio Group Portfolio grouping for reporting Report Group Reporting classification Entity Group Entity classification Status Active/Inactive (defaults to Active) Revaluation Status Revaluation classification"},{"location":"business/portfolio-management.html#step-3-submit-the-form","title":"Step 3: Submit the Form","text":"<ol> <li>Review all entered information</li> <li>Click Create Portfolio button</li> <li>Portfolio is saved in Draft status</li> </ol> <p>Portfolio Created</p> <p>You will see a success message: \"Portfolio created successfully in DRAFT status\"</p> <p>The portfolio is now in your drafts and ready to be submitted for approval.</p>"},{"location":"business/portfolio-management.html#editing-a-portfolio","title":"Editing a Portfolio","text":"<p>Edit Restrictions</p> <p>You can only edit portfolios in Draft or Rejected status.</p> <p>Active and Pending Approval portfolios cannot be edited.</p>"},{"location":"business/portfolio-management.html#how-to-edit","title":"How to Edit","text":"<ol> <li>Navigate to Portfolios list</li> <li>Find the portfolio you want to edit</li> <li>Click the pencil icon (Edit button)</li> <li>Make your changes</li> <li>Click Update Portfolio</li> </ol>"},{"location":"business/portfolio-management.html#submitting-for-approval","title":"Submitting for Approval","text":"<p>Once you're satisfied with the portfolio details:</p>"},{"location":"business/portfolio-management.html#step-1-open-portfolio-details","title":"Step 1: Open Portfolio Details","text":"<ol> <li>Go to Portfolios list</li> <li>Click on the portfolio name or eye icon to view details</li> </ol>"},{"location":"business/portfolio-management.html#step-2-submit","title":"Step 2: Submit","text":"<ol> <li>Click Submit for Approval button</li> <li>Confirm the submission in the dialog</li> <li>Portfolio status changes to Pending Approval</li> </ol> <p>Maker Role</p> <p>As the Maker, you can only create and submit portfolios.</p> <p>You cannot approve your own work - a different user (Checker) must review and approve.</p>"},{"location":"business/portfolio-management.html#search-and-filter","title":"Search and Filter","text":"<p>The Portfolio List page provides powerful search and filter capabilities:</p>"},{"location":"business/portfolio-management.html#search-box","title":"Search Box","text":"<p>Search across: - Portfolio Code - Portfolio Name - Manager Name</p> <p>Example: Type <code>USD</code> to find all USD-related portfolios</p>"},{"location":"business/portfolio-management.html#filters","title":"Filters","text":"<p>Status Filter: - Draft - Pending Approval - Active - Inactive - Rejected</p> <p>Currency Filter: - Enter currency code (e.g., <code>USD</code>, <code>EUR</code>)</p> <p>How to Use:</p> <ol> <li>Enter search term or select filters</li> <li>Click Search button</li> <li>Click Clear to reset filters</li> </ol> <p></p>"},{"location":"business/portfolio-management.html#viewing-portfolio-details","title":"Viewing Portfolio Details","text":""},{"location":"business/portfolio-management.html#portfolio-detail-page","title":"Portfolio Detail Page","text":"<p>Click on any portfolio to see:</p> <ul> <li>Basic Information: Code, name, description</li> <li>Financial Details: Currency, manager, client, cash balance</li> <li>Classification: All grouping and classification fields</li> <li>Status Information: Current status with visual badge</li> <li>Workflow History: Who created, submitted, approved/rejected</li> </ul> <p></p>"},{"location":"business/portfolio-management.html#closing-a-portfolio","title":"Closing a Portfolio","text":"<p>Active Portfolios Only</p> <p>You can only close portfolios in Active status.</p>"},{"location":"business/portfolio-management.html#how-to-close","title":"How to Close","text":"<ol> <li>Open the portfolio detail page</li> <li>Click Close Portfolio button</li> <li> <p>In the modal dialog:</p> <ul> <li>Enter reason for closure (optional but recommended)</li> <li>Click Close Portfolio to confirm</li> </ul> </li> <li> <p>Portfolio status changes to Inactive</p> </li> </ol> <p>Audit Trail</p> <p>Providing a reason for closure helps maintain a clear audit trail.</p>"},{"location":"business/portfolio-management.html#what-happens-when-closed","title":"What Happens When Closed?","text":"<ul> <li>Status changes to Inactive</li> <li>Portfolio appears grayed out in the list</li> <li>Cannot perform transactions on closed portfolios</li> <li>Can be reactivated if needed</li> </ul>"},{"location":"business/portfolio-management.html#reactivating-a-portfolio","title":"Reactivating a Portfolio","text":"<p>Closed portfolios can be reactivated:</p>"},{"location":"business/portfolio-management.html#how-to-reactivate","title":"How to Reactivate","text":"<ol> <li>Open the inactive portfolio detail page</li> <li>Click Reactivate Portfolio button</li> <li> <p>In the modal dialog:</p> <ul> <li>Enter justification for reactivation (required)</li> <li>Click Reactivate Portfolio to confirm</li> </ul> </li> <li> <p>Portfolio status changes back to Active</p> </li> </ol> <p>Justification Required</p> <p>Unlike closing, reactivation requires a justification comment for audit purposes.</p>"},{"location":"business/portfolio-management.html#exporting-portfolio-data","title":"Exporting Portfolio Data","text":""},{"location":"business/portfolio-management.html#csv-export","title":"CSV Export","text":"<ol> <li>Navigate to Portfolios list</li> <li>Apply any filters if needed</li> <li>Click Download CSV button</li> <li>CSV file downloads with current filtered results</li> </ol> <p>CSV includes: - All visible portfolio columns - Filtered and sorted as displayed - Useful for reporting and analysis</p>"},{"location":"business/portfolio-management.html#common-scenarios","title":"Common Scenarios","text":""},{"location":"business/portfolio-management.html#scenario-1-creating-your-first-portfolio","title":"Scenario 1: Creating Your First Portfolio","text":"<pre><code>sequenceDiagram\n    actor Maker\n    actor Checker\n    participant System\n\n    Maker-&gt;&gt;System: Create Portfolio (Draft)\n    Maker-&gt;&gt;System: Fill in details\n    Maker-&gt;&gt;System: Save (Draft status)\n    Maker-&gt;&gt;System: Submit for Approval\n    System-&gt;&gt;System: Status: Pending Approval\n    Checker-&gt;&gt;System: Review Portfolio\n    Checker-&gt;&gt;System: Approve\n    System-&gt;&gt;System: Status: Active</code></pre>"},{"location":"business/portfolio-management.html#scenario-2-handling-rejected-portfolio","title":"Scenario 2: Handling Rejected Portfolio","text":"<ol> <li>Checker rejects your portfolio with comments</li> <li>You receive notification (status: Rejected)</li> <li>You edit the portfolio to address issues</li> <li>You resubmit for approval</li> <li>Checker approves</li> <li>Portfolio becomes Active</li> </ol>"},{"location":"business/portfolio-management.html#scenario-3-temporary-portfolio-closure","title":"Scenario 3: Temporary Portfolio Closure","text":"<ol> <li>You need to temporarily close a portfolio</li> <li>Click Close Portfolio, provide reason: \"Month-end reconciliation\"</li> <li>Perform reconciliation</li> <li>Reactivate portfolio with justification: \"Reconciliation complete\"</li> </ol>"},{"location":"business/portfolio-management.html#best-practices","title":"Best Practices","text":"<p>Tips for Success</p> <p>\u2705 Use clear portfolio codes - Make them meaningful and consistent</p> <p>\u2705 Provide detailed descriptions - Help others understand the portfolio purpose</p> <p>\u2705 Double-check before submitting - Review all fields carefully</p> <p>\u2705 Provide closure reasons - Always document why you're closing a portfolio</p> <p>\u2705 Use filters effectively - Save time by filtering before searching</p> <p>Common Mistakes to Avoid</p> <p>\u274c Duplicate portfolio codes - Each must be unique</p> <p>\u274c Missing required fields - You can't save without them</p> <p>\u274c Trying to edit active portfolios - Only Draft/Rejected can be edited</p> <p>\u274c Closing without reason - Always document the business reason</p>"},{"location":"business/portfolio-management.html#troubleshooting","title":"Troubleshooting","text":""},{"location":"business/portfolio-management.html#problem-cannot-edit-portfolio","title":"Problem: Cannot Edit Portfolio","text":"<p>Solution: Check the portfolio status. Only Draft or Rejected portfolios can be edited.</p> <p>If the portfolio is Active, you cannot edit it. You may need to: - Create a new portfolio with the changes, or - Contact your administrator for special handling</p>"},{"location":"business/portfolio-management.html#problem-submit-button-not-visible","title":"Problem: Submit Button Not Visible","text":"<p>Solution: Ensure the portfolio is in Draft status. Portfolios in other statuses cannot be submitted.</p>"},{"location":"business/portfolio-management.html#problem-portfolio-not-appearing-in-list","title":"Problem: Portfolio Not Appearing in List","text":"<p>Solution: 1. Check your filter settings 2. Click Clear to reset all filters 3. Try searching by code or name</p>"},{"location":"business/portfolio-management.html#problem-cannot-find-portfolio-after-creation","title":"Problem: Cannot Find Portfolio After Creation","text":"<p>Solution: The portfolio is in Draft status. Use the status filter to show only Draft portfolios.</p>"},{"location":"business/portfolio-management.html#faqs","title":"FAQs","text":"Can I delete a portfolio? <p>No, portfolios cannot be deleted (hard delete). Instead, use Close Portfolio to mark it as inactive (soft delete). This maintains audit history.</p> Can I edit an active portfolio? <p>No, once approved and active, portfolios cannot be edited through the standard workflow. This ensures data integrity and maintains audit trails.</p> Who can approve my portfolio? <p>Only users in the Checkers group can approve portfolios. Additionally, the checker must be a different person from the maker (Four-Eyes principle).</p> Can I approve my own portfolio? <p>No, the Four-Eyes principle prevents users from approving their own work. A different user (Checker) must approve.</p> What happens if my portfolio is rejected? <p>The portfolio returns to Rejected status. You can edit it to address the checker's comments and resubmit for approval.</p> Can I cancel a pending approval? <p>Currently, the system does not support canceling pending approvals. Contact your administrator if you need to withdraw a submission.</p> How do I know who approved my portfolio? <p>View the portfolio detail page. The workflow section shows who created, submitted, and approved/rejected the portfolio with timestamps.</p>"},{"location":"business/portfolio-management.html#related-topics","title":"Related Topics","text":"<ul> <li>Four-Eyes Workflow - Understand the maker-checker process</li> <li>UDF Management - Manage custom fields</li> <li>FAQ - More frequently asked questions</li> </ul>"},{"location":"business/portfolio-management.html#need-help","title":"Need Help?","text":"<p>Still Need Assistance?</p> <ul> <li>In-App Help: Click the Help (?) button</li> <li>Email Support: cistrade-support@yourcompany.com</li> <li>Technical Docs: See Architecture for developers</li> </ul> <p>Last Updated: 2025-12-27</p>"},{"location":"business/quick-reference.html","title":"CisTrade Quick Reference Card","text":""},{"location":"business/quick-reference.html#portfolio-workflow","title":"Portfolio Workflow","text":"<pre><code>Create \u2192 Draft \u2192 Submit \u2192 Pending \u2192 Approve \u2192 Active \u2192 Close \u2192 Inactive\n                              \u2193\n                          Reject \u2192 Edit \u2192 Resubmit\n</code></pre>"},{"location":"business/quick-reference.html#key-actions-by-status","title":"Key Actions by Status","text":"Status Available Actions Draft Edit, Submit for Approval Pending Approval Approve, Reject (Checker only) Active Close Portfolio Inactive Reactivate Portfolio Rejected Edit, Resubmit"},{"location":"business/quick-reference.html#user-roles","title":"User Roles","text":"<p>Maker: Creates &amp; submits portfolios Checker: Approves/rejects (different user - Four-Eyes)</p>"},{"location":"business/quick-reference.html#quick-tips","title":"Quick Tips","text":"<p>\u2705 Required fields: Code, Name, Currency, Manager \u2705 Use search to find portfolios quickly \u2705 Provide reasons when closing/rejecting \u2705 Cannot edit Active portfolios \u2705 Cannot approve your own work</p>"},{"location":"business/quick-reference.html#search-shortcuts","title":"Search Shortcuts","text":"<ul> <li>Search by: Code, Name, Manager</li> <li>Filter by: Status, Currency</li> <li>Export: Download CSV button</li> </ul>"},{"location":"business/quick-reference.html#common-tasks","title":"Common Tasks","text":"<p>Create Portfolio: Portfolios \u2192 Create New Submit for Approval: Detail page \u2192 Submit button Approve: Pending Approvals \u2192 Approve Close: Active portfolio \u2192 Close button</p>"},{"location":"business/quick-reference.html#need-help","title":"Need Help?","text":"<ul> <li>In-App: Click ? icon (top right)</li> <li>Docs: System \u2192 Documentation</li> <li>Support: cistrade-support@yourcompany.com</li> </ul> <p>Print this page for quick reference</p>"},{"location":"business/reports.html","title":"Reports Guide","text":"<p>Generate comprehensive reports for portfolios, trades, compliance, and analytics.</p>"},{"location":"business/reports.html#available-reports","title":"Available Reports","text":""},{"location":"business/reports.html#portfolio-reports","title":"Portfolio Reports","text":""},{"location":"business/reports.html#1-portfolio-summary-report","title":"1. Portfolio Summary Report","text":"<p>Purpose: Overview of all portfolios Includes: Name, manager, currency, NAV, status Format: PDF, Excel, CSV Frequency: Daily, Weekly, Monthly</p>"},{"location":"business/reports.html#2-portfolio-valuation-report","title":"2. Portfolio Valuation Report","text":"<p>Purpose: Detailed portfolio valuations Includes: Holdings, prices, FX rates, NAV calculation Format: PDF, Excel Frequency: Daily, Monthly, Quarterly</p>"},{"location":"business/reports.html#3-portfolio-performance-report","title":"3. Portfolio Performance Report","text":"<p>Purpose: Performance metrics and returns Includes: Returns, benchmarks, attribution Format: PDF, Excel Frequency: Monthly, Quarterly, Annual</p>"},{"location":"business/reports.html#compliance-reports","title":"Compliance Reports","text":""},{"location":"business/reports.html#4-four-eyes-audit-report","title":"4. Four-Eyes Audit Report","text":"<p>Purpose: Track maker-checker workflow Includes: Pending approvals, rejection reasons, audit trail Format: Excel, CSV Frequency: Weekly, Monthly</p>"},{"location":"business/reports.html#5-change-log-report","title":"5. Change Log Report","text":"<p>Purpose: All changes to portfolios Includes: What changed, who changed, when, why Format: Excel, CSV Frequency: Daily, Weekly</p>"},{"location":"business/reports.html#operational-reports","title":"Operational Reports","text":""},{"location":"business/reports.html#6-user-activity-report","title":"6. User Activity Report","text":"<p>Purpose: Track user actions Includes: Logins, views, updates, exports Format: Excel, CSV Frequency: Weekly, Monthly</p>"},{"location":"business/reports.html#7-data-quality-report","title":"7. Data Quality Report","text":"<p>Purpose: Identify data issues Includes: Missing data, inconsistencies, validation errors Format: Excel, PDF Frequency: Weekly</p>"},{"location":"business/reports.html#generating-reports","title":"Generating Reports","text":""},{"location":"business/reports.html#quick-reports","title":"Quick Reports","text":"<ol> <li>Navigate to desired section</li> <li>Click \"Export\" or \"Download CSV\"</li> <li>Report generated instantly</li> </ol>"},{"location":"business/reports.html#scheduled-reports","title":"Scheduled Reports","text":"<ol> <li>Go to Reports \u2192 Schedule</li> <li>Select report type</li> <li>Configure parameters</li> <li>Set frequency and recipients</li> <li>Save schedule</li> </ol>"},{"location":"business/reports.html#custom-reports","title":"Custom Reports","text":"<ol> <li>Reports \u2192 Create Custom Report</li> <li>Select data sources</li> <li>Choose fields</li> <li>Apply filters</li> <li>Save template</li> </ol>"},{"location":"business/reports.html#report-parameters","title":"Report Parameters","text":""},{"location":"business/reports.html#common-filters","title":"Common Filters","text":"<ul> <li>Date Range: From/To dates</li> <li>Portfolio: Specific or all</li> <li>Currency: SGD, USD, EUR, etc.</li> <li>Status: Active, Inactive, All</li> <li>Manager: Filter by manager name</li> </ul>"},{"location":"business/reports.html#output-options","title":"Output Options","text":"<ul> <li>Format: PDF, Excel, CSV</li> <li>Orientation: Portrait, Landscape</li> <li>Include Charts: Yes/No</li> <li>Email: Send to recipients</li> </ul>"},{"location":"business/reports.html#report-examples","title":"Report Examples","text":""},{"location":"business/reports.html#portfolio-summary","title":"Portfolio Summary","text":"<pre><code>Portfolio Summary Report\nAs of: 2025-12-27\n\nPortfolio          Manager      Currency  NAV (Local)    Status\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nTECH_FUND          J. Smith     USD       15,234,567     Active\nBALANCED_FUND      M. Lee       SGD       8,123,456      Active\nGROWTH_ASIA        K. Tan       HKD       45,678,901     Active\n\nTotal Portfolios: 238 Active, 293 Inactive\n</code></pre>"},{"location":"business/reports.html#audit-trail","title":"Audit Trail","text":"<pre><code>Change Log - Last 7 Days\n\nDate/Time           User     Action    Portfolio         Details\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n2025-12-27 14:30    JSmith   APPROVE   TECH_FUND         Approved NAV calculation\n2025-12-27 10:15    MLee     UPDATE    BALANCED_FUND     Changed manager\n2025-12-26 16:45    KTan     CREATE    NEW_FUND          New portfolio created\n</code></pre>"},{"location":"business/reports.html#scheduled-report-management","title":"Scheduled Report Management","text":""},{"location":"business/reports.html#view-schedules","title":"View Schedules","text":"<p>Reports \u2192 Scheduled Reports</p> <p>Shows: - Report name - Frequency (Daily, Weekly, Monthly) - Next run date/time - Recipients - Last run status</p>"},{"location":"business/reports.html#modify-schedule","title":"Modify Schedule","text":"<ol> <li>Find report in list</li> <li>Click \"Edit\"</li> <li>Update parameters</li> <li>Save changes</li> </ol>"},{"location":"business/reports.html#disable-schedule","title":"Disable Schedule","text":"<ol> <li>Find report</li> <li>Toggle \"Active\" switch to OFF</li> <li>Confirm</li> </ol>"},{"location":"business/reports.html#export-formats","title":"Export Formats","text":""},{"location":"business/reports.html#pdf","title":"PDF","text":"<ul> <li>Professional layout</li> <li>Charts and graphs</li> <li>Page numbers</li> <li>Headers/footers</li> <li>Best for: Formal reports, printing</li> </ul>"},{"location":"business/reports.html#excel","title":"Excel","text":"<ul> <li>Multiple worksheets</li> <li>Formulas intact</li> <li>Pivot tables</li> <li>Formatting preserved</li> <li>Best for: Analysis, manipulation</li> </ul>"},{"location":"business/reports.html#csv","title":"CSV","text":"<ul> <li>Plain text, comma-separated</li> <li>Universal compatibility</li> <li>No formatting</li> <li>Best for: Data import, scripts</li> </ul>"},{"location":"business/reports.html#performance-tips","title":"Performance Tips","text":""},{"location":"business/reports.html#large-reports","title":"Large Reports","text":"<p>For reports with &gt; 10,000 rows:</p> <ol> <li>Use CSV format (faster)</li> <li>Split by date range</li> <li>Filter to specific portfolios</li> <li>Run during off-peak hours</li> </ol>"},{"location":"business/reports.html#scheduled-vs-on-demand","title":"Scheduled vs On-Demand","text":"<ul> <li>Scheduled: Pre-generated, instant access</li> <li>On-Demand: Fresh data, may take time</li> </ul>"},{"location":"business/reports.html#audit-logging","title":"Audit Logging","text":"<p>All report generation logged:</p> <ul> <li>Who requested</li> <li>When generated</li> <li>Parameters used</li> <li>Format selected</li> <li>Number of records</li> </ul>"},{"location":"business/reports.html#troubleshooting","title":"Troubleshooting","text":""},{"location":"business/reports.html#report-timing-out","title":"Report Timing Out","text":"<p>Solutions: - Reduce date range - Filter to fewer portfolios - Use CSV instead of PDF/Excel - Contact support for large datasets</p>"},{"location":"business/reports.html#missing-data-in-report","title":"Missing Data in Report","text":"<p>Check: - Date range includes data - Filters not too restrictive - User has permission to view data - Data exists in system</p>"},{"location":"business/reports.html#formatting-issues","title":"Formatting Issues","text":"<p>Try: - Different format (PDF vs Excel) - Update browser - Clear cache - Re-generate report</p>"},{"location":"business/reports.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Portfolio Management</li> <li>Four-Eyes Workflow</li> <li>Audit Logs</li> </ul>"},{"location":"business/udf-management.html","title":"UDF Management Guide","text":"<p>User Defined Fields (UDFs) allow you to extend portfolio and trade data with custom attributes specific to your business needs.</p>"},{"location":"business/udf-management.html#overview","title":"Overview","text":"<p>UDFs provide flexibility to:</p> <ul> <li>Add custom fields without changing database schema</li> <li>Store business-specific attributes</li> <li>Track dynamic values over time</li> <li>Support different data types (text, number, date, boolean)</li> </ul>"},{"location":"business/udf-management.html#udf-structure","title":"UDF Structure","text":""},{"location":"business/udf-management.html#udf-master","title":"UDF Master","text":"<p>Defines the field metadata:</p> <ul> <li>UDF Code: Unique identifier (e.g., <code>RISK_RATING</code>)</li> <li>UDF Name: Display name (e.g., \"Risk Rating\")</li> <li>Data Type: TEXT, NUMBER, DATE, BOOLEAN</li> <li>Description: Purpose of the field</li> <li>Entity Type: PORTFOLIO or TRADE</li> <li>Is Active: Whether UDF is currently in use</li> </ul>"},{"location":"business/udf-management.html#udf-values","title":"UDF Values","text":"<p>Stores actual values with history:</p> <ul> <li>Entity Code: Portfolio/Trade identifier</li> <li>UDF Code: Links to UDF Master</li> <li>Value: Actual value based on data type</li> <li>Effective Date: When value became active</li> <li>End Date: When value expired (NULL for current)</li> <li>Created By: User who set the value</li> </ul>"},{"location":"business/udf-management.html#common-use-cases","title":"Common Use Cases","text":""},{"location":"business/udf-management.html#1-risk-rating","title":"1. Risk Rating","text":"<p>Track portfolio risk levels:</p> <pre><code>UDF Code: RISK_RATING\nData Type: TEXT\nValues: LOW, MEDIUM, HIGH\nEntity Type: PORTFOLIO\n</code></pre>"},{"location":"business/udf-management.html#2-investment-strategy","title":"2. Investment Strategy","text":"<p>Categorize investment approach:</p> <pre><code>UDF Code: STRATEGY\nData Type: TEXT\nValues: GROWTH, VALUE, BALANCED, INCOME\nEntity Type: PORTFOLIO\n</code></pre>"},{"location":"business/udf-management.html#3-compliance-flag","title":"3. Compliance Flag","text":"<p>Mark portfolios requiring special attention:</p> <pre><code>UDF Code: REQUIRES_APPROVAL\nData Type: BOOLEAN\nValues: true/false\nEntity Type: PORTFOLIO\n</code></pre>"},{"location":"business/udf-management.html#4-review-date","title":"4. Review Date","text":"<p>Track when portfolio needs review:</p> <pre><code>UDF Code: NEXT_REVIEW_DATE\nData Type: DATE\nValues: YYYY-MM-DD\nEntity Type: PORTFOLIO\n</code></pre>"},{"location":"business/udf-management.html#working-with-udfs","title":"Working with UDFs","text":""},{"location":"business/udf-management.html#view-udf-list","title":"View UDF List","text":"<p>Navigation: UDF Management \u2192 User Defined Fields</p> <p>Features:</p> <ul> <li>Search by code or name</li> <li>Filter by entity type (Portfolio/Trade)</li> <li>Filter by active status</li> <li>View value count for each UDF</li> </ul>"},{"location":"business/udf-management.html#view-udf-details","title":"View UDF Details","text":"<p>Click on any UDF to see:</p> <ul> <li>Full definition and metadata</li> <li>Current values across all entities</li> <li>Value history timeline</li> <li>Usage statistics</li> </ul>"},{"location":"business/udf-management.html#view-value-history","title":"View Value History","text":"<p>Navigation: UDF Detail \u2192 Value History</p> <p>Shows chronological changes:</p> <pre><code>2025-01-15: RISK_RATING changed from MEDIUM to HIGH (User: jsmith)\n2024-12-01: RISK_RATING set to MEDIUM (User: alee)\n2024-11-15: RISK_RATING created with value LOW (User: ptan)\n</code></pre>"},{"location":"business/udf-management.html#search-udf-values","title":"Search UDF Values","text":"<p>Quick Search: Enter entity code or value</p> <p>Advanced Filters:</p> <ul> <li>Entity Type (Portfolio/Trade)</li> <li>Date Range (effective dates)</li> <li>Specific UDF Code</li> <li>Value pattern matching</li> </ul>"},{"location":"business/udf-management.html#export-udf-data","title":"Export UDF Data","text":"<p>CSV Export: Download all UDF values</p> <p>Format: <pre><code>Entity Code,UDF Code,UDF Name,Value,Effective Date,End Date,Created By\nPORT001,RISK_RATING,Risk Rating,HIGH,2025-01-15,,jsmith\nPORT002,STRATEGY,Strategy,GROWTH,2025-01-10,,alee\n</code></pre></p>"},{"location":"business/udf-management.html#udf-data-types","title":"UDF Data Types","text":""},{"location":"business/udf-management.html#text","title":"TEXT","text":"<ul> <li>Free-form text or predefined values</li> <li>Examples: Categories, descriptions, codes</li> <li>Max length: 500 characters</li> </ul>"},{"location":"business/udf-management.html#number","title":"NUMBER","text":"<ul> <li>Numeric values (integer or decimal)</li> <li>Examples: Scores, percentages, amounts</li> <li>Precision: Up to 18 digits</li> </ul>"},{"location":"business/udf-management.html#date","title":"DATE","text":"<ul> <li>Date values (no time component)</li> <li>Format: YYYY-MM-DD</li> <li>Examples: Review dates, deadlines</li> </ul>"},{"location":"business/udf-management.html#boolean","title":"BOOLEAN","text":"<ul> <li>True/False flags</li> <li>Stored as: true/false</li> <li>Examples: Compliance flags, approvals</li> </ul>"},{"location":"business/udf-management.html#audit-trail","title":"Audit Trail","text":"<p>All UDF changes are tracked:</p> <p>Logged Actions:</p> <ul> <li>VIEW: User accessed UDF list</li> <li>SEARCH: User searched UDFs</li> <li>EXPORT: User exported UDF data</li> <li>UPDATE: UDF value modified (tracked in value history)</li> </ul> <p>Audit Information:</p> <ul> <li>Timestamp</li> <li>User who performed action</li> <li>What changed (old vs new values)</li> <li>IP address and user agent</li> </ul>"},{"location":"business/udf-management.html#best-practices","title":"Best Practices","text":""},{"location":"business/udf-management.html#naming-conventions","title":"Naming Conventions","text":"<p>\u2705 Good: <pre><code>RISK_RATING\nINVESTMENT_STRATEGY\nCOMPLIANCE_FLAG\nREVIEW_DATE\n</code></pre></p> <p>\u274c Avoid: <pre><code>rr (too cryptic)\nTHE_RISK_RATING_FOR_PORTFOLIO (too long)\nRisk Rating! (special characters)\n</code></pre></p>"},{"location":"business/udf-management.html#data-type-selection","title":"Data Type Selection","text":"<ul> <li>Use TEXT for: Categories, codes, descriptions</li> <li>Use NUMBER for: Scores, ratings, amounts</li> <li>Use DATE for: Deadlines, review dates</li> <li>Use BOOLEAN for: Yes/No flags</li> </ul>"},{"location":"business/udf-management.html#value-management","title":"Value Management","text":"<ol> <li>Set Effective Dates: Always specify when value becomes active</li> <li>End Previous Values: Close out old values when setting new ones</li> <li>Document Changes: Add comments explaining why value changed</li> <li>Regular Reviews: Periodically audit UDF values for accuracy</li> </ol>"},{"location":"business/udf-management.html#performance-tips","title":"Performance Tips","text":"<ul> <li>Index frequently searched UDFs</li> <li>Archive historical values older than retention period</li> <li>Limit number of active UDFs (recommend &lt; 50 per entity type)</li> <li>Use consistent value formats (e.g., always UPPERCASE for categories)</li> </ul>"},{"location":"business/udf-management.html#integration-with-portfolios","title":"Integration with Portfolios","text":"<p>UDFs enhance portfolio records:</p> <pre><code>Portfolio: TECH_GROWTH_FUND\n  - Name: Technology Growth Fund\n  - Currency: USD\n  - Manager: Jane Smith\n\nUDFs:\n  - RISK_RATING: HIGH\n  - STRATEGY: GROWTH\n  - SECTOR_FOCUS: TECHNOLOGY\n  - REVIEW_DATE: 2025-06-30\n  - COMPLIANCE_FLAG: false\n</code></pre>"},{"location":"business/udf-management.html#troubleshooting","title":"Troubleshooting","text":""},{"location":"business/udf-management.html#udf-not-visible","title":"UDF Not Visible","text":"<p>Check:</p> <ol> <li>Is UDF marked as Active?</li> <li>Does user have permission to view UDFs?</li> <li>Is entity type correct (Portfolio vs Trade)?</li> </ol>"},{"location":"business/udf-management.html#value-not-updating","title":"Value Not Updating","text":"<p>Possible Causes:</p> <ol> <li>Effective date in future</li> <li>Previous value not end-dated</li> <li>Validation error (wrong data type)</li> <li>Permission denied</li> </ol>"},{"location":"business/udf-management.html#search-not-finding-values","title":"Search Not Finding Values","text":"<p>Try:</p> <ol> <li>Check date range filters</li> <li>Verify exact entity code</li> <li>Use wildcards for partial matches</li> <li>Clear all filters and retry</li> </ol>"},{"location":"business/udf-management.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Portfolio Management - How UDFs enhance portfolios</li> <li>API Reference - UDF service methods</li> <li>Database Schema - UDF table structure</li> </ul>"},{"location":"business/udf-management.html#need-help","title":"Need Help?","text":"<ul> <li>In-App: Click ? icon (top right)</li> <li>Support: cistrade-support@yourcompany.com</li> </ul>"},{"location":"integration/index.html","title":"Business Analyst Documentation","text":"<p>Documentation for Business Analysts covering processes, data flows, and business rules.</p>"},{"location":"integration/index.html#documentation-sections","title":"Documentation Sections","text":"<ul> <li>Business Processes - End-to-end process documentation (coming soon)</li> <li>Data Flow - How data moves through the system (coming soon)</li> <li>Business Rules - Business logic and validation rules (coming soon)</li> <li>Integration Points - External system integrations (coming soon)</li> <li>Workflow Diagrams - Visual process flows (coming soon)</li> </ul>"},{"location":"integration/index.html#quick-start-for-bas","title":"Quick Start for BAs","text":"<ol> <li>Review Business Processes for process flows</li> <li>Check Data Flow for data movement</li> <li>See Business Rules for validation logic</li> </ol> <p>Contact: ba-team@yourcompany.com</p>"},{"location":"integration/business-processes.html","title":"Business Processes","text":"<p>End-to-end business workflows in CisTrade.</p>"},{"location":"integration/business-processes.html#portfolio-lifecycle-management","title":"Portfolio Lifecycle Management","text":""},{"location":"integration/business-processes.html#complete-workflow","title":"Complete Workflow","text":"<pre><code>graph TD\n    A[Create Draft] --&gt; B{Submit for Approval}\n    B --&gt; C[Pending Approval]\n    C --&gt; D{Checker Decision}\n    D --&gt;|Approve| E[Active]\n    D --&gt;|Reject| F[Rejected]\n    F --&gt; G[Edit &amp; Resubmit]\n    G --&gt; C\n    E --&gt; H{Operational Changes}\n    H --&gt; I[Close Portfolio]\n    I --&gt; J[Inactive]\n    J --&gt; K[Reactivate]\n    K --&gt; E</code></pre>"},{"location":"integration/business-processes.html#detailed-steps","title":"Detailed Steps","text":"<p>1. Portfolio Creation - Maker creates draft portfolio - Enters required fields (Code, Name, Currency, Manager) - Saves as Draft - Audit log: CREATE action</p> <p>2. Submission for Approval - Maker reviews draft - Submits for approval - Status: Draft \u2192 Pending Approval - Audit log: SUBMIT action - Notification sent to Checkers</p> <p>3. Checker Review - Checker views pending approval queue - Reviews portfolio details - Decision: Approve or Reject</p> <p>4. Approval Path - Checker approves with comments - Status: Pending \u2192 Active - Audit log: APPROVE action - Notification sent to Maker - Portfolio now operational</p> <p>5. Rejection Path - Checker rejects with reason - Status: Pending \u2192 Rejected - Audit log: REJECT action - Maker notified - Maker can edit and resubmit</p> <p>6. Portfolio Closure - User closes active portfolio - Status: Active \u2192 Closed - Audit log: CLOSE action - Optional reason provided</p> <p>7. Portfolio Reactivation - Checker reactivates closed portfolio - Status: Closed \u2192 Active - Audit log: REACTIVATE action - Mandatory comments required</p>"},{"location":"integration/business-processes.html#udf-management-process","title":"UDF Management Process","text":""},{"location":"integration/business-processes.html#udf-value-update-workflow","title":"UDF Value Update Workflow","text":"<p>1. Identify Need - Business identifies need for custom field - Examples: Risk rating, compliance flag</p> <p>2. UDF Definition - Admin defines UDF master - Sets data type, entity type - Activates UDF</p> <p>3. Value Assignment - User assigns value to portfolio/trade - Sets effective date - Previous value auto-expired</p> <p>4. History Tracking - All changes recorded - Timeline view available - Audit trail maintained</p>"},{"location":"integration/business-processes.html#market-data-integration","title":"Market Data Integration","text":""},{"location":"integration/business-processes.html#fx-rate-update-process","title":"FX Rate Update Process","text":"<p>1. Automated Feed - Bloomberg/Reuters feeds update every 15-30 mins - Rates fetched via API - Validation checks applied</p> <p>2. Data Validation - Rate within expected range - No sudden jumps (&gt;5%) - Source reliability check - Timestamp recency</p> <p>3. Quality Checks - Automated alerts for anomalies - Manual review for flagged rates - Correction process for errors</p> <p>4. Portfolio Impact - Affected portfolios identified - NAV recalculation triggered - Valuation reports updated</p>"},{"location":"integration/business-processes.html#compliance-audit","title":"Compliance &amp; Audit","text":""},{"location":"integration/business-processes.html#four-eyes-enforcement","title":"Four-Eyes Enforcement","text":"<p>Rule: All critical operations require two people</p> <p>Implementation: 1. Maker creates/updates 2. System prevents self-approval 3. Checker from different user group approves 4. System validates segregation</p> <p>Audit Trail: - Who: User ID, name, email - What: Action type, entity affected - When: Timestamp - Where: IP address, user agent - Why: Comments/reason</p>"},{"location":"integration/business-processes.html#reporting","title":"Reporting","text":"<p>Daily Reports: - Portfolio summary - Pending approvals - Recent changes</p> <p>Monthly Reports: - Performance metrics - Compliance audit - User activity</p> <p>Quarterly Reports: - Portfolio valuation - Risk analysis - Trend reports</p>"},{"location":"integration/business-processes.html#integration-points","title":"Integration Points","text":""},{"location":"integration/business-processes.html#gmp-system-integration","title":"GMP System Integration","text":"<p>Daily ETL Process: 1. GMP exports reference data (currencies, countries, calendars, counterparties) 2. Files placed in shared location 3. Hive external tables point to files 4. CisTrade reads via Impala 5. No data duplication</p> <p>Data Flow: <pre><code>GMP System \u2192 CSV Files \u2192 Hive External Tables \u2192 Impala Queries \u2192 CisTrade\n</code></pre></p>"},{"location":"integration/business-processes.html#acl-integration","title":"ACL Integration","text":"<p>Authentication Flow: 1. User enters login ID 2. CisTrade queries ACL tables in Hive 3. User record retrieved 4. Group memberships loaded 5. Permissions resolved 6. Session created</p> <p>Permission Hierarchy: <pre><code>User \u2192 Group \u2192 Permissions \u2192 Access Level (READ/WRITE/READ_WRITE)\n</code></pre></p>"},{"location":"integration/business-processes.html#error-handling","title":"Error Handling","text":""},{"location":"integration/business-processes.html#standard-error-process","title":"Standard Error Process","text":"<p>1. Error Occurs - System detects error - Error logged with full context - User shown friendly message</p> <p>2. User Notification - Error message displayed - Suggested actions provided - Support contact information</p> <p>3. Support Resolution - Support team reviews logs - Identifies root cause - Implements fix - User notified</p>"},{"location":"integration/business-processes.html#change-management","title":"Change Management","text":""},{"location":"integration/business-processes.html#production-changes","title":"Production Changes","text":"<p>1. Change Request - Business justification - Impact assessment - Approval required</p> <p>2. Testing - UAT in test environment - Regression testing - Performance testing</p> <p>3. Deployment - Scheduled maintenance window - Backup taken - Changes deployed - Smoke testing</p> <p>4. Verification - Functionality confirmed - Performance monitored - Users notified</p>"},{"location":"integration/business-processes.html#business-continuity","title":"Business Continuity","text":""},{"location":"integration/business-processes.html#disaster-recovery","title":"Disaster Recovery","text":"<p>RTO: 4 hours (Recovery Time Objective) RPO: 1 hour (Recovery Point Objective)</p> <p>Process: 1. Incident declared 2. DR site activated 3. Data restored from backup 4. Services brought online 5. Users notified 6. Normal operations resumed</p>"},{"location":"integration/business-processes.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Four-Eyes Workflow</li> <li>Data Flow</li> <li>Business Rules</li> <li>Workflow Diagrams</li> </ul>"},{"location":"integration/business-rules.html","title":"Business Rules","text":"<p>Core business rules and validation logic in CisTrade.</p>"},{"location":"integration/business-rules.html#portfolio-management-rules","title":"Portfolio Management Rules","text":""},{"location":"integration/business-rules.html#creation-rules","title":"Creation Rules","text":"<p>PR-001: Unique Portfolio Code - Rule: Portfolio code must be unique across all portfolios - Validation: Check against existing codes before creation - Error: \"Portfolio code already exists\"</p> <p>PR-002: Required Fields - Rule: Code, Name, Currency, Manager are mandatory - Validation: Frontend and backend validation - Error: \"Required field missing: {field}\"</p> <p>PR-003: Valid Currency - Rule: Currency must exist in reference data - Validation: Lookup in gmp_cis_sta_dly_currency - Error: \"Invalid currency: {currency}\"</p> <p>PR-004: Initial Status - Rule: New portfolios start in DRAFT status - Automatic: System sets status on creation - Non-negotiable: Users cannot override</p>"},{"location":"integration/business-rules.html#workflow-rules","title":"Workflow Rules","text":"<p>PR-101: Four-Eyes Principle - Rule: Maker cannot approve own work - Validation: Compare creator_id with approver_id - Error: \"Cannot approve your own submission\"</p> <p>PR-102: Status Transitions - Rule: Only valid state transitions allowed   - DRAFT \u2192 PENDING_APPROVAL   - PENDING_APPROVAL \u2192 ACTIVE (approve)   - PENDING_APPROVAL \u2192 REJECTED (reject)   - REJECTED \u2192 DRAFT (edit)   - ACTIVE \u2192 CLOSED   - CLOSED \u2192 ACTIVE (reactivate) - Validation: Check current status before transition - Error: \"Invalid status transition from {from} to {to}\"</p> <p>PR-103: Edit Restrictions - Rule: Only DRAFT and REJECTED portfolios can be edited - Validation: Check status before allowing updates - Error: \"Cannot edit portfolio in {status} status\"</p> <p>PR-104: Approval Comments - Rule: Approval/Rejection requires comments - Validation: Comments cannot be empty - Error: \"Comments required for approval decision\"</p> <p>PR-105: Reactivation Authorization - Rule: Only Checkers can reactivate closed portfolios - Validation: Check user group membership - Error: \"Insufficient permissions to reactivate\"</p>"},{"location":"integration/business-rules.html#udf-rules","title":"UDF Rules","text":""},{"location":"integration/business-rules.html#definition-rules","title":"Definition Rules","text":"<p>UD-001: Unique UDF Code - Rule: UDF code must be unique within entity type - Validation: Check existing UDFs before creation - Error: \"UDF code already exists for this entity type\"</p> <p>UD-002: Valid Data Type - Rule: Data type must be TEXT, NUMBER, DATE, or BOOLEAN - Validation: Enum check - Error: \"Invalid data type: {type}\"</p>"},{"location":"integration/business-rules.html#value-rules","title":"Value Rules","text":"<p>UD-101: Data Type Validation - Rule: Value must match UDF data type   - NUMBER: Numeric only   - DATE: Valid date format (YYYY-MM-DD)   - BOOLEAN: true/false only   - TEXT: Any string (max 500 chars) - Validation: Type-specific validators - Error: \"Value does not match data type {type}\"</p> <p>UD-102: Effective Date Logic - Rule: New value effective date cannot overlap existing - Validation: Check date ranges before insert - Error: \"Effective date overlaps with existing value\"</p> <p>UD-103: Historical Integrity - Rule: Cannot modify historical values (end_date &lt; today) - Validation: Check end_date before update - Error: \"Cannot modify historical UDF value\"</p>"},{"location":"integration/business-rules.html#market-data-rules","title":"Market Data Rules","text":""},{"location":"integration/business-rules.html#fx-rate-rules","title":"FX Rate Rules","text":"<p>MD-001: Rate Reasonableness - Rule: Rate must be within \u00b110% of previous rate - Validation: Compare with last known rate - Warning: \"Rate change exceeds 10%, please verify\"</p> <p>MD-002: Required Fields - Rule: Base currency, quote currency, rate, effective date required - Validation: NULL check - Error: \"Missing required field: {field}\"</p> <p>MD-003: Rate Precision - Rule: Rate must have appropriate decimal places   - Major pairs: 4 decimals (e.g., 1.3450)   - JPY pairs: 2 decimals (e.g., 135.45)   - Others: 6 decimals - Validation: Decimal place check - Error: \"Invalid precision for currency pair\"</p> <p>MD-004: Future Dates - Rule: Cannot set rates for future dates (manual entry) - Validation: Compare effective_date with today - Error: \"Cannot set future-dated rates manually\"</p>"},{"location":"integration/business-rules.html#reference-data-rules","title":"Reference Data Rules","text":""},{"location":"integration/business-rules.html#general-rules","title":"General Rules","text":"<p>RD-001: Read-Only - Rule: Reference data cannot be modified via CisTrade - Validation: UI controls disabled - Error: \"Reference data is read-only\"</p> <p>RD-002: Data Source - Rule: All reference data sourced from GMP system - Process: Daily ETL from GMP - Frequency: Daily updates</p>"},{"location":"integration/business-rules.html#audit-compliance-rules","title":"Audit &amp; Compliance Rules","text":""},{"location":"integration/business-rules.html#audit-log-rules","title":"Audit Log Rules","text":"<p>AL-001: All Actions Logged - Rule: Every significant action must be logged - Implementation: Audit middleware - Actions: CREATE, UPDATE, DELETE, APPROVE, REJECT, EXPORT, etc.</p> <p>AL-002: Required Audit Fields - Rule: All audit logs must include:   - User ID   - Username   - User email   - Action type   - Entity type   - Entity ID   - Timestamp   - IP address - Validation: NULL check before insert - Error: \"Missing required audit field: {field}\"</p> <p>AL-003: Immutable Audit Logs - Rule: Audit logs cannot be modified or deleted - Implementation: No UPDATE/DELETE permissions - Protection: Kudu table insert-only</p> <p>AL-004: Retention Period - Rule: Audit logs retained for 7 years - Process: Automated archival after 2 years - Compliance: Regulatory requirement</p>"},{"location":"integration/business-rules.html#access-control-rules","title":"Access Control Rules","text":"<p>AC-001: Permission Required - Rule: Every action requires appropriate permission - Validation: Check user_permissions in session - Error: \"Access denied: Missing {permission} permission\"</p> <p>AC-002: Permission Levels - Rule: Permission levels hierarchical:   - READ: View only   - WRITE: Create/Update   - READ_WRITE: Full access - Validation: Level check before action - Error: \"Insufficient permission level\"</p> <p>AC-003: Session Timeout - Rule: Sessions expire after 8 hours of inactivity - Implementation: Django session middleware - User Action: Re-login required</p>"},{"location":"integration/business-rules.html#data-validation-rules","title":"Data Validation Rules","text":""},{"location":"integration/business-rules.html#common-validations","title":"Common Validations","text":"<p>DV-001: Date Format - Rule: All dates in YYYY-MM-DD format - Validation: Regex or date parser - Error: \"Invalid date format: use YYYY-MM-DD\"</p> <p>DV-002: Currency Code Format - Rule: Currency codes must be 3 uppercase letters - Validation: Regex <code>^[A-Z]{3}$</code> - Error: \"Invalid currency code format\"</p> <p>DV-003: Email Format - Rule: Valid email address format - Validation: Django EmailValidator - Error: \"Invalid email address\"</p> <p>DV-004: String Length - Rule: Enforce maximum lengths:   - Code: 100 chars   - Name: 200 chars   - Description: 500 chars   - Comments: 1000 chars - Validation: Length check - Error: \"Exceeds maximum length: {max}\"</p>"},{"location":"integration/business-rules.html#business-logic-rules","title":"Business Logic Rules","text":""},{"location":"integration/business-rules.html#nav-calculation","title":"NAV Calculation**","text":"<p>BL-001: Multi-Currency NAV - Rule: Convert all holdings to base currency for NAV - Formula: <code>NAV = \u03a3(holding_value \u00d7 fx_rate)</code> - FX Rate: Use latest available rate</p> <p>BL-002: NAV Recalculation Triggers - Rule: Recalculate NAV when:   - Holding value changes   - FX rate updates   - Manual trigger - Frequency: Real-time or end-of-day</p>"},{"location":"integration/business-rules.html#risk-management","title":"Risk Management","text":"<p>RM-001: Concentration Limits - Rule: Single holding cannot exceed 20% of NAV - Validation: Check after trade execution - Warning: \"Concentration limit exceeded\"</p> <p>RM-002: Currency Exposure - Rule: Non-base currency exposure cannot exceed 30% - Validation: Calculate total FX exposure - Warning: \"FX exposure limit exceeded\"</p>"},{"location":"integration/business-rules.html#exception-handling","title":"Exception Handling","text":""},{"location":"integration/business-rules.html#override-authority","title":"Override Authority","text":"<p>EX-001: Business Override - Rule: Certain rules can be overridden by managers - Process: Manager approval required - Audit: Override reason logged</p> <p>EX-002: Emergency Access - Rule: System admin can bypass four-eyes in emergencies - Process: Requires VP+ approval - Audit: Flagged for review</p>"},{"location":"integration/business-rules.html#compliance-rules","title":"Compliance Rules","text":"<p>CM-001: Segregation of Duties - Rule: Maker and Checker must be different people - Validation: User ID comparison - Non-negotiable: Cannot be overridden</p> <p>CM-002: Data Privacy - Rule: Personal data access logged and restricted - Implementation: Role-based access control - Compliance: PDPA requirements</p> <p>CM-003: Change Traceability - Rule: All changes must have audit trail - Implementation: Portfolio history table - Fields: What changed, old value, new value, who, when</p>"},{"location":"integration/business-rules.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Business Processes</li> <li>Four-Eyes Workflow</li> <li>Database Schema</li> </ul>"},{"location":"integration/data-flow.html","title":"Data Flow","text":"<p>Data movement and transformations within CisTrade ecosystem.</p>"},{"location":"integration/data-flow.html#overall-architecture","title":"Overall Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  GMP System  \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Hive/Kudu   \u2502\u25c0\u2500\u2500\u2500\u2500\u2502  CisTrade    \u2502\n\u2502  (Source)    \u2502     \u2502  (Storage)   \u2502     \u2502  (UI/Logic)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502                    \u2502                     \u2502\n       \u2502                    \u2502                     \u2502\n       \u25bc                    \u25bc                     \u25bc\n  Daily ETL         Impala Queries        User Actions\n</code></pre>"},{"location":"integration/data-flow.html#reference-data-flow","title":"Reference Data Flow","text":""},{"location":"integration/data-flow.html#source-to-hive","title":"Source to Hive","text":"<p>Daily ETL Process:</p> <ol> <li>GMP Export (2:00 AM)</li> <li>Currencies \u2192 <code>gmp_cis_sta_dly_currency.csv</code></li> <li>Countries \u2192 <code>gmp_cis_sta_dly_country.csv</code></li> <li>Calendars \u2192 <code>gmp_cis_sta_dly_calendar.csv</code></li> <li> <p>Counterparties \u2192 <code>gmp_cis_sta_dly_counterparty.csv</code></p> </li> <li> <p>File Transfer (2:30 AM)</p> </li> <li>Files placed in shared directory</li> <li> <p>Permissions set (read-only)</p> </li> <li> <p>Hive External Tables</p> </li> <li>Point to file locations</li> <li>No data copy (external)</li> <li> <p>Instant availability</p> </li> <li> <p>CisTrade Access</p> </li> <li>Queries via Impala</li> <li>Data served to UI</li> <li>No local caching</li> </ol> <p>Format: <pre><code>Source: GMP Database\n  \u2193 SQL Extract\nFormat: Pipe-delimited (|)\n  \u2193 SFTP\nStorage: /data/gmp_export/\n  \u2193 Hive External Table\nAccess: Impala SELECT queries\n  \u2193 Python (Impyla)\nDisplay: Django Templates\n</code></pre></p>"},{"location":"integration/data-flow.html#portfolio-data-flow","title":"Portfolio Data Flow","text":""},{"location":"integration/data-flow.html#write-operations","title":"Write Operations","text":"<p>Create Portfolio:</p> <pre><code>1. User Input (Web Form)\n   \u2193 HTTP POST\n2. Django View\n   \u2193 Validation\n3. Portfolio Service\n   \u2193 Business Logic\n4. Portfolio Repository\n   \u2193 SQL INSERT\n5. Kudu Table (cis_portfolio)\n   \u2193 Confirmation\n6. Audit Log (cis_audit_log)\n   \u2193 Response\n7. Success Message to User\n</code></pre> <p>Update Portfolio:</p> <pre><code>1. User Edit (Web Form)\n   \u2193 HTTP POST\n2. Django View\n   \u2193 Validation\n3. Portfolio Service\n   \u2193 Four-Eyes Check\n4. Portfolio Repository\n   \u2193 SQL UPDATE\n5. Kudu Table Update\n   \u2193 Parallel\n6a. Portfolio History (cis_portfolio_history)\n6b. Audit Log (cis_audit_log)\n   \u2193 Response\n7. Success Message\n</code></pre>"},{"location":"integration/data-flow.html#read-operations","title":"Read Operations","text":"<p>List Portfolios:</p> <pre><code>1. User Request (Page Load)\n   \u2193 HTTP GET\n2. Django View\n   \u2193 Permission Check\n3. Portfolio Service\n   \u2193 Filter/Search\n4. Portfolio Repository\n   \u2193 SQL SELECT\n5. Impala Query Execution\n   \u2193 Kudu Scan\n6. Kudu Table (cis_portfolio)\n   \u2193 Results\n7. Pagination\n   \u2193 Template Rendering\n8. HTML Response\n</code></pre>"},{"location":"integration/data-flow.html#audit-log-flow","title":"Audit Log Flow","text":""},{"location":"integration/data-flow.html#write-to-audit","title":"Write to Audit","text":"<p>Every Action:</p> <pre><code>User Action\n  \u2193\nDjango View\n  \u2193 Extract Context\nAudit Repository\n  \u2193 Build INSERT\nImpala Connection\n  \u2193 Execute\nKudu Table (cis_audit_log)\n  \u2193 (Async, Non-Blocking)\nContinue User Flow\n</code></pre>"},{"location":"integration/data-flow.html#read-from-audit","title":"Read from Audit","text":"<p>Audit Log View:</p> <pre><code>User Request (/core/audit-log/)\n  \u2193\nDjango View\n  \u2193 Date Range Filter\nAudit Repository\n  \u2193 SQL SELECT with WHERE\nImpala Query\n  \u2193 Kudu Scan\nResults\n  \u2193 Sort by Timestamp DESC\nPagination\n  \u2193 Template Rendering\nDisplay to User\n</code></pre>"},{"location":"integration/data-flow.html#market-data-flow","title":"Market Data Flow","text":""},{"location":"integration/data-flow.html#fx-rate-updates","title":"FX Rate Updates","text":"<p>Automated Feed:</p> <pre><code>1. External Provider (Bloomberg/Reuters)\n   \u2193 API Call (Every 15 min)\n2. Market Data Service\n   \u2193 Parse Response\n3. Validation Service\n   \u2193 Quality Checks\n4. Market Data Repository\n   \u2193 SQL INSERT/UPDATE\n5. Kudu Table (cis_fx_rate)\n   \u2193 Trigger\n6. Portfolio Revaluation\n   \u2193 Affected Portfolios\n7. NAV Recalculation\n</code></pre> <p>Manual Entry:</p> <pre><code>User Input (Web Form)\n  \u2193\nMarket Data View\n  \u2193 Validation\nMarket Data Service\n  \u2193 Override Checks\nRepository\n  \u2193 INSERT with Manual Flag\nKudu Table\n  \u2193 Audit\nAudit Log (Manual Rate Entry)\n</code></pre>"},{"location":"integration/data-flow.html#udf-data-flow","title":"UDF Data Flow","text":""},{"location":"integration/data-flow.html#value-update","title":"Value Update","text":"<pre><code>User Input\n  \u2193\nUDF View\n  \u2193 Validation (Data Type)\nUDF Service\n  \u2193 Business Logic\nRepository Operations:\n  \u251c\u2500 End-Date Previous Value\n  \u2514\u2500 Insert New Value\n  \u2193 Both in Transaction\nKudu Tables:\n  \u251c\u2500 cis_udf_value (current)\n  \u2514\u2500 cis_udf_value_history (all)\n  \u2193 Audit\nAudit Log\n</code></pre>"},{"location":"integration/data-flow.html#data-synchronization","title":"Data Synchronization","text":""},{"location":"integration/data-flow.html#ensuring-consistency","title":"Ensuring Consistency","text":"<p>Transactional Writes: - Kudu supports row-level transactions - Multiple tables updated atomically - Rollback on any failure</p> <p>Read Consistency: - READ_LATEST snapshot isolation - Consistent view across queries</p>"},{"location":"integration/data-flow.html#performance-optimization","title":"Performance Optimization","text":""},{"location":"integration/data-flow.html#caching-strategy","title":"Caching Strategy","text":"<p>Not Cached (Always Fresh): - Portfolio list/detail - Audit logs - FX rates (real-time data)</p> <p>Cached (1 hour): - Help content - User permissions (session)</p> <p>Cached (1 day): - Reference data (currencies, countries) - Calendar data</p>"},{"location":"integration/data-flow.html#query-optimization","title":"Query Optimization","text":"<p>Partitioning: - Portfolio by status - Audit log by date - FX rates by currency pair</p> <p>Indexes: - Portfolio: code (primary key) - Audit: timestamp - FX Rate: (base_currency, quote_currency)</p>"},{"location":"integration/data-flow.html#data-retention","title":"Data Retention","text":""},{"location":"integration/data-flow.html#policies","title":"Policies","text":"<p>Portfolio Data: - Active: Forever - Closed: 7 years - Draft/Rejected: 1 year</p> <p>Audit Logs: - All: 7 years (regulatory) - Archive to cold storage after 2 years</p> <p>Market Data: - Current rates: Forever - Historical rates: 10 years - Intraday ticks: 3 months</p>"},{"location":"integration/data-flow.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Business Processes</li> <li>Database Schema</li> <li>Integration Points</li> </ul>"},{"location":"integration/integrations.html","title":"Integration Points","text":"<p>External system integrations and APIs.</p>"},{"location":"integration/integrations.html#gmp-system-integration","title":"GMP System Integration","text":""},{"location":"integration/integrations.html#overview","title":"Overview","text":"<p>Purpose: Source of truth for reference data</p> <p>Type: Batch ETL</p> <p>Frequency: Daily (2:00 AM)</p> <p>Data Flow: GMP \u2192 CSV Files \u2192 Hive External Tables \u2192 CisTrade</p>"},{"location":"integration/integrations.html#integrated-data","title":"Integrated Data","text":"<p>1. Currencies - Table: <code>gmp_cis_sta_dly_currency</code> - Records: ~180 currencies - Update: Daily - Format: Pipe-delimited (|)</p> <p>2. Countries - Table: <code>gmp_cis_sta_dly_country</code> - Records: ~250 countries - Update: Daily - Format: Pipe-delimited (|)</p> <p>3. Calendars - Table: <code>gmp_cis_sta_dly_calendar</code> - Records: ~100,000 holidays - Update: Daily - Format: Pipe-delimited (|)</p> <p>4. Counterparties - Table: <code>gmp_cis_sta_dly_counterparty</code> - Records: ~7,000 entities - Update: Daily - Format: Pipe-delimited (|)</p>"},{"location":"integration/integrations.html#etl-process","title":"ETL Process","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 GMP System  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502 2:00 AM - Extract\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  CSV Files  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502 2:30 AM - Transfer\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Shared Dir  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502 3:00 AM - Hive Refresh\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Hive Tables \u2502 (External)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502 Real-time - Query\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  CisTrade   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"integration/integrations.html#monitoring","title":"Monitoring","text":"<p>Health Checks: - File arrival monitoring - Row count validation - Data quality checks - Timestamp verification</p> <p>Alerts: - Missing file (&gt; 1 hour late) - Empty file - Significant row count change (\u00b110%) - Format errors</p>"},{"location":"integration/integrations.html#acl-integration","title":"ACL Integration","text":""},{"location":"integration/integrations.html#overview_1","title":"Overview","text":"<p>Purpose: Authentication and authorization</p> <p>Type: Real-time queries</p> <p>Source: Hive tables (gmp_cis ACL tables)</p> <p>Authentication Flow:</p> <pre><code>User Login\n  \u2193\nQuery ACL User Table\n  \u2193 (User found?)\nQuery ACL Group\n  \u2193\nQuery ACL Permissions\n  \u2193\nBuild Permission Map\n  \u2193\nCreate Session\n</code></pre>"},{"location":"integration/integrations.html#acl-tables","title":"ACL Tables","text":"<p>1. cis_acl_user - User credentials - Group membership - Status (enabled/disabled)</p> <p>2. cis_acl_group - Group definitions - Group hierarchy</p> <p>3. cis_acl_permission - Permission definitions - Access levels (READ/WRITE/READ_WRITE)</p> <p>4. cis_acl_user_group - User-to-group mappings</p>"},{"location":"integration/integrations.html#session-management","title":"Session Management","text":"<p>Session Data: <pre><code>{\n    'user_login': 'jsmith',\n    'user_id': '12345',\n    'user_name': 'John Smith',\n    'user_email': 'jsmith@company.com',\n    'user_group_id': '1',\n    'user_group_name': 'Checkers',\n    'user_permissions': {\n        'cis-portfolio': 'READ_WRITE',\n        'cis-udf': 'READ',\n        'cis-audit': 'READ'\n    }\n}\n</code></pre></p> <p>Session Timeout: 8 hours</p>"},{"location":"integration/integrations.html#market-data-feeds","title":"Market Data Feeds","text":""},{"location":"integration/integrations.html#bloomberg-integration","title":"Bloomberg Integration","text":"<p>Type: API (Real-time)</p> <p>Frequency: Every 15 minutes</p> <p>Coverage: 150+ currency pairs</p> <p>Endpoint: Bloomberg API</p> <p>Data Retrieved: - Bid rate - Ask rate - Mid rate (used for valuation) - Timestamp - Source identifier</p> <p>Authentication: API key</p> <p>Error Handling: - Retry 3 times on failure - Fall back to Reuters if unavailable - Alert market data team</p>"},{"location":"integration/integrations.html#reuters-integration","title":"Reuters Integration","text":"<p>Type: API (Real-time)</p> <p>Frequency: Every 30 minutes</p> <p>Coverage: 120+ currency pairs</p> <p>Purpose: Backup to Bloomberg</p> <p>Process: Same as Bloomberg</p>"},{"location":"integration/integrations.html#kudu-storage","title":"Kudu Storage","text":""},{"location":"integration/integrations.html#overview_2","title":"Overview","text":"<p>Purpose: Transactional data storage</p> <p>Type: Direct connection via Impala</p> <p>Tables: 6 main tables - cis_portfolio - cis_portfolio_history - cis_audit_log - cis_udf_master - cis_udf_value - cis_fx_rate</p>"},{"location":"integration/integrations.html#connection-configuration","title":"Connection Configuration","text":"<pre><code>IMPALA_CONFIG = {\n    'host': 'impala-host.company.com',\n    'port': 21050,\n    'database': 'gmp_cis',\n    'auth_mechanism': 'PLAIN',\n    'use_ssl': True,\n    'timeout': 60\n}\n</code></pre>"},{"location":"integration/integrations.html#query-optimization","title":"Query Optimization","text":"<p>Partitioning: By status, date Caching: Impala query cache Batch Operations: Bulk inserts when possible</p>"},{"location":"integration/integrations.html#email-notifications","title":"Email Notifications","text":""},{"location":"integration/integrations.html#smtp-integration","title":"SMTP Integration","text":"<p>Purpose: User notifications</p> <p>Events: - Portfolio submitted for approval - Portfolio approved - Portfolio rejected - System alerts</p> <p>SMTP Configuration: <pre><code>EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'\nEMAIL_HOST = 'smtp.company.com'\nEMAIL_PORT = 587\nEMAIL_USE_TLS = True\n</code></pre></p> <p>Email Templates: - Approval request - Approval confirmation - Rejection notification - Alert notification</p>"},{"location":"integration/integrations.html#reporting-integration","title":"Reporting Integration","text":""},{"location":"integration/integrations.html#export-formats","title":"Export Formats","text":"<p>CSV: Comma-separated values Excel: XLSX format using openpyxl PDF: HTML to PDF using WeasyPrint</p>"},{"location":"integration/integrations.html#scheduled-reports","title":"Scheduled Reports","text":"<p>Delivery: Email Frequency: Daily, Weekly, Monthly Recipients: Configurable per report</p>"},{"location":"integration/integrations.html#future-integrations","title":"Future Integrations","text":""},{"location":"integration/integrations.html#planned","title":"Planned","text":"<p>1. SSO Integration - SAML 2.0 - Azure AD - Timeline: Q2 2026</p> <p>2. Risk Engine - Real-time risk calculations - VaR, stress testing - Timeline: Q3 2026</p> <p>3. Trade Booking System - Auto-populate from trades - Straight-through processing - Timeline: Q4 2026</p>"},{"location":"integration/integrations.html#api-endpoints-future","title":"API Endpoints (Future)","text":""},{"location":"integration/integrations.html#rest-api","title":"REST API","text":"<p>Planned Features: - Portfolio CRUD via API - Audit log queries - Reference data access</p> <p>Authentication: OAuth 2.0</p> <p>Documentation: OpenAPI/Swagger</p> <p>Timeline: 2027</p>"},{"location":"integration/integrations.html#integration-monitoring","title":"Integration Monitoring","text":""},{"location":"integration/integrations.html#dashboards","title":"Dashboards","text":"<p>Metrics: - GMP ETL status - ACL query latency - Market data feed health - Kudu connection pool - Email delivery rate</p> <p>Tools: - Grafana dashboards - Prometheus metrics - ELK stack for logs</p>"},{"location":"integration/integrations.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Business Processes</li> <li>Data Flow</li> <li>Architecture</li> </ul>"},{"location":"integration/workflow-diagrams.html","title":"Workflow Diagrams","text":"<p>Visual representations of key workflows.</p>"},{"location":"integration/workflow-diagrams.html#portfolio-lifecycle","title":"Portfolio Lifecycle","text":"<pre><code>stateDiagram-v2\n    [*] --&gt; Draft: Create\n    Draft --&gt; PendingApproval: Submit\n    PendingApproval --&gt; Active: Approve\n    PendingApproval --&gt; Rejected: Reject\n    Rejected --&gt; Draft: Edit\n    Active --&gt; Closed: Close\n    Closed --&gt; Active: Reactivate\n    Closed --&gt; [*]</code></pre>"},{"location":"integration/workflow-diagrams.html#four-eyes-workflow","title":"Four-Eyes Workflow","text":"<pre><code>sequenceDiagram\n    participant M as Maker\n    participant S as System\n    participant C as Checker\n\n    M-&gt;&gt;S: Create Portfolio (Draft)\n    S--&gt;&gt;M: Saved\n    M-&gt;&gt;S: Submit for Approval\n    S-&gt;&gt;S: Validate (Maker \u2260 Checker)\n    S-&gt;&gt;C: Notify Pending Approval\n    C-&gt;&gt;S: Review Portfolio\n    alt Approve\n        C-&gt;&gt;S: Approve with Comments\n        S-&gt;&gt;S: Status = Active\n        S--&gt;&gt;M: Notification (Approved)\n    else Reject\n        C-&gt;&gt;S: Reject with Reason\n        S-&gt;&gt;S: Status = Rejected\n        S--&gt;&gt;M: Notification (Rejected)\n        M-&gt;&gt;S: Edit &amp; Resubmit\n    end</code></pre>"},{"location":"integration/workflow-diagrams.html#authentication-flow","title":"Authentication Flow","text":"<pre><code>graph TD\n    A[User enters Login ID] --&gt; B{Query ACL User Table}\n    B --&gt;|Not Found| C[Display Error]\n    B --&gt;|Found| D{User Enabled?}\n    D --&gt;|No| C\n    D --&gt;|Yes| E[Query User Group]\n    E --&gt; F[Query Group Permissions]\n    F --&gt; G[Build Permission Map]\n    G --&gt; H[Create Session]\n    H --&gt; I[Redirect to Dashboard]</code></pre>"},{"location":"integration/workflow-diagrams.html#data-sync-flow","title":"Data Sync Flow","text":"<pre><code>graph LR\n    A[GMP System] --&gt;|2:00 AM| B[CSV Export]\n    B --&gt;|SFTP| C[Shared Directory]\n    C --&gt;|Hive External| D[Impala Tables]\n    D --&gt;|Query| E[CisTrade App]\n    E --&gt;|Display| F[User Browser]</code></pre>"},{"location":"integration/workflow-diagrams.html#fx-rate-update","title":"FX Rate Update","text":"<pre><code>sequenceDiagram\n    participant B as Bloomberg\n    participant S as CisTrade Service\n    participant K as Kudu\n    participant P as Portfolios\n\n    loop Every 15 minutes\n        S-&gt;&gt;B: Request Latest Rates\n        B--&gt;&gt;S: Rate Data\n        S-&gt;&gt;S: Validate Rates\n        S-&gt;&gt;K: Update FX Rate Table\n        K--&gt;&gt;S: Success\n        S-&gt;&gt;P: Trigger NAV Recalculation\n        P-&gt;&gt;P: Calculate New NAV\n    end</code></pre>"},{"location":"integration/workflow-diagrams.html#udf-value-update","title":"UDF Value Update","text":"<pre><code>graph TD\n    A[User Enters New Value] --&gt; B{Validate Data Type}\n    B --&gt;|Invalid| C[Show Error]\n    B --&gt;|Valid| D{Check Effective Date}\n    D --&gt;|Overlaps| C\n    D --&gt;|Valid| E[End-Date Previous Value]\n    E --&gt; F[Insert New Value]\n    F --&gt; G[Record in History]\n    G --&gt; H[Log Audit]\n    H --&gt; I[Success Message]</code></pre>"},{"location":"integration/workflow-diagrams.html#approval-decision-tree","title":"Approval Decision Tree","text":"<pre><code>graph TD\n    A[Pending Approval] --&gt; B{Checker Reviews}\n    B --&gt;|Approve| C{Same User?}\n    C --&gt;|Yes| D[Error: Self-Approval]\n    C --&gt;|No| E{Comments Provided?}\n    E --&gt;|No| F[Error: Comments Required]\n    E --&gt;|Yes| G[Status = Active]\n    G --&gt; H[Notify Maker]\n    B --&gt;|Reject| I{Reason Provided?}\n    I --&gt;|No| F\n    I --&gt;|Yes| J[Status = Rejected]\n    J --&gt; K[Notify Maker]</code></pre>"},{"location":"integration/workflow-diagrams.html#system-architecture","title":"System Architecture","text":"<pre><code>graph TB\n    subgraph \"Presentation Layer\"\n        A[Web Browser]\n    end\n\n    subgraph \"Application Layer\"\n        B[Django Views]\n        C[Service Layer]\n    end\n\n    subgraph \"Data Layer\"\n        D[Repository Layer]\n        E[Impala Connection]\n    end\n\n    subgraph \"Storage Layer\"\n        F[Kudu Tables]\n        G[Hive External Tables]\n    end\n\n    A &lt;--&gt; B\n    B &lt;--&gt; C\n    C &lt;--&gt; D\n    D &lt;--&gt; E\n    E &lt;--&gt; F\n    E &lt;--&gt; G</code></pre>"},{"location":"integration/workflow-diagrams.html#audit-logging-flow","title":"Audit Logging Flow","text":"<pre><code>graph LR\n    A[User Action] --&gt; B[Django View]\n    B --&gt; C[Extract Context]\n    C --&gt; D{Significant Action?}\n    D --&gt;|No| E[Continue]\n    D --&gt;|Yes| F[Audit Repository]\n    F --&gt; G[Build Audit Record]\n    G --&gt; H[Insert to Kudu]\n    H --&gt; E</code></pre>"},{"location":"integration/workflow-diagrams.html#report-generation","title":"Report Generation","text":"<pre><code>sequenceDiagram\n    participant U as User\n    participant V as View\n    participant S as Service\n    participant R as Repository\n    participant E as Export\n\n    U-&gt;&gt;V: Request Report\n    V-&gt;&gt;S: Get Data\n    S-&gt;&gt;R: Query Database\n    R--&gt;&gt;S: Data\n    S-&gt;&gt;E: Generate Report\n    E--&gt;&gt;U: Download File (CSV/PDF/Excel)</code></pre>"},{"location":"integration/workflow-diagrams.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Business Processes</li> <li>Data Flow</li> <li>Architecture</li> </ul>"},{"location":"technical/index.html","title":"Technical Documentation","text":"<p>Technical documentation for developers, architects, and DevOps engineers.</p>"},{"location":"technical/index.html#documentation-sections","title":"Documentation Sections","text":"<ul> <li>Architecture - System architecture and design patterns</li> <li>Database Schema - Kudu/Impala table structures</li> <li>API Reference - Service and repository layer documentation (coming soon)</li> <li>Code Structure - Project organization (coming soon)</li> <li>Development Guide - Local setup and development workflow (coming soon)</li> <li>Deployment - Production deployment guide (coming soon)</li> <li>Testing - Testing strategy and practices (coming soon)</li> </ul>"},{"location":"technical/index.html#quick-start-for-developers","title":"Quick Start for Developers","text":"<ol> <li>Review the Architecture document</li> <li>Understand the Database Schema</li> <li>Follow the Development Guide to set up your environment</li> </ol> <p>Contributors: See <code>CONTRIBUTING.md</code> in the repository</p>"},{"location":"technical/api-reference.html","title":"API Reference","text":"<p>Quick reference for service and repository methods.</p>"},{"location":"technical/api-reference.html#portfolio-service","title":"Portfolio Service","text":"<p>Location: <code>portfolio/services/portfolio_service.py</code></p>"},{"location":"technical/api-reference.html#core-methods","title":"Core Methods","text":"Method Parameters Returns Description <code>create_portfolio()</code> user, data Portfolio Create new portfolio in Draft <code>update_portfolio()</code> portfolio, user, data Portfolio Update Draft/Rejected only <code>submit_for_approval()</code> portfolio, user Portfolio Submit Draft \u2192 Pending <code>approve_portfolio()</code> portfolio, user, comments Portfolio Approve \u2192 Active <code>reject_portfolio()</code> portfolio, user, comments Portfolio Reject with reason <code>close_portfolio()</code> code, user_id, username, email, reason bool Close Active \u2192 Inactive <code>reactivate_portfolio()</code> code, user_id, username, email, comments bool Reactivate Inactive \u2192 Active"},{"location":"technical/api-reference.html#query-methods","title":"Query Methods","text":"Method Returns Description <code>list_portfolios(status, search, currency)</code> QuerySet Filter portfolios <code>get_pending_approvals()</code> QuerySet Pending items <code>get_portfolio_by_id(id)</code> Portfolio Get by ID <code>get_portfolio_by_code(code)</code> Portfolio Get by code"},{"location":"technical/api-reference.html#portfolio-repository","title":"Portfolio Repository","text":"<p>Location: <code>portfolio/repositories/portfolio_hive_repository.py</code></p>"},{"location":"technical/api-reference.html#methods","title":"Methods","text":"<pre><code>get_all_portfolios(limit=100, status=None, search=None, currency=None) -&gt; List[Dict]\nget_portfolio_by_code(code: str) -&gt; Optional[Dict]\nupdate_portfolio_status(code, status, is_active, updated_by) -&gt; bool\ninsert_portfolio_history(code, action, status, changes, comments, performed_by) -&gt; bool\n</code></pre>"},{"location":"technical/api-reference.html#audit-repository","title":"Audit Repository","text":"<p>Location: <code>core/audit/audit_kudu_repository.py</code></p> <pre><code>log_action(user_id, username, user_email, action_type, entity_type,\n           entity_id, entity_name, action_description, request_method, status) -&gt; bool\n</code></pre>"},{"location":"technical/api-reference.html#help-repository","title":"Help Repository","text":"<p>Location: <code>core/repositories/help_repository.py</code></p> <pre><code>get_help_content(module, page, section=None) -&gt; List[Dict]\nget_all_help() -&gt; List[Dict]\n</code></pre>"},{"location":"technical/api-reference.html#usage-examples","title":"Usage Examples","text":""},{"location":"technical/api-reference.html#create-portfolio","title":"Create Portfolio","text":"<pre><code>from portfolio.services import PortfolioService\n\nportfolio = PortfolioService.create_portfolio(\n    user=request.user,\n    data={\n        'code': 'PF001',\n        'name': 'Test Portfolio',\n        'currency': 'USD',\n        'manager': 'John Smith'\n    }\n)\n</code></pre>"},{"location":"technical/api-reference.html#query-portfolios","title":"Query Portfolios","text":"<pre><code>portfolios = PortfolioService.list_portfolios(\n    status='Active',\n    search='USD',\n    currency='USD'\n)\n</code></pre>"},{"location":"technical/api-reference.html#log-audit","title":"Log Audit","text":"<pre><code>from core.audit.audit_kudu_repository import audit_log_kudu_repository\n\naudit_log_kudu_repository.log_action(\n    user_id='123',\n    username='jsmith',\n    user_email='jsmith@company.com',\n    action_type='CREATE',\n    entity_type='PORTFOLIO',\n    entity_id='PF001',\n    entity_name='Test Portfolio',\n    action_description='Created portfolio PF001',\n    request_method='POST',\n    status='SUCCESS'\n)\n</code></pre> <p>For complete implementation details, see Architecture and Database Schema.</p>"},{"location":"technical/architecture.html","title":"CisTrade Architecture","text":""},{"location":"technical/architecture.html#system-overview","title":"System Overview","text":"<p>CisTrade is a Django-based Trade Management System built with a clean architecture that emphasizes separation of concerns, maintainability, and performance. The system uses Apache Kudu/Impala as the primary data store instead of traditional relational databases.</p> <pre><code>graph TB\n    subgraph \"Client Layer\"\n        Browser[Web Browser]\n    end\n\n    subgraph \"Presentation Layer\"\n        Templates[Django Templates]\n        Static[Static Assets&lt;br/&gt;CSS, JS, Images]\n    end\n\n    subgraph \"Application Layer\"\n        Views[Views Layer&lt;br/&gt;HTTP Handlers]\n        Services[Service Layer&lt;br/&gt;Business Logic]\n    end\n\n    subgraph \"Data Access Layer\"\n        Repositories[Repository Layer&lt;br/&gt;Data Access]\n    end\n\n    subgraph \"Data Layer\"\n        Kudu[(Apache Kudu&lt;br/&gt;via Impala)]\n    end\n\n    Browser --&gt; Views\n    Views --&gt; Templates\n    Views --&gt; Static\n    Views --&gt; Services\n    Services --&gt; Repositories\n    Repositories --&gt; Kudu\n\n    style Browser fill:#e3f2fd\n    style Views fill:#fff3e0\n    style Services fill:#f3e5f5\n    style Repositories fill:#e8f5e9\n    style Kudu fill:#fce4ec</code></pre>"},{"location":"technical/architecture.html#technology-stack","title":"Technology Stack","text":""},{"location":"technical/architecture.html#backend","title":"Backend","text":"Component Technology Version Purpose Framework Django 5.2.9 Web framework Language Python 3.12 Programming language Web Server Django Dev Server Built-in Development server WSGI Gunicorn TBD Production WSGI server"},{"location":"technical/architecture.html#database","title":"Database","text":"Component Technology Purpose Primary Database Apache Kudu Fast analytics on fast data Query Engine Impala SQL queries on Kudu Connection impyla Python Impala client ORM None Direct SQL via repository pattern"},{"location":"technical/architecture.html#frontend","title":"Frontend","text":"Component Technology Version Purpose CSS Framework Bootstrap 5.x UI components and layout Icons Bootstrap Icons 1.x Icon library JavaScript Vanilla JS ES6+ Client-side interactivity Template Engine Django Templates Built-in Server-side rendering"},{"location":"technical/architecture.html#architecture-patterns","title":"Architecture Patterns","text":""},{"location":"technical/architecture.html#1-repository-pattern","title":"1. Repository Pattern","text":"<p>The Repository pattern abstracts data access logic and provides a clean interface for the service layer.</p> <p>Purpose: - Separate data access from business logic - Provide consistent interface for different data sources - Enable testability through mocking</p> <p>Structure:</p> <pre><code># Repository Interface (Abstract)\nclass BaseRepository:\n    def get_all(self, **filters) -&gt; List[Dict]\n    def get_by_id(self, id: str) -&gt; Optional[Dict]\n    def create(self, data: Dict) -&gt; bool\n    def update(self, id: str, data: Dict) -&gt; bool\n    def delete(self, id: str) -&gt; bool\n\n# Concrete Implementation\nclass PortfolioHiveRepository(BaseRepository):\n    \"\"\"Repository for Portfolio data in Kudu/Impala.\"\"\"\n\n    def __init__(self):\n        self.connection = ImpalaConnection()\n\n    def get_all_portfolios(self, limit=100, **filters) -&gt; List[Dict]:\n        query = \"SELECT * FROM gmp_cis.cis_portfolio\"\n        # Apply filters\n        return self.execute_query(query)\n</code></pre> <p>Benefits: - \u2705 Easy to switch data sources - \u2705 Testable with mocks - \u2705 Single responsibility - \u2705 Query optimization in one place</p>"},{"location":"technical/architecture.html#2-service-layer-pattern","title":"2. Service Layer Pattern","text":"<p>The Service layer contains all business logic and orchestrates operations between repositories.</p> <p>Purpose: - Centralize business logic - Coordinate multi-step operations - Enforce business rules - Handle transactions</p> <p>Structure:</p> <pre><code>class PortfolioService:\n    \"\"\"Service for Portfolio business logic.\"\"\"\n\n    @staticmethod\n    def create_portfolio(user: User, data: Dict) -&gt; Portfolio:\n        # 1. Validate data\n        # 2. Check business rules\n        # 3. Call repository\n        # 4. Log to audit\n        # 5. Return result\n        pass\n\n    @staticmethod\n    def submit_for_approval(portfolio, user: User) -&gt; Portfolio:\n        # 1. Validate status\n        # 2. Update portfolio\n        # 3. Create history record\n        # 4. Log to audit\n        pass\n</code></pre> <p>Benefits: - \u2705 Business logic in one place - \u2705 Reusable across views - \u2705 Easy to test - \u2705 Transaction management</p>"},{"location":"technical/architecture.html#3-four-eyes-maker-checker-pattern","title":"3. Four-Eyes (Maker-Checker) Pattern","text":"<p>Purpose: Enforce separation of duties for critical operations</p> <p>Implementation:</p> <pre><code>stateDiagram-v2\n    [*] --&gt; Draft: Maker Creates\n    Draft --&gt; PendingApproval: Maker Submits\n    PendingApproval --&gt; Active: Checker Approves\n    PendingApproval --&gt; Rejected: Checker Rejects\n    Rejected --&gt; Draft: Maker Edits\n    Active --&gt; Inactive: User Closes\n    Inactive --&gt; Active: User Reactivates</code></pre> <p>Key Rules: - User cannot approve their own submission - Approval requires Checker role - Full audit trail for all transitions</p>"},{"location":"technical/architecture.html#4-soft-delete-pattern","title":"4. Soft Delete Pattern","text":"<p>Purpose: Mark records as inactive instead of physical deletion</p> <p>Implementation:</p> <pre><code># Instead of DELETE FROM table WHERE id = X\n# We use UPDATE:\nUPDATE cis_portfolio\nSET status = 'Inactive',\n    is_active = false,\n    updated_by = 'username'\nWHERE name = 'portfolio_code'\n</code></pre> <p>Benefits: - \u2705 Maintain audit history - \u2705 Enable reactivation - \u2705 Data recovery - \u2705 Compliance</p>"},{"location":"technical/architecture.html#layered-architecture","title":"Layered Architecture","text":""},{"location":"technical/architecture.html#layer-1-presentation-layer","title":"Layer 1: Presentation Layer","text":"<p>Components: - Django Templates (<code>.html</code> files) - Static files (CSS, JavaScript, Images) - Template tags and filters</p> <p>Responsibilities: - Render HTML - Display data - Capture user input - Client-side validation</p> <p>Location: <code>templates/</code>, <code>static/</code></p> <p>Example: <pre><code>&lt;!-- templates/portfolio/portfolio_list.html --&gt;\n{% extends 'base.html' %}\n{% block content %}\n    &lt;table&gt;\n        {% for portfolio in portfolios %}\n            &lt;tr&gt;&lt;td&gt;{{ portfolio.name }}&lt;/td&gt;&lt;/tr&gt;\n        {% endfor %}\n    &lt;/table&gt;\n{% endblock %}\n</code></pre></p>"},{"location":"technical/architecture.html#layer-2-view-layer","title":"Layer 2: View Layer","text":"<p>Components: - Django view functions - URL routing - Request/response handling</p> <p>Responsibilities: - Handle HTTP requests - Call service layer - Prepare context for templates - Return HTTP responses</p> <p>Location: <code>*/views.py</code>, <code>*/urls.py</code></p> <p>Example: <pre><code># portfolio/views.py\ndef portfolio_list(request):\n    # 1. Get query parameters\n    search = request.GET.get('search', '')\n\n    # 2. Call service layer\n    portfolios = PortfolioService.list_portfolios(search=search)\n\n    # 3. Prepare context\n    context = {'portfolios': portfolios}\n\n    # 4. Render template\n    return render(request, 'portfolio/portfolio_list.html', context)\n</code></pre></p>"},{"location":"technical/architecture.html#layer-3-service-layer","title":"Layer 3: Service Layer","text":"<p>Components: - Service classes with static methods - Business logic - Workflow orchestration</p> <p>Responsibilities: - Validate business rules - Coordinate repository calls - Manage transactions - Log audit events</p> <p>Location: <code>*/services/*.py</code></p> <p>Example: <pre><code># portfolio/services/portfolio_service.py\nclass PortfolioService:\n    @staticmethod\n    def submit_for_approval(portfolio: Portfolio, user: User):\n        # Validate\n        if portfolio.status != 'DRAFT':\n            raise ValidationError(\"Only draft portfolios can be submitted\")\n\n        # Update in repository\n        portfolio.status = 'PENDING_APPROVAL'\n        portfolio.submitted_by = user\n        portfolio.save()\n\n        # Create history\n        PortfolioHistory.objects.create(...)\n\n        # Audit log\n        audit_log_kudu_repository.log_action(...)\n\n        return portfolio\n</code></pre></p>"},{"location":"technical/architecture.html#layer-4-repository-layer","title":"Layer 4: Repository Layer","text":"<p>Components: - Repository classes - SQL query builders - Impala connection management</p> <p>Responsibilities: - Execute SQL queries - Map results to dictionaries/objects - Handle database errors - Manage connections</p> <p>Location: <code>*/repositories/*.py</code></p> <p>Example: <pre><code># portfolio/repositories/portfolio_hive_repository.py\nclass PortfolioHiveRepository:\n    def get_all_portfolios(self, limit=100, status=None):\n        query = f\"\"\"\n            SELECT name, description, currency, status, created_at\n            FROM gmp_cis.cis_portfolio\n        \"\"\"\n        if status:\n            query += f\" WHERE status = '{status}'\"\n\n        query += f\" LIMIT {limit}\"\n\n        return self.execute_query(query)\n</code></pre></p>"},{"location":"technical/architecture.html#layer-5-data-layer","title":"Layer 5: Data Layer","text":"<p>Components: - Apache Kudu tables - Impala query engine</p> <p>Responsibilities: - Store data - Execute queries - Maintain ACID properties - Handle partitioning</p> <p>Tables: - <code>gmp_cis.cis_portfolio</code> - <code>gmp_cis.cis_portfolio_history</code> - <code>gmp_cis.cis_audit_log</code> - <code>gmp_cis.cis_udf_master</code> - <code>gmp_cis.cis_fx_rate</code></p>"},{"location":"technical/architecture.html#data-flow","title":"Data Flow","text":""},{"location":"technical/architecture.html#read-operation-flow","title":"Read Operation Flow","text":"<pre><code>sequenceDiagram\n    actor User\n    participant View\n    participant Service\n    participant Repository\n    participant Kudu\n\n    User-&gt;&gt;View: HTTP GET /portfolio/\n    View-&gt;&gt;Service: list_portfolios(filters)\n    Service-&gt;&gt;Repository: get_all_portfolios(filters)\n    Repository-&gt;&gt;Kudu: SELECT * FROM cis_portfolio\n    Kudu--&gt;&gt;Repository: Result rows\n    Repository--&gt;&gt;Service: List[Dict]\n    Service--&gt;&gt;View: Portfolios\n    View--&gt;&gt;User: Rendered HTML</code></pre>"},{"location":"technical/architecture.html#write-operation-flow","title":"Write Operation Flow","text":"<pre><code>sequenceDiagram\n    actor User\n    participant View\n    participant Service\n    participant Repository\n    participant Kudu\n\n    User-&gt;&gt;View: HTTP POST /portfolio/create/\n    View-&gt;&gt;Service: create_portfolio(user, data)\n    Service-&gt;&gt;Service: Validate data\n    Service-&gt;&gt;Repository: insert_portfolio(data)\n    Repository-&gt;&gt;Kudu: INSERT INTO cis_portfolio\n    Kudu--&gt;&gt;Repository: Success\n    Repository-&gt;&gt;Kudu: INSERT INTO cis_audit_log\n    Kudu--&gt;&gt;Repository: Success\n    Repository--&gt;&gt;Service: Portfolio created\n    Service--&gt;&gt;View: Success response\n    View--&gt;&gt;User: Redirect to portfolio detail</code></pre>"},{"location":"technical/architecture.html#design-principles","title":"Design Principles","text":""},{"location":"technical/architecture.html#solid-principles","title":"SOLID Principles","text":""},{"location":"technical/architecture.html#single-responsibility-principle-srp","title":"Single Responsibility Principle (SRP)","text":"<ul> <li>Each class has one reason to change</li> <li><code>PortfolioService</code> handles business logic only</li> <li><code>PortfolioHiveRepository</code> handles data access only</li> <li><code>portfolio_list()</code> view handles HTTP only</li> </ul>"},{"location":"technical/architecture.html#openclosed-principle-ocp","title":"Open/Closed Principle (OCP)","text":"<ul> <li>Service methods are extensible</li> <li>Can add new status transitions without modifying existing code</li> <li>Can add new repositories without changing services</li> </ul>"},{"location":"technical/architecture.html#liskov-substitution-principle-lsp","title":"Liskov Substitution Principle (LSP)","text":"<ul> <li>Repository implementations are interchangeable</li> <li>Can swap <code>HiveRepository</code> with <code>PostgresRepository</code> without changing services</li> </ul>"},{"location":"technical/architecture.html#interface-segregation-principle-isp","title":"Interface Segregation Principle (ISP)","text":"<ul> <li>Repositories expose only needed methods</li> <li>Services don't force views to depend on unnecessary methods</li> </ul>"},{"location":"technical/architecture.html#dependency-inversion-principle-dip","title":"Dependency Inversion Principle (DIP)","text":"<ul> <li>Service depends on Repository abstraction, not concrete implementation</li> <li>Easy to mock repositories for testing</li> </ul>"},{"location":"technical/architecture.html#security-architecture","title":"Security Architecture","text":""},{"location":"technical/architecture.html#authentication","title":"Authentication","text":"<pre><code>graph LR\n    User[User] --&gt; Login[Login Page]\n    Login --&gt; ACL[ACL Repository]\n    ACL --&gt; Impala[(Impala&lt;br/&gt;gmp_acl table)]\n    Impala --&gt; Validate{Credentials&lt;br/&gt;Valid?}\n    Validate --&gt;|Yes| Session[Create Session]\n    Validate --&gt;|No| Error[Login Error]\n    Session --&gt; Dashboard[Dashboard]</code></pre> <p>Authentication Flow: 1. User enters username/password 2. <code>ACLRepository</code> queries Impala ACL table 3. Password validated 4. Session created 5. User permissions loaded</p>"},{"location":"technical/architecture.html#authorization","title":"Authorization","text":"<p>Permission Model: - Module-based permissions (e.g., <code>cis-portfolio</code>, <code>cis-udf</code>) - Operation-based access (READ, WRITE, DELETE, ADMIN) - Stored in Impala ACL tables</p> <p>Four-Eyes Enforcement: <pre><code>def can_approve(portfolio, user):\n    # User must be Checker\n    if not user.groups.filter(name='Checkers').exists():\n        return False\n\n    # User cannot approve own work\n    if portfolio.created_by == user:\n        return False\n\n    return True\n</code></pre></p>"},{"location":"technical/architecture.html#audit-trail","title":"Audit Trail","text":"<p>What is Logged: - User ID, username, email - Action type (CREATE, UPDATE, DELETE, APPROVE, REJECT) - Entity type and ID - Timestamp - Request method - Success/failure status</p> <p>Storage: <code>gmp_cis.cis_audit_log</code> table in Kudu</p>"},{"location":"technical/architecture.html#performance-optimization","title":"Performance Optimization","text":""},{"location":"technical/architecture.html#caching-strategy","title":"Caching Strategy","text":"<p>Plan (not yet implemented): <pre><code># Cache help content\ncache.set(f'help_{module}_{page}', content, timeout=3600)\n\n# Cache dropdown options\ncache.set('currencies', currency_list, timeout=86400)\n\n# Cache user permissions\ncache.set(f'permissions_{user.id}', permissions, timeout=3600)\n</code></pre></p>"},{"location":"technical/architecture.html#database-optimization","title":"Database Optimization","text":"<p>Kudu Partitioning: <pre><code>CREATE TABLE gmp_cis.cis_portfolio (\n    ...\n)\nPARTITION BY HASH(name) PARTITIONS 16\nSTORED AS KUDU;\n</code></pre></p> <p>Benefits: - Parallel query execution - Better data distribution - Faster inserts</p> <p>Query Optimization: - Use WHERE clauses to leverage partitioning - Limit result sets - Index on frequently queried columns</p>"},{"location":"technical/architecture.html#error-handling","title":"Error Handling","text":""},{"location":"technical/architecture.html#exception-hierarchy","title":"Exception Hierarchy","text":"<pre><code># Custom exceptions\nclass CisTradeException(Exception):\n    \"\"\"Base exception for CisTrade\"\"\"\n\nclass ValidationError(CisTradeException):\n    \"\"\"Data validation errors\"\"\"\n\nclass PermissionDenied(CisTradeException):\n    \"\"\"Authorization errors\"\"\"\n\nclass DataNotFound(CisTradeException):\n    \"\"\"Entity not found\"\"\"\n</code></pre>"},{"location":"technical/architecture.html#error-handling-pattern","title":"Error Handling Pattern","text":"<pre><code>try:\n    portfolio = PortfolioService.create_portfolio(user, data)\n    messages.success(request, 'Portfolio created successfully')\n    return redirect('portfolio:detail', portfolio.id)\n\nexcept ValidationError as e:\n    messages.error(request, str(e))\n    return render(request, 'portfolio/portfolio_form.html', context)\n\nexcept PermissionDenied:\n    messages.error(request, 'You do not have permission to create portfolios')\n    return redirect('dashboard')\n\nexcept Exception as e:\n    logger.error(f'Unexpected error: {e}', exc_info=True)\n    messages.error(request, 'An unexpected error occurred')\n    return redirect('dashboard')\n</code></pre>"},{"location":"technical/architecture.html#development-mode-vs-production","title":"Development Mode vs Production","text":""},{"location":"technical/architecture.html#dev-mode-current","title":"DEV MODE (Current)","text":"<pre><code># DEV_MODE_SETUP.md\n- All permissions bypassed\n- Four-eyes checks disabled\n- Self-approval allowed (for testing)\n- Verbose logging enabled\n</code></pre>"},{"location":"technical/architecture.html#production-mode","title":"Production Mode","text":"<pre><code># Production configuration\n- Strict permission checks\n- Four-eyes strictly enforced\n- Cannot self-approve\n- Optimized logging\n- HTTPS required\n- CSRF protection enabled\n</code></pre>"},{"location":"technical/architecture.html#module-structure","title":"Module Structure","text":"<pre><code>cis_trade_hive/\n\u251c\u2500\u2500 config/                 # Django settings\n\u2502   \u251c\u2500\u2500 settings.py\n\u2502   \u251c\u2500\u2500 urls.py\n\u2502   \u2514\u2500\u2500 wsgi.py\n\u2502\n\u251c\u2500\u2500 core/                   # Core functionality\n\u2502   \u251c\u2500\u2500 audit/             # Audit logging\n\u2502   \u251c\u2500\u2500 repositories/      # Core repositories\n\u2502   \u251c\u2500\u2500 views/             # Authentication, dashboard\n\u2502   \u2514\u2500\u2500 models.py          # Core models\n\u2502\n\u251c\u2500\u2500 portfolio/             # Portfolio module\n\u2502   \u251c\u2500\u2500 management/        # Django management commands\n\u2502   \u251c\u2500\u2500 repositories/      # Portfolio repositories\n\u2502   \u251c\u2500\u2500 services/          # Portfolio services\n\u2502   \u251c\u2500\u2500 views.py           # Portfolio views\n\u2502   \u251c\u2500\u2500 urls.py            # Portfolio URLs\n\u2502   \u2514\u2500\u2500 models.py          # Portfolio models\n\u2502\n\u251c\u2500\u2500 udf/                   # UDF module\n\u2502   \u251c\u2500\u2500 repositories/\n\u2502   \u251c\u2500\u2500 services/\n\u2502   \u251c\u2500\u2500 views.py\n\u2502   \u2514\u2500\u2500 urls.py\n\u2502\n\u251c\u2500\u2500 market_data/           # Market data module\n\u2502   \u251c\u2500\u2500 repositories/\n\u2502   \u251c\u2500\u2500 services/\n\u2502   \u251c\u2500\u2500 views.py\n\u2502   \u2514\u2500\u2500 urls.py\n\u2502\n\u251c\u2500\u2500 templates/             # HTML templates\n\u2502   \u251c\u2500\u2500 base.html\n\u2502   \u251c\u2500\u2500 portfolio/\n\u2502   \u251c\u2500\u2500 udf/\n\u2502   \u2514\u2500\u2500 market_data/\n\u2502\n\u2514\u2500\u2500 static/                # Static assets\n    \u251c\u2500\u2500 css/\n    \u251c\u2500\u2500 js/\n    \u2514\u2500\u2500 images/\n</code></pre>"},{"location":"technical/architecture.html#deployment-architecture","title":"Deployment Architecture","text":""},{"location":"technical/architecture.html#development","title":"Development","text":"<pre><code>graph LR\n    Dev[Developer] --&gt; Django[Django Dev Server&lt;br/&gt;localhost:8000]\n    Django --&gt; Kudu[Kudu Dev&lt;br/&gt;Cluster]</code></pre>"},{"location":"technical/architecture.html#production-proposed","title":"Production (Proposed)","text":"<pre><code>graph TB\n    LB[Load Balancer&lt;br/&gt;nginx] --&gt; App1[Django + Gunicorn&lt;br/&gt;Instance 1]\n    LB --&gt; App2[Django + Gunicorn&lt;br/&gt;Instance 2]\n    App1 --&gt; Redis[(Redis Cache)]\n    App2 --&gt; Redis\n    App1 --&gt; Kudu[(Kudu Production&lt;br/&gt;Cluster)]\n    App2 --&gt; Kudu</code></pre>"},{"location":"technical/architecture.html#future-enhancements","title":"Future Enhancements","text":""},{"location":"technical/architecture.html#short-term","title":"Short Term","text":"<ul> <li> Implement Redis caching</li> <li> Add API endpoints (REST)</li> <li> Implement WebSocket for real-time updates</li> <li> Add advanced search (Elasticsearch)</li> </ul>"},{"location":"technical/architecture.html#long-term","title":"Long Term","text":"<ul> <li> Microservices architecture</li> <li> Event-driven architecture (Kafka)</li> <li> GraphQL API</li> <li> Mobile app (React Native)</li> </ul>"},{"location":"technical/architecture.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Database Schema - Detailed table structures</li> <li>API Reference - Service and repository methods</li> <li>Development Guide - Setup and workflow</li> <li>Deployment - Production deployment</li> </ul> <p>Last Updated: 2025-12-27 | Version: 1.0.0</p>"},{"location":"technical/code-structure.html","title":"Code Structure","text":"<p>Organization of the CisTrade Django application following clean architecture principles.</p>"},{"location":"technical/code-structure.html#project-layout","title":"Project Layout","text":"<pre><code>cis_trade_hive/\n\u251c\u2500\u2500 config/                 # Django settings and URL configuration\n\u2502   \u251c\u2500\u2500 settings.py        # Application settings\n\u2502   \u251c\u2500\u2500 urls.py            # Root URL routing\n\u2502   \u2514\u2500\u2500 wsgi.py            # WSGI application\n\u251c\u2500\u2500 core/                   # Core functionality\n\u2502   \u251c\u2500\u2500 audit/             # Audit logging\n\u2502   \u251c\u2500\u2500 repositories/      # Base repository classes\n\u2502   \u251c\u2500\u2500 services/          # Shared services\n\u2502   \u2514\u2500\u2500 views/             # Auth and dashboard views\n\u251c\u2500\u2500 portfolio/              # Portfolio management module\n\u2502   \u251c\u2500\u2500 models.py          # Portfolio and history models\n\u2502   \u251c\u2500\u2500 views.py           # Portfolio views\n\u2502   \u251c\u2500\u2500 services/          # Portfolio business logic\n\u2502   \u251c\u2500\u2500 repositories/      # Portfolio data access\n\u2502   \u2514\u2500\u2500 templates/         # Portfolio HTML templates\n\u251c\u2500\u2500 udf/                    # User Defined Fields module\n\u251c\u2500\u2500 market_data/            # Market data module (FX rates)\n\u251c\u2500\u2500 reference_data/         # Reference data module\n\u251c\u2500\u2500 static/                 # Static files (CSS, JS, images)\n\u251c\u2500\u2500 templates/              # Shared HTML templates\n\u2514\u2500\u2500 manage.py              # Django management script\n</code></pre>"},{"location":"technical/code-structure.html#architectural-layers","title":"Architectural Layers","text":""},{"location":"technical/code-structure.html#1-models-layer-django-orm","title":"1. Models Layer (Django ORM)","text":"<p>Location: <code>{app}/models.py</code></p> <p>Purpose: Database models, Django ORM entities</p> <p>Example: <pre><code>class Portfolio(models.Model):\n    code = models.CharField(max_length=100, unique=True)\n    name = models.CharField(max_length=200)\n    currency = models.CharField(max_length=3)\n    status = models.CharField(max_length=20)\n</code></pre></p>"},{"location":"technical/code-structure.html#2-repository-layer","title":"2. Repository Layer","text":"<p>Location: <code>{app}/repositories/</code></p> <p>Purpose: Data access abstraction, Impala/Kudu queries</p> <p>Pattern: Repository pattern separates data access from business logic</p> <p>Example: <pre><code>class PortfolioHiveRepository:\n    def get_all_portfolios(self, limit=100):\n        query = f\"SELECT * FROM {self.TABLE_NAME}\"\n        return impala_manager.execute_query(query)\n</code></pre></p>"},{"location":"technical/code-structure.html#3-service-layer","title":"3. Service Layer","text":"<p>Location: <code>{app}/services/</code></p> <p>Purpose: Business logic, orchestration</p> <p>Pattern: Service layer coordinates between views and repositories</p> <p>Example: <pre><code>class PortfolioService:\n    @staticmethod\n    def create_portfolio(user, data):\n        # Validate data\n        # Create portfolio\n        # Log audit\n        # Return result\n</code></pre></p>"},{"location":"technical/code-structure.html#4-views-layer","title":"4. Views Layer","text":"<p>Location: <code>{app}/views.py</code></p> <p>Purpose: HTTP request handling, template rendering</p> <p>Responsibilities: - Validate request parameters - Call service methods - Render templates or return JSON - Handle errors</p>"},{"location":"technical/code-structure.html#5-template-layer","title":"5. Template Layer","text":"<p>Location: <code>templates/</code></p> <p>Purpose: HTML rendering with Django template language</p> <p>Shared Templates: - <code>base.html</code>: Base layout - <code>components/</code>: Reusable UI components</p>"},{"location":"technical/code-structure.html#module-structure","title":"Module Structure","text":""},{"location":"technical/code-structure.html#core-module","title":"Core Module","text":"<p>Responsibilities: - Authentication (ACL integration) - Authorization (permissions) - Audit logging - Dashboard - Base repository classes</p> <p>Key Files: <pre><code>core/\n\u251c\u2500\u2500 views/\n\u2502   \u251c\u2500\u2500 auth_views.py          # Login, logout, decorators\n\u2502   \u2514\u2500\u2500 dashboard_views.py     # Dashboard view\n\u251c\u2500\u2500 repositories/\n\u2502   \u251c\u2500\u2500 acl_repository.py      # ACL data access\n\u2502   \u2514\u2500\u2500 impala_connection.py   # Impala connection manager\n\u251c\u2500\u2500 audit/\n\u2502   \u2514\u2500\u2500 audit_kudu_repository.py  # Audit logging to Kudu\n\u2514\u2500\u2500 services/\n    \u2514\u2500\u2500 help_service.py        # Help content service\n</code></pre></p>"},{"location":"technical/code-structure.html#portfolio-module","title":"Portfolio Module","text":"<p>Responsibilities: - Portfolio CRUD operations - Four-eyes workflow (maker-checker) - Portfolio status management - History tracking</p> <p>Key Files: <pre><code>portfolio/\n\u251c\u2500\u2500 models.py                          # Portfolio, PortfolioHistory models\n\u251c\u2500\u2500 views.py                           # Portfolio views\n\u251c\u2500\u2500 services/\n\u2502   \u251c\u2500\u2500 portfolio_service.py          # Core business logic\n\u2502   \u2514\u2500\u2500 portfolio_dropdown_service.py # Dropdown data\n\u2514\u2500\u2500 repositories/\n    \u2514\u2500\u2500 portfolio_hive_repository.py  # Kudu data access\n</code></pre></p>"},{"location":"technical/code-structure.html#reference-data-module","title":"Reference Data Module","text":"<p>Responsibilities: - Currency reference - Country reference - Calendar/holidays - Counterparty data</p> <p>Key Files: <pre><code>reference_data/\n\u251c\u2500\u2500 views.py                           # Reference data views\n\u251c\u2500\u2500 services/\n\u2502   \u2514\u2500\u2500 reference_data_service.py     # Service layer\n\u2514\u2500\u2500 repositories/\n    \u2514\u2500\u2500 reference_data_repository.py  # Hive external tables\n</code></pre></p>"},{"location":"technical/code-structure.html#udf-module","title":"UDF Module","text":"<p>Responsibilities: - UDF definition management - UDF value management - History tracking</p>"},{"location":"technical/code-structure.html#market-data-module","title":"Market Data Module","text":"<p>Responsibilities: - FX rate management - Rate history - Dashboard views</p>"},{"location":"technical/code-structure.html#design-patterns","title":"Design Patterns","text":""},{"location":"technical/code-structure.html#repository-pattern","title":"Repository Pattern","text":"<p>Purpose: Separate data access from business logic</p> <p>Benefits: - Easy to test (mock repositories) - Database agnostic - Centralized query logic</p> <p>Example: <pre><code># Repository handles data access\nclass PortfolioRepository:\n    def get_by_code(self, code):\n        query = f\"SELECT * FROM portfolio WHERE code = '{code}'\"\n        return self.execute(query)\n\n# Service uses repository\nclass PortfolioService:\n    def get_portfolio(self, code):\n        return portfolio_repository.get_by_code(code)\n</code></pre></p>"},{"location":"technical/code-structure.html#service-layer-pattern","title":"Service Layer Pattern","text":"<p>Purpose: Encapsulate business logic</p> <p>Benefits: - Reusable across multiple views - Centralized validation - Transaction management</p> <p>Example: <pre><code>class PortfolioService:\n    @staticmethod\n    def submit_for_approval(portfolio, user):\n        # Business rules\n        if portfolio.status != 'DRAFT':\n            raise ValidationError(\"Only drafts can be submitted\")\n\n        # Update status\n        portfolio.status = 'PENDING_APPROVAL'\n\n        # Log audit\n        audit_log.log(...)\n\n        return portfolio\n</code></pre></p>"},{"location":"technical/code-structure.html#decorator-pattern-authentication","title":"Decorator Pattern (Authentication)","text":"<p>Purpose: Add cross-cutting concerns</p> <p>Usage: <pre><code>@require_login\ndef portfolio_list(request):\n    # User is guaranteed to be authenticated\n\n@require_permission('cis-portfolio', 'WRITE')\ndef portfolio_create(request):\n    # User has WRITE permission\n</code></pre></p>"},{"location":"technical/code-structure.html#database-access","title":"Database Access","text":""},{"location":"technical/code-structure.html#impala-connection","title":"Impala Connection","text":"<p>Singleton Pattern: One connection pool</p> <p>Location: <code>core/repositories/impala_connection.py</code></p> <p>Usage: <pre><code>from core.repositories.impala_connection import impala_manager\n\nresults = impala_manager.execute_query(query, database='gmp_cis')\n</code></pre></p>"},{"location":"technical/code-structure.html#query-execution","title":"Query Execution","text":"<p>Read Queries: <pre><code>query = \"SELECT * FROM gmp_cis.cis_portfolio\"\nresults = impala_manager.execute_query(query)\n# Returns: List[Dict]\n</code></pre></p> <p>Write Queries (Kudu): <pre><code>query = \"INSERT INTO gmp_cis.cis_portfolio VALUES (...)\"\nsuccess = impala_manager.execute_update(query)\n# Returns: bool\n</code></pre></p>"},{"location":"technical/code-structure.html#static-files","title":"Static Files","text":""},{"location":"technical/code-structure.html#css","title":"CSS","text":"<p>Location: <code>static/css/</code></p> <p>Files: - <code>cistrade.css</code>: Main application styles - <code>custom.css</code>: Additional custom styles</p>"},{"location":"technical/code-structure.html#javascript","title":"JavaScript","text":"<p>Location: <code>static/js/</code></p> <p>Files: - <code>cistrade.js</code>: Common JavaScript functions - <code>custom.js</code>: Custom scripts</p>"},{"location":"technical/code-structure.html#images","title":"Images","text":"<p>Location: <code>static/images/</code></p>"},{"location":"technical/code-structure.html#templates","title":"Templates","text":""},{"location":"technical/code-structure.html#base-template","title":"Base Template","text":"<p>File: <code>templates/base.html</code></p> <p>Provides: - HTML structure - Navigation - Sidebar - Footer - Common CSS/JS includes</p>"},{"location":"technical/code-structure.html#components","title":"Components","text":"<p>Location: <code>templates/components/</code></p> <p>Reusable UI elements: - <code>navbar_acl.html</code>: Top navigation bar - <code>sidebar.html</code>: Left sidebar menu - <code>messages.html</code>: Django messages display</p>"},{"location":"technical/code-structure.html#app-templates","title":"App Templates","text":"<p>Each app has its own templates in <code>{app}/templates/{app}/</code></p> <p>Example (Portfolio): <pre><code>portfolio/templates/portfolio/\n\u251c\u2500\u2500 portfolio_list.html\n\u251c\u2500\u2500 portfolio_detail.html\n\u251c\u2500\u2500 portfolio_form.html\n\u2514\u2500\u2500 pending_approvals.html\n</code></pre></p>"},{"location":"technical/code-structure.html#configuration","title":"Configuration","text":""},{"location":"technical/code-structure.html#settings","title":"Settings","text":"<p>File: <code>config/settings.py</code></p> <p>Key Settings: <pre><code>DEBUG = True/False\nSKIP_PERMISSION_CHECKS = DEBUG\nIMPALA_CONFIG = {...}\nDATABASES = {...}\n</code></pre></p>"},{"location":"technical/code-structure.html#url-routing","title":"URL Routing","text":"<p>Root URLs: <code>config/urls.py</code></p> <p>App URLs: <code>{app}/urls.py</code></p> <p>Pattern: <pre><code># config/urls.py\nurlpatterns = [\n    path('portfolio/', include('portfolio.urls')),\n]\n\n# portfolio/urls.py\nurlpatterns = [\n    path('', views.portfolio_list, name='list'),\n    path('&lt;str:code&gt;/', views.portfolio_detail, name='detail'),\n]\n</code></pre></p>"},{"location":"technical/code-structure.html#testing-structure","title":"Testing Structure","text":"<p>Location: <code>{app}/tests/</code></p> <p>Types: - Unit tests: Test individual functions - Integration tests: Test multiple components - View tests: Test HTTP requests/responses</p>"},{"location":"technical/code-structure.html#code-style","title":"Code Style","text":""},{"location":"technical/code-structure.html#python-pep-8","title":"Python (PEP 8)","text":"<ul> <li>4 spaces indentation</li> <li>Maximum line length: 100 characters</li> <li>Docstrings for all public methods</li> <li>Type hints where beneficial</li> </ul>"},{"location":"technical/code-structure.html#html","title":"HTML","text":"<ul> <li>2 spaces indentation</li> <li>Semantic HTML5 elements</li> <li>Django template language</li> </ul>"},{"location":"technical/code-structure.html#javascript_1","title":"JavaScript","text":"<ul> <li>2 spaces indentation</li> <li>ES6+ features</li> <li>Avoid global variables</li> </ul>"},{"location":"technical/code-structure.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Architecture - High-level design</li> <li>Database Schema - Data models</li> <li>Development Guide - Setup and development</li> <li>API Reference - Method documentation</li> </ul>"},{"location":"technical/database-schema.html","title":"Database Schema Documentation","text":""},{"location":"technical/database-schema.html#overview","title":"Overview","text":"<p>CisTrade uses Apache Kudu as the primary data store, accessed via Impala SQL queries. All tables are stored in the <code>gmp_cis</code> database schema in Kudu and queried using Impala.</p> <p>No Django ORM</p> <p>This system does NOT use Django ORM for data operations. All database access is through direct SQL queries via the repository pattern.</p>"},{"location":"technical/database-schema.html#database-design-principles","title":"Database Design Principles","text":""},{"location":"technical/database-schema.html#1-kudu-first-design","title":"1. Kudu-First Design","text":"<ul> <li>Tables are optimized for Kudu's columnar storage</li> <li>Partitioning by hash for even data distribution</li> <li>Primary keys are immutable</li> </ul>"},{"location":"technical/database-schema.html#2-audit-trail","title":"2. Audit Trail","text":"<ul> <li>Every table includes <code>created_at</code>, <code>updated_at</code> timestamps</li> <li>Separate audit log table (<code>cis_audit_log</code>) for all actions</li> <li>History tables track changes over time</li> </ul>"},{"location":"technical/database-schema.html#3-soft-deletes","title":"3. Soft Deletes","text":"<ul> <li>Records are marked <code>inactive</code> rather than physically deleted</li> <li><code>status</code> field tracks lifecycle (Active/Inactive)</li> <li><code>is_active</code> boolean for quick filtering</li> </ul>"},{"location":"technical/database-schema.html#4-denormalization","title":"4. Denormalization","text":"<ul> <li>Some data is denormalized for query performance</li> <li>Avoid complex joins</li> <li>Balance between normalization and performance</li> </ul>"},{"location":"technical/database-schema.html#database-schema","title":"Database Schema","text":""},{"location":"technical/database-schema.html#schema-diagram","title":"Schema Diagram","text":"<pre><code>erDiagram\n    CIS_PORTFOLIO ||--o{ CIS_PORTFOLIO_HISTORY : has\n    CIS_UDF_MASTER ||--o{ CIS_UDF_VALUE : defines\n    CIS_UDF_VALUE ||--o{ CIS_UDF_VALUE_HISTORY : tracks\n\n    CIS_PORTFOLIO {\n        string name PK\n        string description\n        string currency\n        string manager\n        string portfolio_client\n        double cash_balance\n        string status\n        boolean is_active\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    CIS_PORTFOLIO_HISTORY {\n        string id PK\n        string portfolio_code FK\n        string action\n        string status\n        string changes\n        string comments\n        string performed_by\n        timestamp performed_at\n    }\n\n    CIS_UDF_MASTER {\n        int udf_id PK\n        string udf_code\n        string udf_name\n        string entity_type\n        string data_type\n        boolean is_active\n    }\n\n    CIS_UDF_VALUE {\n        string value_id PK\n        int udf_id FK\n        string entity_type\n        string entity_code\n        string value\n        date effective_date\n        date end_date\n        boolean is_active\n    }\n\n    CIS_AUDIT_LOG {\n        string id PK\n        string user_id\n        string username\n        string action_type\n        string entity_type\n        string entity_id\n        timestamp timestamp\n    }\n\n    CIS_FX_RATE {\n        string rate_id PK\n        string from_currency\n        string to_currency\n        double rate\n        date effective_date\n        boolean is_active\n    }</code></pre>"},{"location":"technical/database-schema.html#table-specifications","title":"Table Specifications","text":""},{"location":"technical/database-schema.html#1-cis_portfolio","title":"1. cis_portfolio","text":"<p>Purpose: Main portfolio table storing all portfolio records</p> <p>Table Definition: <pre><code>CREATE TABLE gmp_cis.cis_portfolio (\n    -- Identification\n    name STRING NOT NULL,               -- Portfolio name (unique, serves as PK)\n    description STRING,                 -- Portfolio description\n\n    -- Financial Information\n    currency STRING,                    -- Base currency (USD, EUR, etc.)\n    manager STRING,                     -- Portfolio manager name\n    portfolio_client STRING,            -- Client name\n    cash_balance DOUBLE,                -- Current cash balance\n\n    -- Classification\n    cost_centre_code STRING,            -- Cost centre code\n    corp_code STRING,                   -- Corporate code\n    account_group STRING,               -- Account group classification\n    portfolio_group STRING,             -- Portfolio group\n    report_group STRING,                -- Report group\n    entity_group STRING,                -- Entity group\n    revaluation_status STRING,          -- Revaluation status\n\n    -- Status &amp; Lifecycle\n    status STRING,                      -- Active, Inactive\n    is_active BOOLEAN,                  -- Quick active flag\n\n    -- Audit Fields\n    created_at TIMESTAMP,               -- Creation timestamp\n    updated_at TIMESTAMP,               -- Last update timestamp\n    created_by STRING,                  -- Creator username\n    updated_by STRING,                  -- Last updater username\n\n    PRIMARY KEY (name)\n)\nPARTITION BY HASH(name) PARTITIONS 16\nSTORED AS KUDU;\n</code></pre></p> <p>Indexes: - Primary: <code>name</code> - Common queries on: <code>status</code>, <code>currency</code>, <code>manager</code></p> <p>Sample Data: <pre><code>INSERT INTO gmp_cis.cis_portfolio VALUES (\n    'US EQUITY FUND',                   -- name\n    'US Equity Portfolio',              -- description\n    'USD',                              -- currency\n    'John Smith',                       -- manager\n    'ABC Corporation',                  -- portfolio_client\n    1000000.00,                         -- cash_balance\n    'CC001',                            -- cost_centre_code\n    'CORP01',                           -- corp_code\n    'AG001',                            -- account_group\n    'PG001',                            -- portfolio_group\n    'RG001',                            -- report_group\n    'EG001',                            -- entity_group\n    'DAILY',                            -- revaluation_status\n    'Active',                           -- status\n    true,                               -- is_active\n    NOW(),                              -- created_at\n    NOW(),                              -- updated_at\n    'jsmith',                           -- created_by\n    'jsmith'                            -- updated_by\n);\n</code></pre></p> <p>Common Queries:</p> <pre><code>-- Get all active portfolios\nSELECT * FROM gmp_cis.cis_portfolio\nWHERE status = 'Active' AND is_active = true;\n\n-- Search portfolios\nSELECT * FROM gmp_cis.cis_portfolio\nWHERE name LIKE '%EQUITY%'\n   OR manager LIKE '%Smith%';\n\n-- Filter by currency\nSELECT * FROM gmp_cis.cis_portfolio\nWHERE currency = 'USD' AND status = 'Active';\n</code></pre>"},{"location":"technical/database-schema.html#2-cis_portfolio_history","title":"2. cis_portfolio_history","text":"<p>Purpose: Track all changes to portfolios (audit trail)</p> <p>Table Definition: <pre><code>CREATE TABLE gmp_cis.cis_portfolio_history (\n    -- Identity\n    id STRING NOT NULL,                 -- Unique history record ID\n    portfolio_code STRING,              -- Portfolio name (FK)\n\n    -- Change Information\n    action STRING,                      -- CLOSE, REACTIVATE, UPDATE, CREATE\n    status STRING,                      -- New status after action\n    changes STRING,                     -- JSON string of changes\n    comments STRING,                    -- User comments\n    performed_by STRING,                -- Username who performed action\n    performed_at TIMESTAMP,             -- When action was performed\n\n    PRIMARY KEY (id)\n)\nPARTITION BY HASH(id) PARTITIONS 4\nSTORED AS KUDU;\n</code></pre></p> <p>Sample Data: <pre><code>INSERT INTO gmp_cis.cis_portfolio_history VALUES (\n    'hist_001',                         -- id\n    'US EQUITY FUND',                   -- portfolio_code\n    'CLOSE',                            -- action\n    'Inactive',                         -- status\n    '{\"status\": {\"old\": \"Active\", \"new\": \"Inactive\"}}',  -- changes\n    'Month-end reconciliation',         -- comments\n    'jsmith',                           -- performed_by\n    NOW()                               -- performed_at\n);\n</code></pre></p> <p>Common Queries: <pre><code>-- Get history for a portfolio\nSELECT *\nFROM gmp_cis.cis_portfolio_history\nWHERE portfolio_code = 'US EQUITY FUND'\nORDER BY performed_at DESC;\n\n-- Get all close actions in the last 30 days\nSELECT *\nFROM gmp_cis.cis_portfolio_history\nWHERE action = 'CLOSE'\n  AND performed_at &gt;= DATE_SUB(NOW(), INTERVAL 30 DAY);\n</code></pre></p>"},{"location":"technical/database-schema.html#3-cis_audit_log","title":"3. cis_audit_log","text":"<p>Purpose: Comprehensive audit trail for all system actions</p> <p>Table Definition: <pre><code>CREATE TABLE gmp_cis.cis_audit_log (\n    -- Identity\n    id STRING NOT NULL,                 -- Unique audit ID\n\n    -- User Information\n    user_id STRING,                     -- User ID\n    username STRING,                    -- Username\n    user_email STRING,                  -- User email\n\n    -- Action Information\n    action_type STRING,                 -- CREATE, UPDATE, DELETE, APPROVE, etc.\n    entity_type STRING,                 -- PORTFOLIO, UDF, FX_RATE\n    entity_id STRING,                   -- ID of affected entity\n    entity_name STRING,                 -- Name of affected entity\n    action_description STRING,          -- Human-readable description\n\n    -- Request Information\n    request_method STRING,              -- GET, POST, PUT, DELETE\n    request_path STRING,                -- URL path\n    ip_address STRING,                  -- Client IP\n    user_agent STRING,                  -- Browser user agent\n\n    -- Outcome\n    status STRING,                      -- SUCCESS, FAILURE, ERROR\n    error_message STRING,               -- Error details if failed\n\n    -- Timestamp\n    timestamp TIMESTAMP,                -- When action occurred\n\n    PRIMARY KEY (id)\n)\nPARTITION BY HASH(id) PARTITIONS 8\nSTORED AS KUDU;\n</code></pre></p> <p>Sample Data: <pre><code>INSERT INTO gmp_cis.cis_audit_log VALUES (\n    'audit_001',                        -- id\n    '123',                              -- user_id\n    'jsmith',                           -- username\n    'jsmith@company.com',               -- user_email\n    'CREATE',                           -- action_type\n    'PORTFOLIO',                        -- entity_type\n    'US EQUITY FUND',                   -- entity_id\n    'US EQUITY FUND',                   -- entity_name\n    'Created portfolio US EQUITY FUND', -- action_description\n    'POST',                             -- request_method\n    '/portfolio/create/',               -- request_path\n    '192.168.1.100',                    -- ip_address\n    'Mozilla/5.0...',                   -- user_agent\n    'SUCCESS',                          -- status\n    NULL,                               -- error_message\n    NOW()                               -- timestamp\n);\n</code></pre></p> <p>Common Queries: <pre><code>-- Get recent audit logs\nSELECT *\nFROM gmp_cis.cis_audit_log\nORDER BY timestamp DESC\nLIMIT 100;\n\n-- Get audit logs for a user\nSELECT *\nFROM gmp_cis.cis_audit_log\nWHERE username = 'jsmith'\nORDER BY timestamp DESC;\n\n-- Get failed actions\nSELECT *\nFROM gmp_cis.cis_audit_log\nWHERE status = 'FAILURE'\n  AND timestamp &gt;= DATE_SUB(NOW(), INTERVAL 7 DAY);\n</code></pre></p>"},{"location":"technical/database-schema.html#4-cis_udf_master","title":"4. cis_udf_master","text":"<p>Purpose: Define user-defined fields (custom fields)</p> <p>Table Definition: <pre><code>CREATE TABLE gmp_cis.cis_udf_master (\n    -- Identity\n    udf_id INT NOT NULL,                -- Unique UDF ID\n    udf_code STRING,                    -- UDF code (unique)\n    udf_name STRING,                    -- UDF name\n\n    -- Classification\n    entity_type STRING,                 -- PORTFOLIO, TRADE, POSITION\n    category STRING,                    -- Grouping category\n    data_type STRING,                   -- STRING, NUMBER, DATE, BOOLEAN\n\n    -- Validation\n    min_value STRING,                   -- Minimum value (for numeric)\n    max_value STRING,                   -- Maximum value (for numeric)\n    allowed_values STRING,              -- Comma-separated list\n    is_mandatory BOOLEAN,               -- Required field?\n\n    -- Display\n    display_order INT,                  -- Order in UI\n    description STRING,                 -- Help text\n\n    -- Status\n    is_active BOOLEAN,                  -- Active/Inactive\n    created_at TIMESTAMP,\n    updated_at TIMESTAMP,\n    created_by STRING,\n    updated_by STRING,\n\n    PRIMARY KEY (udf_id)\n)\nPARTITION BY HASH(udf_id) PARTITIONS 4\nSTORED AS KUDU;\n</code></pre></p> <p>Sample Data: <pre><code>INSERT INTO gmp_cis.cis_udf_master VALUES (\n    1,                                  -- udf_id\n    'RISK_RATING',                      -- udf_code\n    'Risk Rating',                      -- udf_name\n    'PORTFOLIO',                        -- entity_type\n    'RISK',                             -- category\n    'STRING',                           -- data_type\n    NULL,                               -- min_value\n    NULL,                               -- max_value\n    'LOW,MEDIUM,HIGH',                  -- allowed_values\n    true,                               -- is_mandatory\n    1,                                  -- display_order\n    'Risk rating for the portfolio',    -- description\n    true,                               -- is_active\n    NOW(),                              -- created_at\n    NOW(),                              -- updated_at\n    'admin',                            -- created_by\n    'admin'                             -- updated_by\n);\n</code></pre></p>"},{"location":"technical/database-schema.html#5-cis_udf_value","title":"5. cis_udf_value","text":"<p>Purpose: Store actual UDF values for entities</p> <p>Table Definition: <pre><code>CREATE TABLE gmp_cis.cis_udf_value (\n    -- Identity\n    value_id STRING NOT NULL,           -- Unique value ID\n    udf_id INT,                         -- Foreign key to cis_udf_master\n\n    -- Entity Reference\n    entity_type STRING,                 -- PORTFOLIO, TRADE, etc.\n    entity_code STRING,                 -- Entity identifier\n\n    -- Value\n    value STRING,                       -- The actual UDF value\n    numeric_value DOUBLE,               -- Numeric representation\n    date_value DATE,                    -- Date representation\n\n    -- Validity Period\n    effective_date DATE,                -- Start date\n    end_date DATE,                      -- End date (NULL = current)\n\n    -- Status\n    is_active BOOLEAN,\n    created_at TIMESTAMP,\n    updated_at TIMESTAMP,\n    created_by STRING,\n    updated_by STRING,\n\n    PRIMARY KEY (value_id)\n)\nPARTITION BY HASH(value_id) PARTITIONS 4\nSTORED AS KUDU;\n</code></pre></p> <p>Sample Data: <pre><code>INSERT INTO gmp_cis.cis_udf_value VALUES (\n    'val_001',                          -- value_id\n    1,                                  -- udf_id (RISK_RATING)\n    'PORTFOLIO',                        -- entity_type\n    'US EQUITY FUND',                   -- entity_code\n    'HIGH',                             -- value\n    NULL,                               -- numeric_value\n    NULL,                               -- date_value\n    '2025-01-01',                       -- effective_date\n    NULL,                               -- end_date (current)\n    true,                               -- is_active\n    NOW(),                              -- created_at\n    NOW(),                              -- updated_at\n    'jsmith',                           -- created_by\n    'jsmith'                            -- updated_by\n);\n</code></pre></p>"},{"location":"technical/database-schema.html#6-cis_fx_rate","title":"6. cis_fx_rate","text":"<p>Purpose: Store foreign exchange rates</p> <p>Table Definition: <pre><code>CREATE TABLE gmp_cis.cis_fx_rate (\n    -- Identity\n    rate_id STRING NOT NULL,            -- Unique rate ID\n\n    -- Currency Pair\n    from_currency STRING,               -- Base currency\n    to_currency STRING,                 -- Quote currency\n\n    -- Rate\n    rate DOUBLE,                        -- Exchange rate\n    inverse_rate DOUBLE,                -- 1/rate\n\n    -- Validity\n    effective_date DATE,                -- Effective date\n    source STRING,                      -- Data source (BLOOMBERG, REUTERS)\n\n    -- Status\n    is_active BOOLEAN,\n    created_at TIMESTAMP,\n    updated_at TIMESTAMP,\n    created_by STRING,\n    updated_by STRING,\n\n    PRIMARY KEY (rate_id)\n)\nPARTITION BY HASH(rate_id) PARTITIONS 4\nSTORED AS KUDU;\n</code></pre></p> <p>Sample Data: <pre><code>INSERT INTO gmp_cis.cis_fx_rate VALUES (\n    'rate_001',                         -- rate_id\n    'USD',                              -- from_currency\n    'EUR',                              -- to_currency\n    0.85,                               -- rate\n    1.18,                               -- inverse_rate\n    '2025-12-27',                       -- effective_date\n    'BLOOMBERG',                        -- source\n    true,                               -- is_active\n    NOW(),                              -- created_at\n    NOW(),                              -- updated_at\n    'system',                           -- created_by\n    'system'                            -- updated_by\n);\n</code></pre></p> <p>Common Queries: <pre><code>-- Get current rate for USD/EUR\nSELECT rate\nFROM gmp_cis.cis_fx_rate\nWHERE from_currency = 'USD'\n  AND to_currency = 'EUR'\n  AND is_active = true\n  AND effective_date &lt;= CURRENT_DATE\nORDER BY effective_date DESC\nLIMIT 1;\n</code></pre></p>"},{"location":"technical/database-schema.html#data-types","title":"Data Types","text":""},{"location":"technical/database-schema.html#kudu-data-types-used","title":"Kudu Data Types Used","text":"Kudu Type Usage Example <code>STRING</code> Text fields, codes, names Portfolio name, currency code <code>INT</code> Integer IDs, counts UDF ID, display order <code>DOUBLE</code> Decimal numbers, amounts Cash balance, FX rates <code>BOOLEAN</code> True/false flags is_active, is_mandatory <code>TIMESTAMP</code> Date and time created_at, updated_at <code>DATE</code> Date only effective_date, end_date"},{"location":"technical/database-schema.html#partitioning-strategy","title":"Partitioning Strategy","text":""},{"location":"technical/database-schema.html#hash-partitioning","title":"Hash Partitioning","text":"<p>All tables use HASH partitioning for even data distribution:</p> <pre><code>PARTITION BY HASH(primary_key) PARTITIONS N\n</code></pre> <p>Partition Counts: - Large tables (audit_log, portfolio): 8-16 partitions - Medium tables (udf_value, fx_rate): 4 partitions - Small tables (udf_master, history): 4 partitions</p> <p>Benefits: - \u2705 Even data distribution - \u2705 Parallel query execution - \u2705 Scalability - \u2705 Better insert performance</p>"},{"location":"technical/database-schema.html#indexing-strategy","title":"Indexing Strategy","text":""},{"location":"technical/database-schema.html#primary-keys","title":"Primary Keys","text":"<p>All tables have a primary key: - Unique identifier for each row - Enables fast lookups by key - Required for Kudu upserts</p>"},{"location":"technical/database-schema.html#secondary-indexes","title":"Secondary Indexes","text":"<p>Kudu supports bloom filter indexes (not yet implemented):</p> <pre><code>-- Future: Add bloom filter for faster lookups\nCREATE INDEX idx_portfolio_status\nON gmp_cis.cis_portfolio (status, is_active);\n</code></pre>"},{"location":"technical/database-schema.html#naming-conventions","title":"Naming Conventions","text":""},{"location":"technical/database-schema.html#tables","title":"Tables","text":"<ul> <li>Prefix: <code>cis_</code></li> <li>Lowercase with underscores: <code>cis_portfolio</code>, <code>cis_udf_master</code></li> <li>Descriptive names</li> </ul>"},{"location":"technical/database-schema.html#columns","title":"Columns","text":"<ul> <li>Lowercase with underscores: <code>portfolio_code</code>, <code>created_at</code></li> <li>Suffix for special types:</li> <li><code>_id</code> for IDs</li> <li><code>_at</code> for timestamps</li> <li><code>_by</code> for users</li> <li><code>_date</code> for dates</li> </ul>"},{"location":"technical/database-schema.html#performance-optimization","title":"Performance Optimization","text":""},{"location":"technical/database-schema.html#query-best-practices","title":"Query Best Practices","text":"<pre><code>-- \u2705 Good: Filter on partitioned column\nSELECT * FROM cis_portfolio WHERE name = 'US EQUITY FUND';\n\n-- \u2705 Good: Use indexed columns in WHERE\nSELECT * FROM cis_portfolio WHERE status = 'Active' AND is_active = true;\n\n-- \u274c Bad: Full table scan\nSELECT * FROM cis_portfolio WHERE description LIKE '%equity%';\n\n-- \u2705 Better: Limit results\nSELECT * FROM cis_portfolio WHERE description LIKE '%equity%' LIMIT 100;\n</code></pre>"},{"location":"technical/database-schema.html#batch-operations","title":"Batch Operations","text":"<pre><code>-- Instead of multiple single inserts:\nINSERT INTO cis_audit_log VALUES (...);\nINSERT INTO cis_audit_log VALUES (...);\n\n-- Use batch insert:\nINSERT INTO cis_audit_log VALUES\n    ('id1', ...),\n    ('id2', ...),\n    ('id3', ...);\n</code></pre>"},{"location":"technical/database-schema.html#backup-and-recovery","title":"Backup and Recovery","text":""},{"location":"technical/database-schema.html#backup-strategy","title":"Backup Strategy","text":"<p>Kudu Snapshots: - Periodic snapshots of Kudu tablets - Point-in-time recovery - Managed by Kudu cluster</p> <p>Export to HDFS: <pre><code>-- Export table to Parquet\nINSERT OVERWRITE TABLE backup.cis_portfolio_backup\nSELECT * FROM gmp_cis.cis_portfolio;\n</code></pre></p>"},{"location":"technical/database-schema.html#recovery","title":"Recovery","text":"<pre><code>-- Restore from backup\nINSERT INTO gmp_cis.cis_portfolio\nSELECT * FROM backup.cis_portfolio_backup\nWHERE name NOT IN (SELECT name FROM gmp_cis.cis_portfolio);\n</code></pre>"},{"location":"technical/database-schema.html#migration-scripts","title":"Migration Scripts","text":""},{"location":"technical/database-schema.html#create-all-tables","title":"Create All Tables","text":"<pre><code>-- Run in Impala\nSOURCE /path/to/cis_hive_to_kudu_tables_fixed.sql;\n</code></pre>"},{"location":"technical/database-schema.html#verify-tables","title":"Verify Tables","text":"<pre><code>-- Check table exists\nSHOW TABLES IN gmp_cis LIKE 'cis_%';\n\n-- Check row counts\nSELECT COUNT(*) FROM gmp_cis.cis_portfolio;\nSELECT COUNT(*) FROM gmp_cis.cis_audit_log;\n</code></pre>"},{"location":"technical/database-schema.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Architecture - System architecture and patterns</li> <li>API Reference - Repository layer methods</li> <li>Development Guide - Local setup</li> </ul> <p>Last Updated: 2025-12-27 | Version: 1.0.0</p>"},{"location":"technical/deployment.html","title":"Deployment Guide","text":"<p>Deploy CisTrade to production environment.</p>"},{"location":"technical/deployment.html#pre-deployment-checklist","title":"Pre-Deployment Checklist","text":"<ul> <li> All tests passing</li> <li> Code reviewed and approved</li> <li> Database migrations tested</li> <li> Static files collected</li> <li> Environment variables configured</li> <li> Backup plan ready</li> <li> Rollback plan documented</li> </ul>"},{"location":"technical/deployment.html#production-environment","title":"Production Environment","text":""},{"location":"technical/deployment.html#server-requirements","title":"Server Requirements","text":"<ul> <li>OS: Linux (RHEL/Ubuntu)</li> <li>Python: 3.10+</li> <li>Web Server: Nginx</li> <li>WSGI Server: Gunicorn</li> <li>Database: Impala cluster access</li> <li>Memory: 8GB+ RAM</li> <li>Storage: 100GB+ SSD</li> </ul>"},{"location":"technical/deployment.html#network-requirements","title":"Network Requirements","text":"<ul> <li>Impala: Port 21050 (JDBC), 21000 (shell)</li> <li>HTTP: Port 80</li> <li>HTTPS: Port 443</li> <li>SSH: Port 22</li> </ul>"},{"location":"technical/deployment.html#deployment-steps","title":"Deployment Steps","text":""},{"location":"technical/deployment.html#1-prepare-server","title":"1. Prepare Server","text":"<pre><code># Update system\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Install dependencies\nsudo apt install python3 python3-pip python3-venv nginx -y\n</code></pre>"},{"location":"technical/deployment.html#2-create-application-user","title":"2. Create Application User","text":"<pre><code>sudo useradd -m -s /bin/bash cistrade\nsudo su - cistrade\n</code></pre>"},{"location":"technical/deployment.html#3-deploy-application","title":"3. Deploy Application","text":"<pre><code># Clone repository\ngit clone https://github.com/yourcompany/cistrade.git\ncd cistrade\n\n# Create virtual environment\npython3 -m venv .venv\nsource .venv/bin/activate\n\n# Install dependencies\npip install -r requirements.txt\npip install gunicorn\n</code></pre>"},{"location":"technical/deployment.html#4-configure-environment","title":"4. Configure Environment","text":"<p>Create <code>/home/cistrade/cistrade/.env</code>:</p> <pre><code>DJANGO_DEBUG=false\nDJANGO_SECRET_KEY=&lt;generate-secure-key&gt;\nDJANGO_ALLOWED_HOSTS=cistrade.yourcompany.com,10.x.x.x\n\nIMPALA_HOST=prod-impala-host\nIMPALA_PORT=21050\nIMPALA_DATABASE=gmp_cis\n\n# Security\nCSRF_COOKIE_SECURE=true\nSESSION_COOKIE_SECURE=true\n</code></pre>"},{"location":"technical/deployment.html#5-collect-static-files","title":"5. Collect Static Files","text":"<pre><code>python manage.py collectstatic --noinput\n</code></pre>"},{"location":"technical/deployment.html#6-run-migrations","title":"6. Run Migrations","text":"<pre><code>python manage.py migrate\n</code></pre>"},{"location":"technical/deployment.html#7-test-application","title":"7. Test Application","text":"<pre><code>python manage.py check --deploy\n</code></pre>"},{"location":"technical/deployment.html#8-configure-gunicorn","title":"8. Configure Gunicorn","text":"<p>Create <code>/etc/systemd/system/cistrade.service</code>:</p> <pre><code>[Unit]\nDescription=CisTrade Gunicorn daemon\nAfter=network.target\n\n[Service]\nUser=cistrade\nGroup=cistrade\nWorkingDirectory=/home/cistrade/cistrade\nEnvironment=\"PATH=/home/cistrade/cistrade/.venv/bin\"\nExecStart=/home/cistrade/cistrade/.venv/bin/gunicorn \\\n    --workers 4 \\\n    --bind 127.0.0.1:8000 \\\n    --timeout 120 \\\n    --access-logfile /var/log/cistrade/access.log \\\n    --error-logfile /var/log/cistrade/error.log \\\n    config.wsgi:application\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Start service:</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl start cistrade\nsudo systemctl enable cistrade\n</code></pre>"},{"location":"technical/deployment.html#9-configure-nginx","title":"9. Configure Nginx","text":"<p>Create <code>/etc/nginx/sites-available/cistrade</code>:</p> <pre><code>server {\n    listen 80;\n    server_name cistrade.yourcompany.com;\n\n    client_max_body_size 10M;\n\n    location /static/ {\n        alias /home/cistrade/cistrade/static/;\n    }\n\n    location / {\n        proxy_pass http://127.0.0.1:8000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre> <p>Enable site:</p> <pre><code>sudo ln -s /etc/nginx/sites-available/cistrade /etc/nginx/sites-enabled/\nsudo nginx -t\nsudo systemctl reload nginx\n</code></pre>"},{"location":"technical/deployment.html#10-ssl-configuration-https","title":"10. SSL Configuration (HTTPS)","text":"<pre><code># Install certbot\nsudo apt install certbot python3-certbot-nginx -y\n\n# Get SSL certificate\nsudo certbot --nginx -d cistrade.yourcompany.com\n</code></pre>"},{"location":"technical/deployment.html#post-deployment","title":"Post-Deployment","text":""},{"location":"technical/deployment.html#verify-deployment","title":"Verify Deployment","text":"<ol> <li>Access https://cistrade.yourcompany.com</li> <li>Test login</li> <li>Check all modules functional</li> <li>Review logs for errors</li> </ol>"},{"location":"technical/deployment.html#monitoring-setup","title":"Monitoring Setup","text":"<p>Log Monitoring: <pre><code>tail -f /var/log/cistrade/error.log\ntail -f /var/log/nginx/error.log\n</code></pre></p> <p>Service Status: <pre><code>sudo systemctl status cistrade\nsudo systemctl status nginx\n</code></pre></p>"},{"location":"technical/deployment.html#backup-configuration","title":"Backup Configuration","text":"<p>Daily Backups: - Application code (Git) - Environment configuration - Database snapshots</p> <p>Backup Script (<code>/home/cistrade/backup.sh</code>): <pre><code>#!/bin/bash\nDATE=$(date +%Y%m%d)\nBACKUP_DIR=/backups/cistrade/$DATE\n\nmkdir -p $BACKUP_DIR\ncp /home/cistrade/cistrade/.env $BACKUP_DIR/\n# Add database backup commands\n</code></pre></p>"},{"location":"technical/deployment.html#rollback-procedure","title":"Rollback Procedure","text":"<p>If deployment fails:</p> <ol> <li> <p>Stop services: <pre><code>sudo systemctl stop cistrade\n</code></pre></p> </li> <li> <p>Restore previous version: <pre><code>cd /home/cistrade/cistrade\ngit checkout &lt;previous-tag&gt;\n</code></pre></p> </li> <li> <p>Rollback migrations (if needed): <pre><code>python manage.py migrate &lt;app&gt; &lt;previous-migration&gt;\n</code></pre></p> </li> <li> <p>Restart services: <pre><code>sudo systemctl start cistrade\n</code></pre></p> </li> </ol>"},{"location":"technical/deployment.html#scaling","title":"Scaling","text":""},{"location":"technical/deployment.html#horizontal-scaling","title":"Horizontal Scaling","text":"<p>Add more Gunicorn workers:</p> <pre><code>ExecStart=... --workers 8  # Increase from 4\n</code></pre>"},{"location":"technical/deployment.html#load-balancing","title":"Load Balancing","text":"<p>Configure Nginx upstream:</p> <pre><code>upstream cistrade_backend {\n    server 10.x.x.1:8000;\n    server 10.x.x.2:8000;\n}\n\nlocation / {\n    proxy_pass http://cistrade_backend;\n}\n</code></pre>"},{"location":"technical/deployment.html#security-hardening","title":"Security Hardening","text":"<ol> <li> <p>Firewall: <pre><code>sudo ufw allow 22/tcp   # SSH\nsudo ufw allow 80/tcp   # HTTP\nsudo ufw allow 443/tcp  # HTTPS\nsudo ufw enable\n</code></pre></p> </li> <li> <p>Disable DEBUG: <pre><code>DJANGO_DEBUG=false\n</code></pre></p> </li> <li> <p>Secure SECRET_KEY: <pre><code># Generate secure key\npython -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'\n</code></pre></p> </li> <li> <p>Regular Updates: <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\npip list --outdated\n</code></pre></p> </li> </ol>"},{"location":"technical/deployment.html#troubleshooting","title":"Troubleshooting","text":""},{"location":"technical/deployment.html#service-wont-start","title":"Service Won't Start","text":"<pre><code># Check logs\nsudo journalctl -u cistrade -n 50 --no-pager\n\n# Check permissions\nls -la /home/cistrade/cistrade\n</code></pre>"},{"location":"technical/deployment.html#nginx-errors","title":"Nginx Errors","text":"<pre><code># Test configuration\nsudo nginx -t\n\n# Check logs\ntail -f /var/log/nginx/error.log\n</code></pre>"},{"location":"technical/deployment.html#database-connection-issues","title":"Database Connection Issues","text":"<ol> <li>Verify Impala host reachable</li> <li>Check firewall rules</li> <li>Test connection manually</li> </ol>"},{"location":"technical/deployment.html#maintenance","title":"Maintenance","text":""},{"location":"technical/deployment.html#update-application","title":"Update Application","text":"<pre><code>cd /home/cistrade/cistrade\ngit pull origin main\nsource .venv/bin/activate\npip install -r requirements.txt\npython manage.py migrate\npython manage.py collectstatic --noinput\nsudo systemctl restart cistrade\n</code></pre>"},{"location":"technical/deployment.html#certificate-renewal","title":"Certificate Renewal","text":"<p>Certbot auto-renews. Test with:</p> <pre><code>sudo certbot renew --dry-run\n</code></pre>"},{"location":"technical/deployment.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Development Guide</li> <li>Architecture</li> <li>Testing</li> </ul>"},{"location":"technical/development-guide.html","title":"Development Guide","text":"<p>Setup and development workflow for CisTrade contributors.</p>"},{"location":"technical/development-guide.html#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10+</li> <li>Virtual environment (venv)</li> <li>Access to Impala cluster</li> <li>Git</li> <li>IDE (VS Code recommended)</li> </ul>"},{"location":"technical/development-guide.html#initial-setup","title":"Initial Setup","text":""},{"location":"technical/development-guide.html#1-clone-repository","title":"1. Clone Repository","text":"<pre><code>git clone https://github.com/yourcompany/cistrade.git\ncd cistrade\n</code></pre>"},{"location":"technical/development-guide.html#2-create-virtual-environment","title":"2. Create Virtual Environment","text":"<pre><code>python3 -m venv .venv\nsource .venv/bin/activate  # Linux/Mac\n.venv\\Scripts\\activate     # Windows\n</code></pre>"},{"location":"technical/development-guide.html#3-install-dependencies","title":"3. Install Dependencies","text":"<pre><code>pip install -r requirements.txt\n</code></pre>"},{"location":"technical/development-guide.html#4-configure-environment","title":"4. Configure Environment","text":"<p>Create <code>.env</code> file:</p> <pre><code>DJANGO_DEBUG=true\nDJANGO_SECRET_KEY=your-secret-key\nIMPALA_HOST=your-impala-host\nIMPALA_PORT=21050\n</code></pre>"},{"location":"technical/development-guide.html#5-database-setup","title":"5. Database Setup","text":"<pre><code># Run migrations\npython manage.py migrate\n\n# Create superuser (optional)\npython manage.py createsuperuser\n</code></pre>"},{"location":"technical/development-guide.html#6-load-reference-data","title":"6. Load Reference Data","text":"<pre><code># Load ACL data\nimpala-shell -f sql/hive_ddl/02_acl_tables.sql\n\n# Load reference data (external tables)\nimpala-shell -f sql/hive_ddl/03_reference_external_tables.sql\n</code></pre>"},{"location":"technical/development-guide.html#development-workflow","title":"Development Workflow","text":""},{"location":"technical/development-guide.html#running-development-server","title":"Running Development Server","text":"<pre><code>python manage.py runserver 0.0.0.0:8000\n</code></pre> <p>Access at: http://localhost:8000</p>"},{"location":"technical/development-guide.html#auto-login-for-development","title":"Auto-Login for Development","text":"<p>Navigate to: http://localhost:8000/auto-login/</p> <p>Logs in as TMP3RC user automatically.</p>"},{"location":"technical/development-guide.html#code-changes","title":"Code Changes","text":"<ol> <li> <p>Create feature branch <pre><code>git checkout -b feature/my-feature\n</code></pre></p> </li> <li> <p>Make changes</p> </li> <li>Test locally</li> <li> <p>Commit and push <pre><code>git add .\ngit commit -m \"feat: add new feature\"\ngit push origin feature/my-feature\n</code></pre></p> </li> <li> <p>Create pull request</p> </li> </ol>"},{"location":"technical/development-guide.html#project-structure","title":"Project Structure","text":"<p>See Code Structure for detailed layout.</p>"},{"location":"technical/development-guide.html#common-tasks","title":"Common Tasks","text":""},{"location":"technical/development-guide.html#add-new-view","title":"Add New View","text":"<ol> <li>Create view function in <code>{app}/views.py</code></li> <li>Add URL pattern in <code>{app}/urls.py</code></li> <li>Create template in <code>{app}/templates/{app}/</code></li> <li>Add permission decorator if needed</li> </ol>"},{"location":"technical/development-guide.html#add-new-service-method","title":"Add New Service Method","text":"<ol> <li>Add method to <code>{app}/services/{service}.py</code></li> <li>Add unit tests</li> <li>Update API documentation</li> </ol>"},{"location":"technical/development-guide.html#add-new-repository-method","title":"Add New Repository Method","text":"<ol> <li>Add method to <code>{app}/repositories/{repository}.py</code></li> <li>Write SQL query</li> <li>Test with sample data</li> </ol>"},{"location":"technical/development-guide.html#testing","title":"Testing","text":""},{"location":"technical/development-guide.html#run-all-tests","title":"Run All Tests","text":"<pre><code>python manage.py test\n</code></pre>"},{"location":"technical/development-guide.html#run-specific-app-tests","title":"Run Specific App Tests","text":"<pre><code>python manage.py test portfolio\n</code></pre>"},{"location":"technical/development-guide.html#run-single-test","title":"Run Single Test","text":"<pre><code>python manage.py test portfolio.tests.test_service.PortfolioServiceTest.test_create_portfolio\n</code></pre>"},{"location":"technical/development-guide.html#database","title":"Database","text":""},{"location":"technical/development-guide.html#access-impala-shell","title":"Access Impala Shell","text":"<pre><code>impala-shell -i your-impala-host\n</code></pre>"},{"location":"technical/development-guide.html#common-queries","title":"Common Queries","text":"<pre><code>-- Check portfolio count\nSELECT COUNT(*) FROM gmp_cis.cis_portfolio;\n\n-- View sample portfolios\nSELECT * FROM gmp_cis.cis_portfolio LIMIT 10;\n\n-- Check audit logs\nSELECT * FROM gmp_cis.cis_audit_log \nORDER BY created_at DESC LIMIT 20;\n</code></pre>"},{"location":"technical/development-guide.html#debugging","title":"Debugging","text":""},{"location":"technical/development-guide.html#enable-debug-mode","title":"Enable Debug Mode","text":"<p>In <code>.env</code>: <pre><code>DJANGO_DEBUG=true\n</code></pre></p>"},{"location":"technical/development-guide.html#view-logs","title":"View Logs","text":"<pre><code>tail -f logs/cistrade.log\n</code></pre>"},{"location":"technical/development-guide.html#django-shell","title":"Django Shell","text":"<pre><code>python manage.py shell\n</code></pre> <p>Test queries: <pre><code>from portfolio.repositories import portfolio_hive_repository\nportfolios = portfolio_hive_repository.get_all_portfolios(limit=5)\nprint(portfolios)\n</code></pre></p>"},{"location":"technical/development-guide.html#code-quality","title":"Code Quality","text":""},{"location":"technical/development-guide.html#run-linter","title":"Run Linter","text":"<pre><code>flake8 .\n</code></pre>"},{"location":"technical/development-guide.html#format-code","title":"Format Code","text":"<pre><code>black .\n</code></pre>"},{"location":"technical/development-guide.html#type-checking","title":"Type Checking","text":"<pre><code>mypy .\n</code></pre>"},{"location":"technical/development-guide.html#documentation","title":"Documentation","text":""},{"location":"technical/development-guide.html#build-docs","title":"Build Docs","text":"<pre><code>cd docs\nmkdocs build\n</code></pre>"},{"location":"technical/development-guide.html#serve-docs-locally","title":"Serve Docs Locally","text":"<pre><code>cd docs\nmkdocs serve\n</code></pre> <p>Access at: http://localhost:8001</p>"},{"location":"technical/development-guide.html#deployment","title":"Deployment","text":"<p>See Deployment Guide for production deployment.</p>"},{"location":"technical/development-guide.html#troubleshooting","title":"Troubleshooting","text":""},{"location":"technical/development-guide.html#impala-connection-fails","title":"Impala Connection Fails","text":"<ol> <li>Check <code>IMPALA_HOST</code> and <code>IMPALA_PORT</code> in <code>.env</code></li> <li>Verify network connectivity</li> <li>Check firewall rules</li> <li>Verify Impala cluster is running</li> </ol>"},{"location":"technical/development-guide.html#migration-errors","title":"Migration Errors","text":"<pre><code># Reset migrations (dev only!)\npython manage.py migrate --fake-initial\n</code></pre>"},{"location":"technical/development-guide.html#static-files-not-loading","title":"Static Files Not Loading","text":"<pre><code>python manage.py collectstatic\n</code></pre>"},{"location":"technical/development-guide.html#contributing","title":"Contributing","text":"<ol> <li>Follow code style guide</li> <li>Write tests for new features</li> <li>Update documentation</li> <li>Submit pull request with clear description</li> </ol>"},{"location":"technical/development-guide.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Code Structure</li> <li>Architecture</li> <li>Testing</li> <li>Deployment</li> </ul>"},{"location":"technical/testing.html","title":"Testing Guide","text":"<p>Comprehensive testing strategy for CisTrade application.</p>"},{"location":"technical/testing.html#testing-philosophy","title":"Testing Philosophy","text":"<ul> <li>Test Early: Write tests during development</li> <li>Test Often: Run tests before every commit</li> <li>Test Everything: Unit, integration, and end-to-end tests</li> <li>Maintain Coverage: Target 80%+ code coverage</li> </ul>"},{"location":"technical/testing.html#test-types","title":"Test Types","text":""},{"location":"technical/testing.html#unit-tests","title":"Unit Tests","text":"<p>Test individual functions/methods in isolation.</p> <p>Example (<code>portfolio/tests/test_service.py</code>): <pre><code>from django.test import TestCase\nfrom portfolio.services import PortfolioService\n\nclass PortfolioServiceTest(TestCase):\n    def test_create_portfolio_valid_data(self):\n        data = {\n            'code': 'TEST001',\n            'name': 'Test Portfolio',\n            'currency': 'SGD'\n        }\n        portfolio = PortfolioService.create_portfolio(user, data)\n        self.assertEqual(portfolio.code, 'TEST001')\n        self.assertEqual(portfolio.status, 'DRAFT')\n</code></pre></p>"},{"location":"technical/testing.html#integration-tests","title":"Integration Tests","text":"<p>Test multiple components working together.</p> <p>Example (<code>portfolio/tests/test_integration.py</code>): <pre><code>class PortfolioIntegrationTest(TestCase):\n    def test_create_and_approve_portfolio(self):\n        # Create as maker\n        portfolio = PortfolioService.create_portfolio(maker, data)\n\n        # Submit for approval\n        PortfolioService.submit_for_approval(portfolio, maker)\n\n        # Approve as checker\n        approved = PortfolioService.approve_portfolio(portfolio, checker, \"Approved\")\n\n        self.assertEqual(approved.status, 'ACTIVE')\n</code></pre></p>"},{"location":"technical/testing.html#view-tests","title":"View Tests","text":"<p>Test HTTP requests and responses.</p> <p>Example (<code>portfolio/tests/test_views.py</code>): <pre><code>class PortfolioViewTest(TestCase):\n    def test_portfolio_list_requires_login(self):\n        response = self.client.get('/portfolio/')\n        self.assertRedirects(response, '/login/')\n\n    def test_portfolio_list_authenticated(self):\n        self.client.login(username='test', password='pass')\n        response = self.client.get('/portfolio/')\n        self.assertEqual(response.status_code, 200)\n</code></pre></p>"},{"location":"technical/testing.html#running-tests","title":"Running Tests","text":""},{"location":"technical/testing.html#all-tests","title":"All Tests","text":"<pre><code>python manage.py test\n</code></pre>"},{"location":"technical/testing.html#specific-app","title":"Specific App","text":"<pre><code>python manage.py test portfolio\n</code></pre>"},{"location":"technical/testing.html#specific-test-file","title":"Specific Test File","text":"<pre><code>python manage.py test portfolio.tests.test_service\n</code></pre>"},{"location":"technical/testing.html#single-test-method","title":"Single Test Method","text":"<pre><code>python manage.py test portfolio.tests.test_service.PortfolioServiceTest.test_create_portfolio\n</code></pre>"},{"location":"technical/testing.html#with-coverage","title":"With Coverage","text":"<pre><code>coverage run --source='.' manage.py test\ncoverage report\ncoverage html  # Generate HTML report\n</code></pre>"},{"location":"technical/testing.html#test-organization","title":"Test Organization","text":"<pre><code>{app}/tests/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 test_models.py        # Model tests\n\u251c\u2500\u2500 test_views.py         # View tests\n\u251c\u2500\u2500 test_services.py      # Service layer tests\n\u251c\u2500\u2500 test_repositories.py  # Repository tests\n\u2514\u2500\u2500 test_integration.py   # Integration tests\n</code></pre>"},{"location":"technical/testing.html#test-fixtures","title":"Test Fixtures","text":""},{"location":"technical/testing.html#using-factories","title":"Using Factories","text":"<p>Install: <pre><code>pip install factory-boy\n</code></pre></p> <p>Define Factory (<code>portfolio/tests/factories.py</code>): <pre><code>import factory\nfrom portfolio.models import Portfolio\n\nclass PortfolioFactory(factory.django.DjangoModelFactory):\n    class Meta:\n        model = Portfolio\n\n    code = factory.Sequence(lambda n: f'PORT{n:03d}')\n    name = factory.Faker('company')\n    currency = 'SGD'\n    status = 'DRAFT'\n</code></pre></p> <p>Use in Tests: <pre><code>def test_with_factory(self):\n    portfolio = PortfolioFactory.create()\n    self.assertIsNotNone(portfolio.code)\n</code></pre></p>"},{"location":"technical/testing.html#using-fixtures","title":"Using Fixtures","text":"<p>Define Fixture (<code>portfolio/fixtures/test_portfolios.json</code>): <pre><code>[\n  {\n    \"model\": \"portfolio.portfolio\",\n    \"pk\": 1,\n    \"fields\": {\n      \"code\": \"TEST001\",\n      \"name\": \"Test Portfolio\",\n      \"currency\": \"SGD\",\n      \"status\": \"DRAFT\"\n    }\n  }\n]\n</code></pre></p> <p>Load in Test: <pre><code>class PortfolioTest(TestCase):\n    fixtures = ['test_portfolios.json']\n\n    def test_portfolio_exists(self):\n        portfolio = Portfolio.objects.get(code='TEST001')\n        self.assertEqual(portfolio.name, 'Test Portfolio')\n</code></pre></p>"},{"location":"technical/testing.html#mocking","title":"Mocking","text":""},{"location":"technical/testing.html#mock-external-services","title":"Mock External Services","text":"<p>Mock Impala Connection: <pre><code>from unittest.mock import patch, MagicMock\n\nclass TestPortfolioRepository(TestCase):\n    @patch('core.repositories.impala_connection.impala_manager')\n    def test_get_all_portfolios(self, mock_impala):\n        # Setup mock\n        mock_impala.execute_query.return_value = [\n            {'code': 'TEST001', 'name': 'Test Portfolio'}\n        ]\n\n        # Call method\n        portfolios = portfolio_repository.get_all_portfolios()\n\n        # Assertions\n        self.assertEqual(len(portfolios), 1)\n        mock_impala.execute_query.assert_called_once()\n</code></pre></p>"},{"location":"technical/testing.html#mock-user","title":"Mock User","text":"<pre><code>from django.contrib.auth.models import User\n\ndef create_test_user(username='testuser', is_staff=False):\n    user = User.objects.create_user(\n        username=username,\n        password='testpass123'\n    )\n    user.is_staff = is_staff\n    return user\n</code></pre>"},{"location":"technical/testing.html#best-practices","title":"Best Practices","text":""},{"location":"technical/testing.html#1-test-names","title":"1. Test Names","text":"<p>\u2705 Good: <pre><code>def test_create_portfolio_with_valid_data_returns_portfolio(self):\ndef test_submit_for_approval_without_draft_status_raises_error(self):\n</code></pre></p> <p>\u274c Avoid: <pre><code>def test_portfolio(self):\ndef test1(self):\n</code></pre></p>"},{"location":"technical/testing.html#2-aaa-pattern","title":"2. AAA Pattern","text":"<pre><code>def test_approve_portfolio(self):\n    # Arrange\n    portfolio = PortfolioFactory.create(status='PENDING_APPROVAL')\n    checker = create_test_user('checker')\n\n    # Act\n    result = PortfolioService.approve_portfolio(portfolio, checker, \"OK\")\n\n    # Assert\n    self.assertEqual(result.status, 'ACTIVE')\n</code></pre>"},{"location":"technical/testing.html#3-one-assertion-per-test-when-practical","title":"3. One Assertion Per Test (when practical)","text":"<pre><code>def test_portfolio_created_with_draft_status(self):\n    portfolio = PortfolioService.create_portfolio(user, data)\n    self.assertEqual(portfolio.status, 'DRAFT')\n\ndef test_portfolio_created_with_maker_as_creator(self):\n    portfolio = PortfolioService.create_portfolio(user, data)\n    self.assertEqual(portfolio.created_by, user)\n</code></pre>"},{"location":"technical/testing.html#4-test-edge-cases","title":"4. Test Edge Cases","text":"<pre><code>def test_create_portfolio_with_empty_code_raises_error(self):\ndef test_create_portfolio_with_duplicate_code_raises_error(self):\ndef test_create_portfolio_with_invalid_currency_raises_error(self):\n</code></pre>"},{"location":"technical/testing.html#continuous-integration","title":"Continuous Integration","text":""},{"location":"technical/testing.html#github-actions","title":"GitHub Actions","text":"<p><code>.github/workflows/tests.yml</code>: <pre><code>name: Tests\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n      - name: Set up Python\n        uses: actions/setup-python@v2\n        with:\n          python-version: 3.10\n      - name: Install dependencies\n        run: |\n          pip install -r requirements.txt\n          pip install coverage\n      - name: Run tests\n        run: |\n          coverage run --source='.' manage.py test\n          coverage report --fail-under=80\n</code></pre></p>"},{"location":"technical/testing.html#performance-testing","title":"Performance Testing","text":""},{"location":"technical/testing.html#load-testing-with-locust","title":"Load Testing with Locust","text":"<p>Install: <pre><code>pip install locust\n</code></pre></p> <p>Define Test (<code>locustfile.py</code>): <pre><code>from locust import HttpUser, task, between\n\nclass CisTradeUser(HttpUser):\n    wait_time = between(1, 3)\n\n    def on_start(self):\n        self.client.post(\"/login/\", {\n            \"username\": \"test\",\n            \"password\": \"pass\"\n        })\n\n    @task(3)\n    def view_portfolio_list(self):\n        self.client.get(\"/portfolio/\")\n\n    @task(1)\n    def view_portfolio_detail(self):\n        self.client.get(\"/portfolio/TEST001/\")\n</code></pre></p> <p>Run: <pre><code>locust -f locustfile.py --host=http://localhost:8000\n</code></pre></p>"},{"location":"technical/testing.html#debugging-tests","title":"Debugging Tests","text":""},{"location":"technical/testing.html#verbose-output","title":"Verbose Output","text":"<pre><code>python manage.py test --verbose=2\n</code></pre>"},{"location":"technical/testing.html#keep-database","title":"Keep Database","text":"<pre><code>python manage.py test --keepdb\n</code></pre>"},{"location":"technical/testing.html#run-failed-tests-only","title":"Run Failed Tests Only","text":"<pre><code>python manage.py test --failed\n</code></pre>"},{"location":"technical/testing.html#pdb-debugging","title":"PDB Debugging","text":"<pre><code>def test_something(self):\n    import pdb; pdb.set_trace()\n    # Test code here\n</code></pre>"},{"location":"technical/testing.html#related-documentation","title":"Related Documentation","text":"<ul> <li>Development Guide</li> <li>Code Structure</li> <li>API Reference</li> </ul>"}]}