{% load static %}
<nav class="top-navbar">
    <!-- Left Side -->
    <div class="navbar-left">
        <!-- Mobile Menu Toggle -->
        <button class="navbar-icon d-md-none" id="sidebar-toggle">
            <i class="bi bi-list"></i>
        </button>

        <!-- Breadcrumb -->
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="{% url 'dashboard' %}">
                    <i class="bi bi-house-door"></i>
                </a>
            </li>
            {% block breadcrumb %}
                <li class="breadcrumb-item active">Dashboard</li>
            {% endblock %}
        </ol>
    </div>

    <!-- Right Side -->
    <div class="navbar-right">
        <!-- Search -->
        <div class="navbar-search d-none d-lg-block">
            <i class="bi bi-search"></i>
            <input type="text" placeholder="Search portfolios, currencies..." id="global-search">
        </div>

        <!-- Icons -->
        <div class="navbar-icons">
            <!-- Notifications -->
            <button class="navbar-icon" id="notifications-btn" title="Notifications">
                <i class="bi bi-bell"></i>
                {% if notification_count %}
                    <span class="badge">{{ notification_count }}</span>
                {% endif %}
            </button>

            <!-- Pending Approvals -->
            {% if user.groups.all|length > 0 and 'Checkers' in user.groups.all.0.name %}
                <a href="{% url 'portfolio:pending_approvals' %}" class="navbar-icon" title="Pending Approvals">
                    <i class="bi bi-clock-history"></i>
                    {% if pending_portfolios_count %}
                        <span class="badge">{{ pending_portfolios_count }}</span>
                    {% endif %}
                </a>
            {% endif %}

            <!-- Help -->
            <button class="navbar-icon" title="Help & Documentation">
                <i class="bi bi-question-circle"></i>
            </button>
        </div>

        <!-- User Menu -->
        <div class="user-menu" id="user-menu">
            <div class="user-avatar">
                {{ user.first_name|first|upper }}{{ user.last_name|first|upper }}
            </div>
            <div class="user-info d-none d-md-block">
                <div class="user-name">{{ user.get_full_name|default:user.username }}</div>
                <div class="user-role">
                    {% if user.is_superuser %}
                        Administrator
                    {% elif user.groups.all %}
                        {{ user.groups.all.0.name }}
                    {% else %}
                        User
                    {% endif %}
                </div>
            </div>
            <i class="bi bi-chevron-down d-none d-md-block"></i>
        </div>
    </div>
</nav>

<!-- User Dropdown Menu (Hidden by default) -->
<div class="dropdown-menu dropdown-menu-end" id="user-dropdown" style="display: none;">
    <a class="dropdown-item" href="{% url 'logout' %}">
        <i class="bi bi-box-arrow-right"></i> Logout
    </a>
</div>
