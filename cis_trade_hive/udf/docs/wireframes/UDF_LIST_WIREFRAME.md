# UDF List View Wireframe

## Page: `/udf/list/`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          UDF Fields                                          â”‚
â”‚  Manage user-defined fields                                                 â”‚
â”‚                                            [Add Field Value] [Dashboard]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILTERS                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Object Type    â–¼ â”‚  â”‚ Field Name     â–¼ â”‚  â”‚ Status     â–¼ â”‚  â”‚[Search] â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚              â”‚  â”‚ [Clear] â”‚ â”‚
â”‚  â”‚ [PORTFOLIO    ]  â”‚  â”‚ [market       ]  â”‚  â”‚ [Active   ]  â”‚  â”‚         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  Dropdown 1          â†’ Dropdown 2 (Cascading)  Dropdown 3                   â”‚
â”‚  Object Type           Field Name              Status                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [5] fields found                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Object Type â”‚ Field Name     â”‚ Field Value           â”‚ Status  â”‚ Actions    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PORTFOLIO   â”‚ market         â”‚ US Market             â”‚ Active  â”‚ [âœï¸] [ğŸ—‘ï¸]  â”‚
â”‚ PORTFOLIO   â”‚ market         â”‚ European Market       â”‚ Active  â”‚ [âœï¸] [ğŸ—‘ï¸]  â”‚
â”‚ PORTFOLIO   â”‚ market         â”‚ Asian Market          â”‚ Active  â”‚ [âœï¸] [ğŸ—‘ï¸]  â”‚
â”‚ PORTFOLIO   â”‚ market         â”‚ Latin America Market  â”‚ Active  â”‚ [âœï¸] [ğŸ—‘ï¸]  â”‚
â”‚ PORTFOLIO   â”‚ market         â”‚ Africa Market         â”‚ Inactiveâ”‚ [âœï¸] [ğŸ”„]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Icons:
âœï¸  = Edit
ğŸ—‘ï¸  = Delete
ğŸ”„ = Restore
```

---

## Filter Behavior:

### **Dropdown 1: Object Type**
```
[All Object Types    â–¼]
â”œâ”€â”€ PORTFOLIO
â”œâ”€â”€ EQUITY_PRICE
â”œâ”€â”€ SECURITY
â”œâ”€â”€ TRADE
â”œâ”€â”€ MARKETDATA
â”œâ”€â”€ REFERENCE
â”œâ”€â”€ COMMENTS
â””â”€â”€ POSITION
```

**When selected:**
- Triggers cascade to Dropdown 2
- AJAX call: `GET /udf/api/fields/{object_type}/`
- Populates Field Name dropdown with field names for selected object type

---

### **Dropdown 2: Field Name** (Cascading)
```
Initial State (no Object Type selected):
[All Field Names     â–¼]  (disabled)

After Object Type = PORTFOLIO selected:
[All Field Names     â–¼]
â”œâ”€â”€ market
â”œâ”€â”€ portfolio_type
â”œâ”€â”€ fund_manager
â”œâ”€â”€ account_group
â””â”€â”€ region

Loading State:
[Loading...          â–¼]  (disabled)
```

**Behavior:**
- Disabled until Object Type is selected
- Shows "Loading..." while fetching data
- Populates with unique field names for selected Object Type
- Allows "All Field Names" to show all fields for that Object Type

---

### **Dropdown 3: Status**
```
[Active              â–¼]
â”œâ”€â”€ Active
â”œâ”€â”€ Inactive
â””â”€â”€ All
```

**Independent filter** - does not cascade

---

## Cascading Flow Diagram:

```
User selects Object Type = "PORTFOLIO"
    â†“
JavaScript: objectTypeSelect.addEventListener('change')
    â†“
loadFieldNamesByObjectType('PORTFOLIO')
    â†“
AJAX: GET /udf/api/fields/PORTFOLIO/
    â†“
Response: {
  "success": true,
  "fields": [
    {"field_name": "market", "field_value": "US Market", ...},
    {"field_name": "portfolio_type", "field_value": "Equity", ...},
    ...
  ]
}
    â†“
Extract unique field_name values: ["market", "portfolio_type", ...]
    â†“
Populate Field Name dropdown
    â†“
Enable Field Name dropdown
```

---

## Search Button Flow:

```
User Configuration:
- Object Type: PORTFOLIO
- Field Name: market
- Status: Active
    â†“
User clicks [Search] button
    â†“
Form submits: GET /udf/list/?object_type=PORTFOLIO&field_name=market&status=active
    â†“
Backend filters:
- WHERE object_type = 'PORTFOLIO'
- AND field_name = 'market'
- AND is_active = true
    â†“
Results table updates with filtered data
```

---

## Add Field Value Button (Smart URL):

```
Current Filter State:
- Object Type: PORTFOLIO
- Field Name: market
- Status: Active
    â†“
JavaScript updates button URL dynamically:
    â†“
Button href = "/udf/create/?object_type=PORTFOLIO&field_name=market"
    â†“
User clicks [Add Field Value]
    â†“
Create form opens with pre-populated:
- Object Type = PORTFOLIO (locked)
- Field Name = market (locked)
- Field Value = [empty - user enters]
```

---

## Coming from Dashboard:

```
Dashboard: User clicks "View Fields" on Portfolio card
    â†“
URL: /udf/list/?object_type=PORTFOLIO&status=active
    â†“
List page loads with:
- object_type_filter = "PORTFOLIO"
- status_filter = "active"
    â†“
JavaScript DOMContentLoaded event:
    â†“
Detects preSelectedObjectType = "PORTFOLIO"
    â†“
Calls loadFieldNamesByObjectType("PORTFOLIO")
    â†“
Field Name dropdown populates with PORTFOLIO fields
    â†“
Filters are pre-selected:
- Object Type dropdown = PORTFOLIO
- Status dropdown = Active
    â†“
Results show all active PORTFOLIO field values
```

---

## Table Actions:

### **Edit (âœï¸)**
```
User clicks Edit icon
    â†“
Navigate to: /udf/{udf_id}/edit/
    â†“
Edit form opens (see UDF_FORM_WIREFRAME.md)
```

### **Delete (ğŸ—‘ï¸)**
```
User clicks Delete icon
    â†“
Confirmation modal appears:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Confirm Delete                  [X]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Are you sure you want to delete    â”‚
â”‚ the UDF field "US Market"?         â”‚
â”‚                                    â”‚
â”‚ This is a soft delete - the field  â”‚
â”‚ will be marked as inactive and can â”‚
â”‚ be restored later.                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          [Cancel]  [Delete]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
User clicks [Delete]
    â†“
POST /udf/{udf_id}/delete/
    â†“
Backend: Sets is_active = false
    â†“
Redirect to list page
```

### **Restore (ğŸ”„)**
```
Similar flow to Delete, but sets is_active = true
```

---

## Empty State:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                              ğŸ“­                                              â”‚
â”‚                                                                              â”‚
â”‚                   No fields found.                                           â”‚
â”‚                   Try adjusting your filters or                              â”‚
â”‚                   add a new field value.                                     â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Responsive Layout:

### Desktop (â‰¥1200px)
- Filters in 4 columns (Object Type | Field Name | Status | Buttons)

### Tablet (768px - 1199px)
- Filters in 2 rows
- Row 1: Object Type | Field Name
- Row 2: Status | Buttons

### Mobile (<768px)
- Filters stacked vertically
- Full width dropdowns
- Buttons full width
